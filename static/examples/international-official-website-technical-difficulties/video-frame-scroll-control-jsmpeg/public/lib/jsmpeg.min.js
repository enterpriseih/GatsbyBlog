(function(n){var l=n.jsmpeg=function(G,H){H=H||{};this.benchmark=!!H.benchmark;this.canvas=H.canvas||document.createElement("canvas");this.autoplay=!!H.autoplay;this.wantsToPlay=this.autoplay;this.loop=!!H.loop;this.seekable=!!H.seekable;this.preserveDrawingBuffer=!!H.preserveDrawingBuffer;this.externalLoadCallback=H.onload||null;this.externalDecodeCallback=H.ondecodeframe||null;this.externalFinishedCallback=H.onfinished||null;this.progressive=!!H.progressive;this.progressiveThrottled=!!H.progressiveThrottled;this.progressiveChunkSize=H.progressiveChunkSize||256*1024;this.progressiveChunkSizeMax=4*1024*1024;this.customIntraQuantMatrix=new Uint8Array(64);this.customNonIntraQuantMatrix=new Uint8Array(64);this.blockData=new Int32Array(64);this.zeroBlockData=new Int32Array(64);this.fillArray(this.zeroBlockData,0);this.intraFrames=[];if(!H.forceCanvas2D&&this.initWebGL()){this.renderFrame=this.renderFrameGL;this.updateLoader=this.updateLoaderGL}else{this.canvasContext=this.canvas.getContext("2d");this.renderFrame=this.renderFrame2D;this.updateLoader=this.updateLoader2D}if(G instanceof WebSocket){this.client=G;this.client.onopen=this.initSocketClient.bind(this)}else{if(this.progressive){this.beginProgressiveLoad(G)}else{this.load(G)}}};l.prototype.waitForIntraFrame=true;l.prototype.socketBufferSize=512*1024;l.prototype.initSocketClient=function(){this.buffer=new y(new ArrayBuffer(this.socketBufferSize));this.nextPictureBuffer=new y(new ArrayBuffer(this.socketBufferSize));this.nextPictureBuffer.writePos=0;this.nextPictureBuffer.chunkBegin=0;this.nextPictureBuffer.lastWriteBeforeWrap=0;this.client.binaryType="arraybuffer";this.client.onmessage=this.receiveSocketMessage.bind(this)};l.prototype.decodeSocketHeader=function(G){if(G[0]===e.charCodeAt(0)&&G[1]===e.charCodeAt(1)&&G[2]===e.charCodeAt(2)&&G[3]===e.charCodeAt(3)){this.width=(G[4]*256+G[5]);this.height=(G[6]*256+G[7]);this.initBuffers()}};l.prototype.receiveSocketMessage=function(L){var K=new Uint8Array(L.data);if(!this.sequenceStarted){this.decodeSocketHeader(K)}var M=this.buffer;var J=this.nextPictureBuffer;if(J.writePos+K.length>J.length){J.lastWriteBeforeWrap=J.writePos;J.writePos=0;J.index=0}J.bytes.set(K,J.writePos);J.writePos+=K.length;var H=0;while(true){H=J.findNextMPEGStartCode();if(H===y.NOT_FOUND||((J.index>>3)>J.writePos)){J.index=Math.max((J.writePos-3),0)<<3;return}else{if(H===r){break}}}if(this.waitForIntraFrame){J.advance(10);if(J.getBits(3)===h){this.waitForIntraFrame=false;J.chunkBegin=(J.index-13)>>3}return}if(!this.currentPictureDecoded){this.decodePicture(B)}var I=((J.index)>>3);if(I>J.chunkBegin){M.bytes.set(J.bytes.subarray(J.chunkBegin,I));M.writePos=I-J.chunkBegin}else{M.bytes.set(J.bytes.subarray(J.chunkBegin,J.lastWriteBeforeWrap));var G=J.lastWriteBeforeWrap-J.chunkBegin;M.bytes.set(J.bytes.subarray(0,I),G);M.writePos=I+G}M.index=0;J.chunkBegin=I;this.currentPictureDecoded=false;setTimeout(function(){this.decodePicture();this.currentPictureDecoded=true}.bind(this))};l.prototype.isRecording=false;l.prototype.recorderWaitForIntraFrame=false;l.prototype.recordedFrames=0;l.prototype.recordedSize=0;l.prototype.didStartRecordingCallback=null;l.prototype.recordBuffers=[];l.prototype.canRecord=function(){return(this.client&&this.client.readyState===this.client.OPEN)};l.prototype.startRecording=function(J){if(!this.canRecord()){return}this.discardRecordBuffers();this.isRecording=true;this.recorderWaitForIntraFrame=true;this.didStartRecordingCallback=J||null;this.recordedFrames=0;this.recordedSize=0;var H=(this.width>>4),G=((this.width&15)<<4)|(this.height>>8),I=(this.height&255);this.recordBuffers.push(new Uint8Array([0,0,1,179,H,G,I,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))};l.prototype.recordFrameFromCurrentBuffer=function(){if(!this.isRecording){return}if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!==h){return}this.recorderWaitForIntraFrame=false;if(this.didStartRecordingCallback){this.didStartRecordingCallback(this)}}this.recordedFrames++;this.recordedSize+=this.buffer.writePos;this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))};l.prototype.discardRecordBuffers=function(){this.recordBuffers=[];this.recordedFrames=0};l.prototype.stopRecording=function(){var G=new Blob(this.recordBuffers,{type:"video/mpeg"});this.discardRecordBuffers();this.isRecording=false;return G};l.prototype.intraFrames=[];l.prototype.currentFrame=-1;l.prototype.currentTime=0;l.prototype.frameCount=0;l.prototype.duration=0;l.prototype.load=function(G){this.url=G;var I=new XMLHttpRequest();var H=this;I.onreadystatechange=function(){if(I.readyState==I.DONE&&I.status==200){H.loadCallback(I.response)}};I.onprogress=this.updateLoader.bind(this);I.open("GET",G);I.responseType="arraybuffer";I.send()};l.prototype.updateLoader2D=function(J){var K=J.loaded/J.total,H=this.canvas.width,I=this.canvas.height,G=this.canvasContext;G.fillStyle="#222";G.fillRect(0,0,H,I);G.fillStyle="#fff";G.fillRect(0,I-I*K,H,I*K)};l.prototype.updateLoaderGL=function(G){var H=this.gl;H.uniform1f(H.getUniformLocation(this.loadingProgram,"loaded"),(G.loaded/G.total));H.drawArrays(H.TRIANGLE_STRIP,0,4)};l.prototype.loadCallback=function(G){this.buffer=new y(G);if(this.seekable){this.collectIntraFrames();this.buffer.index=0}this.findStartCode(s);this.firstSequenceHeader=this.buffer.index;this.decodeSequenceHeader();this.duration=this.frameCount/this.pictureRate;this.nextFrame();if(this.autoplay){this.play()}if(this.externalLoadCallback){this.externalLoadCallback(this)}};l.prototype.collectIntraFrames=function(){var G;for(G=0;this.findStartCode(r)!==y.NOT_FOUND;G++){this.buffer.advance(10);if(this.buffer.getBits(3)===h){this.intraFrames.push({frame:G,index:this.buffer.index-13})}}this.frameCount=G};l.prototype.seekToFrame=function(G,K){if(G<0||G>=this.frameCount||!this.intraFrames.length){return false}var I=null;for(var H=0;H<this.intraFrames.length&&this.intraFrames[H].frame<=G;H++){I=this.intraFrames[H]}this.buffer.index=I.index;this.currentFrame=I.frame-1;if(K){for(var J=I.frame;J<G;J++){this.decodePicture(B);this.findStartCode(r)}this.currentFrame=G-1}this.decodePicture();return true};l.prototype.seekToTime=function(G,H){this.seekToFrame((G*this.pictureRate)|0,H)};l.prototype.play=function(){if(this.playing){return}if(this.progressive){this.wantsToPlay=true;this.attemptToPlay()}else{this._playNow()}};l.prototype._playNow=function(){this.targetTime=this.now();this.playing=true;this.scheduleNextFrame()};l.prototype.pause=function(){this.playing=false;this.wantsToPlay=false};l.prototype.stop=function(){this.currentFrame=-1;this.currentTime=0;this.wantsToPlay=false;if(this.buffer){this.buffer.index=this.firstSequenceHeader}this.playing=false;if(this.client){this.client.close();this.client=null}};l.prototype.beginProgressiveLoad=function(G){this.url=G;this.progressiveLoadPositon=0;this.fileSize=0;var I=new XMLHttpRequest();var H=this;I.onreadystatechange=function(){if(I.readyState===I.DONE){H.fileSize=parseInt(I.getResponseHeader("Content-Length"));H.buffer=new y(new ArrayBuffer(H.fileSize));H.buffer.writePos=0;H.loadNextChunk()}};I.open("HEAD",G);I.send()};l.prototype.maybeLoadNextChunk=function(){if(!this.chunkIsLoading&&(this.buffer.index>>3)>this.nextChunkLoadAt&&this.progressiveLoadFails<5){this.loadNextChunk()}};l.prototype.loadNextChunk=function(){var I=this;var J=this.buffer.writePos,G=Math.min(this.buffer.writePos+I.progressiveChunkSize-1,this.fileSize-1);if(J>=this.fileSize){return}this.chunkIsLoading=true;this.chunkLoadStart=Date.now();var H=new XMLHttpRequest();H.onreadystatechange=function(){if(H.readyState===H.DONE&&H.status>200&&H.status<300){I.progressiveLoadFails=0;I.progressiveLoadCallback(H.response)}else{if(H.readyState===H.DONE){I.chunkIsLoading=false;I.progressiveLoadFails++;I.maybeLoadNextChunk()}}};if(J===0){H.onprogress=this.updateLoader.bind(this)}H.open("GET",this.url+"?"+J+"-"+G);H.setRequestHeader("Range","bytes="+J+"-"+G);H.responseType="arraybuffer";H.send()};l.prototype.canPlayThrough=false;l.prototype.progressiveLoadCallback=function(J){this.chunkIsLoading=false;var R=(this.buffer.writePos===0);var S=new Uint8Array(J);this.buffer.bytes.set(S,this.buffer.writePos);this.buffer.writePos+=S.length;if(R){this.findStartCode(s);this.firstSequenceHeader=this.buffer.index;this.decodeSequenceHeader()}var I=(Date.now()-this.chunkLoadStart)/1000;var H=(this.buffer.index>>3);var P=S.length/I;var Q=0;if(this.currentTime>0){Q=H/this.currentTime}else{var L=this.buffer.index;this.buffer.index=(this.buffer.writePos-S.length)<<3;var M;for(M=0;this.findStartCode(r)!==y.NOT_FOUND;M++){}this.buffer.index=L;Q=S.length/(M/this.pictureRate)}var G=(this.buffer.writePos-H)/Q;var N=(this.fileSize-this.buffer.writePos)/P;var K=(this.fileSize-H)/Q;this.canPlayThrough=K>N;if(G>I*8){this.progressiveChunkSize=Math.min(this.progressiveChunkSize*2,this.progressiveChunkSizeMax)}if(this.progressiveThrottled&&this.canPlayThrough){this.nextChunkLoadAt=this.buffer.writePos-this.progressiveChunkSize*2-this.progressiveChunkSize*(Q/P)*4}else{this.nextChunkLoadAt=0}if(this.buffer.writePos>=this.fileSize){this.lastFrameIndex=this.buffer.writePos<<3;this.canPlayThrough=true;if(this.seekable){var O=this.buffer.index;this.buffer.index=0;this.collectIntraFrames();this.buffer.index=O}if(this.externalLoadCallback){this.externalLoadCallback(this)}}else{this.lastFrameIndex=this.findLastPictureStartCode();this.maybeLoadNextChunk()}this.attemptToPlay()};l.prototype.findLastPictureStartCode=function(){var H=this.buffer.bytes;for(var G=this.buffer.writePos;G>3;G--){if(H[G]==r&&H[G-1]==1&&H[G-2]==0&&H[G-3]==0){return(G-3)<<3}}return 0};l.prototype.attemptToPlay=function(){if(this.playing||!this.wantsToPlay||!this.canPlayThrough){return}this._playNow()};l.prototype.readCode=function(H){var G=0;do{G=H[G+this.buffer.getBits(1)]}while(G>=0&&H[G]!==0);return H[G+2]};l.prototype.findStartCode=function(G){var H=0;while(true){H=this.buffer.findNextMPEGStartCode();if(H===G||H===y.NOT_FOUND){return H}}return y.NOT_FOUND};l.prototype.fillArray=function(G,J){for(var H=0,I=G.length;H<I;H++){G[H]=J}};l.prototype.pictureRate=30;l.prototype.lateTime=0;l.prototype.firstSequenceHeader=0;l.prototype.targetTime=0;l.prototype.benchmark=false;l.prototype.benchFrame=0;l.prototype.benchDecodeTimes=0;l.prototype.benchAvgFrameTime=0;l.prototype.now=function(){return n.performance?n.performance.now():Date.now()};l.prototype.nextFrame=function(){if(!this.buffer){return}var H=this.now();while(true){var G=this.buffer.findNextMPEGStartCode();if(G===s){this.decodeSequenceHeader()}else{if(G===r){if(this.progressive&&this.buffer.index>=this.lastFrameIndex){this.playing=false;this.maybeLoadNextChunk();return}if(this.playing){this.scheduleNextFrame()}this.decodePicture();this.benchDecodeTimes+=this.now()-H;return this.canvas}else{if(G===y.NOT_FOUND){this.stop();if(this.externalFinishedCallback){this.externalFinishedCallback(this)}if(this.loop&&this.sequenceStarted){this.play()}return null}else{}}}}};l.prototype.scheduleNextFrame=function(){this.lateTime=this.now()-this.targetTime;var G=Math.max(0,(1000/this.pictureRate)-this.lateTime);this.targetTime=this.now()+G;if(this.benchmark){this.benchFrame++;if(this.benchFrame>=120){this.benchAvgFrameTime=this.benchDecodeTimes/this.benchFrame;this.benchFrame=0;this.benchDecodeTimes=0;if(n.console){console.log("Average time per frame:",this.benchAvgFrameTime,"ms")}}setTimeout(this.nextFrame.bind(this),0)}setTimeout(this.nextFrame.bind(this),Math.max(G,1))};l.prototype.decodeSequenceHeader=function(){this.width=this.buffer.getBits(12);this.height=this.buffer.getBits(12);this.buffer.advance(4);this.pictureRate=o[this.buffer.getBits(4)];this.buffer.advance(18+1+10+1);this.initBuffers();var G;if(this.buffer.getBits(1)){for(G=0;G<64;G++){this.customIntraQuantMatrix[E[G]]=this.buffer.getBits(8)}this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(G=0;G<64;G++){this.customNonIntraQuantMatrix[E[G]]=this.buffer.getBits(8)}this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}};l.prototype.initBuffers=function(){this.intraQuantMatrix=D;this.nonIntraQuantMatrix=u;this.mbWidth=(this.width+15)>>4;this.mbHeight=(this.height+15)>>4;this.mbSize=this.mbWidth*this.mbHeight;this.codedWidth=this.mbWidth<<4;this.codedHeight=this.mbHeight<<4;this.codedSize=this.codedWidth*this.codedHeight;this.halfWidth=this.mbWidth<<3;this.halfHeight=this.mbHeight<<3;this.quarterSize=this.codedSize>>2;if(this.sequenceStarted){return}this.sequenceStarted=true;var G=n.Uint8ClampedArray||n.Uint8Array;if(!n.Uint8ClampedArray){this.copyBlockToDestination=this.copyBlockToDestinationClamp;this.addBlockToDestination=this.addBlockToDestinationClamp}this.currentY=new G(this.codedSize);this.currentY32=new Uint32Array(this.currentY.buffer);this.currentCr=new G(this.codedSize>>2);this.currentCr32=new Uint32Array(this.currentCr.buffer);this.currentCb=new G(this.codedSize>>2);this.currentCb32=new Uint32Array(this.currentCb.buffer);this.forwardY=new G(this.codedSize);this.forwardY32=new Uint32Array(this.forwardY.buffer);this.forwardCr=new G(this.codedSize>>2);this.forwardCr32=new Uint32Array(this.forwardCr.buffer);this.forwardCb=new G(this.codedSize>>2);this.forwardCb32=new Uint32Array(this.forwardCb.buffer);this.canvas.width=this.width;this.canvas.height=this.height;if(this.gl){this.gl.useProgram(this.program);this.gl.viewport(0,0,this.width,this.height)}else{this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height);this.fillArray(this.currentRGBA.data,255)}};l.prototype.currentY=null;l.prototype.currentCr=null;l.prototype.currentCb=null;l.prototype.currentRGBA=null;l.prototype.pictureCodingType=0;l.prototype.forwardY=null;l.prototype.forwardCr=null;l.prototype.forwardCb=null;l.prototype.fullPelForward=false;l.prototype.forwardFCode=0;l.prototype.forwardRSize=0;l.prototype.forwardF=0;l.prototype.decodePicture=function(I){this.currentFrame++;this.currentTime=this.currentFrame/this.pictureRate;if(this.progressive){this.maybeLoadNextChunk()}this.buffer.advance(10);this.pictureCodingType=this.buffer.getBits(3);this.buffer.advance(16);if(this.pictureCodingType<=0||this.pictureCodingType>=k){return}if(this.pictureCodingType===a){this.fullPelForward=this.buffer.getBits(1);this.forwardFCode=this.buffer.getBits(3);if(this.forwardFCode===0){return}this.forwardRSize=this.forwardFCode-1;this.forwardF=1<<this.forwardRSize}var K=0;do{K=this.buffer.findNextMPEGStartCode()}while(K===c||K===x);while(K>=w&&K<=b){this.decodeSlice((K&255));K=this.buffer.findNextMPEGStartCode()}this.buffer.rewind(32);this.recordFrameFromCurrentBuffer();if(I!==B){this.renderFrame();if(this.externalDecodeCallback){this.externalDecodeCallback(this,this.canvas)}}if(this.pictureCodingType===h||this.pictureCodingType===a){var N=this.forwardY,L=this.forwardY32,J=this.forwardCr,H=this.forwardCr32,G=this.forwardCb,M=this.forwardCb32;this.forwardY=this.currentY;this.forwardY32=this.currentY32;this.forwardCr=this.currentCr;this.forwardCr32=this.currentCr32;this.forwardCb=this.currentCb;this.forwardCb32=this.currentCb32;this.currentY=N;this.currentY32=L;this.currentCr=J;this.currentCr32=H;this.currentCb=G;this.currentCb32=M}};l.prototype.YCbCrToRGBA=function(){var K=this.currentY;var Z=this.currentCb;var O=this.currentCr;var aa=this.currentRGBA.data;var Q=0;var P=this.codedWidth;var ac=this.codedWidth+(this.codedWidth-this.width);var Y=0;var T=this.halfWidth-(this.width>>1);var W=0;var U=this.width*4;var ab=this.width*4;var S=this.width>>1;var R=this.height>>1;var X,M,V,ad,ae;for(var N=0;N<R;N++){for(var L=0;L<S;L++){X=Z[Y];M=O[Y];Y++;V=(M+((M*103)>>8))-179;ad=((X*88)>>8)-44+((M*183)>>8)-91;ae=(X+((X*198)>>8))-227;var J=K[Q++];var I=K[Q++];aa[W]=J+V;aa[W+1]=J-ad;aa[W+2]=J+ae;aa[W+4]=I+V;aa[W+5]=I-ad;aa[W+6]=I+ae;W+=8;var H=K[P++];var G=K[P++];aa[U]=H+V;aa[U+1]=H-ad;aa[U+2]=H+ae;aa[U+4]=G+V;aa[U+5]=G-ad;aa[U+6]=G+ae;U+=8}Q+=ac;P+=ac;W+=ab;U+=ab;Y+=T}};l.prototype.renderFrame2D=function(){this.YCbCrToRGBA();this.canvasContext.putImageData(this.currentRGBA,0,0)};l.prototype.gl=null;l.prototype.program=null;l.prototype.YTexture=null;l.prototype.CBTexture=null;l.prototype.CRTexture=null;l.prototype.createTexture=function(H,G){var J=this.gl;var I=J.createTexture();J.bindTexture(J.TEXTURE_2D,I);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE);J.uniform1i(J.getUniformLocation(this.program,G),H);return I};l.prototype.compileShader=function(G,I){var J=this.gl;var H=J.createShader(G);J.shaderSource(H,I);J.compileShader(H);if(!J.getShaderParameter(H,J.COMPILE_STATUS)){throw new Error(J.getShaderInfoLog(H))}return H};l.prototype.initWebGL=function(){var J;try{var G={preserveDrawingBuffer:this.preserveDrawingBuffer};J=this.gl=this.canvas.getContext("webgl",G)||this.canvas.getContext("experimental-webgl",G)}catch(I){return false}if(!J){return false}this.buffer=J.createBuffer();J.bindBuffer(J.ARRAY_BUFFER,this.buffer);J.bufferData(J.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),J.STATIC_DRAW);this.program=J.createProgram();J.attachShader(this.program,this.compileShader(J.VERTEX_SHADER,p));J.attachShader(this.program,this.compileShader(J.FRAGMENT_SHADER,i));J.linkProgram(this.program);if(!J.getProgramParameter(this.program,J.LINK_STATUS)){throw new Error(J.getProgramInfoLog(this.program))}J.useProgram(this.program);this.YTexture=this.createTexture(0,"YTexture");this.CBTexture=this.createTexture(1,"CBTexture");this.CRTexture=this.createTexture(2,"CRTexture");var H=J.getAttribLocation(this.program,"vertex");J.enableVertexAttribArray(H);J.vertexAttribPointer(H,2,J.FLOAT,false,0,0);this.loadingProgram=J.createProgram();J.attachShader(this.loadingProgram,this.compileShader(J.VERTEX_SHADER,p));J.attachShader(this.loadingProgram,this.compileShader(J.FRAGMENT_SHADER,A));J.linkProgram(this.loadingProgram);J.useProgram(this.loadingProgram);H=J.getAttribLocation(this.loadingProgram,"vertex");J.enableVertexAttribArray(H);J.vertexAttribPointer(H,2,J.FLOAT,false,0,0);return true};l.prototype.renderFrameGL=function(){var J=this.gl;var H=new Uint8Array(this.currentY.buffer),G=new Uint8Array(this.currentCr.buffer),I=new Uint8Array(this.currentCb.buffer);J.activeTexture(J.TEXTURE0);J.bindTexture(J.TEXTURE_2D,this.YTexture);J.texImage2D(J.TEXTURE_2D,0,J.LUMINANCE,this.codedWidth,this.height,0,J.LUMINANCE,J.UNSIGNED_BYTE,H);J.activeTexture(J.TEXTURE1);J.bindTexture(J.TEXTURE_2D,this.CBTexture);J.texImage2D(J.TEXTURE_2D,0,J.LUMINANCE,this.halfWidth,this.height/2,0,J.LUMINANCE,J.UNSIGNED_BYTE,G);J.activeTexture(J.TEXTURE2);J.bindTexture(J.TEXTURE_2D,this.CRTexture);J.texImage2D(J.TEXTURE_2D,0,J.LUMINANCE,this.halfWidth,this.height/2,0,J.LUMINANCE,J.UNSIGNED_BYTE,I);J.drawArrays(J.TRIANGLE_STRIP,0,4)};l.prototype.quantizerScale=0;l.prototype.sliceBegin=false;l.prototype.decodeSlice=function(G){this.sliceBegin=true;this.macroblockAddress=(G-1)*this.mbWidth-1;this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0;this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;this.quantizerScale=this.buffer.getBits(5);while(this.buffer.getBits(1)){this.buffer.advance(8)}do{this.decodeMacroblock()}while(!this.buffer.nextBytesAreStartCode())};l.prototype.macroblockAddress=0;l.prototype.mbRow=0;l.prototype.mbCol=0;l.prototype.macroblockType=0;l.prototype.macroblockIntra=false;l.prototype.macroblockMotFw=false;l.prototype.motionFwH=0;l.prototype.motionFwV=0;l.prototype.motionFwHPrev=0;l.prototype.motionFwVPrev=0;l.prototype.decodeMacroblock=function(){var G=0,I=this.readCode(z);while(I===34){I=this.readCode(z)}while(I===35){G+=33;I=this.readCode(z)}G+=I;if(this.sliceBegin){this.sliceBegin=false;this.macroblockAddress+=G}else{if(this.macroblockAddress+G>=this.mbSize){return}if(G>1){this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;if(this.pictureCodingType===a){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}}while(G>1){this.macroblockAddress++;this.mbRow=(this.macroblockAddress/this.mbWidth)|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb);G--}this.macroblockAddress++}this.mbRow=(this.macroblockAddress/this.mbWidth)|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.macroblockType=this.readCode(t[this.pictureCodingType]);this.macroblockIntra=(this.macroblockType&1);this.macroblockMotFw=(this.macroblockType&8);if((this.macroblockType&16)!==0){this.quantizerScale=this.buffer.getBits(5)}if(this.macroblockIntra){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}else{this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;this.decodeMotionVectors();this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb)}var J=((this.macroblockType&2)!==0)?this.readCode(C):(this.macroblockIntra?63:0);for(var K=0,H=32;K<6;K++){if((J&H)!==0){this.decodeBlock(K)}H>>=1}};l.prototype.decodeMotionVectors=function(){var H,I,G=0;if(this.macroblockMotFw){H=this.readCode(g);if((H!==0)&&(this.forwardF!==1)){G=this.buffer.getBits(this.forwardRSize);I=((Math.abs(H)-1)<<this.forwardRSize)+G+1;if(H<0){I=-I}}else{I=H}this.motionFwHPrev+=I;if(this.motionFwHPrev>(this.forwardF<<4)-1){this.motionFwHPrev-=this.forwardF<<5}else{if(this.motionFwHPrev<((-this.forwardF)<<4)){this.motionFwHPrev+=this.forwardF<<5}}this.motionFwH=this.motionFwHPrev;if(this.fullPelForward){this.motionFwH<<=1}H=this.readCode(g);if((H!==0)&&(this.forwardF!==1)){G=this.buffer.getBits(this.forwardRSize);I=((Math.abs(H)-1)<<this.forwardRSize)+G+1;if(H<0){I=-I}}else{I=H}this.motionFwVPrev+=I;if(this.motionFwVPrev>(this.forwardF<<4)-1){this.motionFwVPrev-=this.forwardF<<5}else{if(this.motionFwVPrev<((-this.forwardF)<<4)){this.motionFwVPrev+=this.forwardF<<5}}this.motionFwV=this.motionFwVPrev;if(this.fullPelForward){this.motionFwV<<=1}}else{if(this.pictureCodingType===a){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}}};l.prototype.copyMacroblock=function(af,R,P,ai,T){var ag,ad,aa,O,U,J,S,Z,X;var N=this.currentY32;var G=this.currentCb32;var ah=this.currentCr32;ag=this.codedWidth;ad=ag-16;aa=af>>1;O=R>>1;U=(af&1)===1;J=(R&1)===1;S=((this.mbRow<<4)+O)*ag+(this.mbCol<<4)+aa;Z=(this.mbRow*ag+this.mbCol)<<2;X=Z+(ag<<2);var Y;var M,L,W;if(U){if(J){while(Z<X){M=P[S]+P[S+ag];S++;for(Y=0;Y<4;Y++){L=P[S]+P[S+ag];S++;W=(((M+L+2)>>2)&255);M=P[S]+P[S+ag];S++;W|=(((M+L+2)<<6)&65280);L=P[S]+P[S+ag];S++;W|=(((M+L+2)<<14)&16711680);M=P[S]+P[S+ag];S++;W|=(((M+L+2)<<22)&4278190080);N[Z++]=W}Z+=ad>>2;S+=ad-1}}else{while(Z<X){M=P[S++];for(Y=0;Y<4;Y++){L=P[S++];W=(((M+L+1)>>1)&255);M=P[S++];W|=(((M+L+1)<<7)&65280);L=P[S++];W|=(((M+L+1)<<15)&16711680);M=P[S++];W|=(((M+L+1)<<23)&4278190080);N[Z++]=W}Z+=ad>>2;S+=ad-1}}}else{if(J){while(Z<X){for(Y=0;Y<4;Y++){W=(((P[S]+P[S+ag]+1)>>1)&255);S++;W|=(((P[S]+P[S+ag]+1)<<7)&65280);S++;W|=(((P[S]+P[S+ag]+1)<<15)&16711680);S++;W|=(((P[S]+P[S+ag]+1)<<23)&4278190080);S++;N[Z++]=W}Z+=ad>>2;S+=ad}}else{while(Z<X){for(Y=0;Y<4;Y++){W=P[S];S++;W|=P[S]<<8;S++;W|=P[S]<<16;S++;W|=P[S]<<24;S++;N[Z++]=W}Z+=ad>>2;S+=ad}}}ag=this.halfWidth;ad=ag-8;aa=(af/2)>>1;O=(R/2)>>1;U=((af/2)&1)===1;J=((R/2)&1)===1;S=((this.mbRow<<3)+O)*ag+(this.mbCol<<3)+aa;Z=(this.mbRow*ag+this.mbCol)<<1;X=Z+(ag<<1);var ac,ab,Q;var K,I,ae;if(U){if(J){while(Z<X){ac=ai[S]+ai[S+ag];K=T[S]+T[S+ag];S++;for(Y=0;Y<2;Y++){ab=ai[S]+ai[S+ag];I=T[S]+T[S+ag];S++;Q=(((ac+ab+2)>>2)&255);ae=(((K+I+2)>>2)&255);ac=ai[S]+ai[S+ag];K=T[S]+T[S+ag];S++;Q|=(((ac+ab+2)<<6)&65280);ae|=(((K+I+2)<<6)&65280);ab=ai[S]+ai[S+ag];I=T[S]+T[S+ag];S++;Q|=(((ac+ab+2)<<14)&16711680);ae|=(((K+I+2)<<14)&16711680);ac=ai[S]+ai[S+ag];K=T[S]+T[S+ag];S++;Q|=(((ac+ab+2)<<22)&4278190080);ae|=(((K+I+2)<<22)&4278190080);ah[Z]=Q;G[Z]=ae;Z++}Z+=ad>>2;S+=ad-1}}else{while(Z<X){ac=ai[S];K=T[S];S++;for(Y=0;Y<2;Y++){ab=ai[S];I=T[S++];Q=(((ac+ab+1)>>1)&255);ae=(((K+I+1)>>1)&255);ac=ai[S];K=T[S++];Q|=(((ac+ab+1)<<7)&65280);ae|=(((K+I+1)<<7)&65280);ab=ai[S];I=T[S++];Q|=(((ac+ab+1)<<15)&16711680);ae|=(((K+I+1)<<15)&16711680);ac=ai[S];K=T[S++];Q|=(((ac+ab+1)<<23)&4278190080);ae|=(((K+I+1)<<23)&4278190080);ah[Z]=Q;G[Z]=ae;Z++}Z+=ad>>2;S+=ad-1}}}else{if(J){while(Z<X){for(Y=0;Y<2;Y++){Q=(((ai[S]+ai[S+ag]+1)>>1)&255);ae=(((T[S]+T[S+ag]+1)>>1)&255);S++;Q|=(((ai[S]+ai[S+ag]+1)<<7)&65280);ae|=(((T[S]+T[S+ag]+1)<<7)&65280);S++;Q|=(((ai[S]+ai[S+ag]+1)<<15)&16711680);ae|=(((T[S]+T[S+ag]+1)<<15)&16711680);S++;Q|=(((ai[S]+ai[S+ag]+1)<<23)&4278190080);ae|=(((T[S]+T[S+ag]+1)<<23)&4278190080);S++;ah[Z]=Q;G[Z]=ae;Z++}Z+=ad>>2;S+=ad}}else{while(Z<X){for(Y=0;Y<2;Y++){Q=ai[S];ae=T[S];S++;Q|=ai[S]<<8;ae|=T[S]<<8;S++;Q|=ai[S]<<16;ae|=T[S]<<16;S++;Q|=ai[S]<<24;ae|=T[S]<<24;S++;ah[Z]=Q;G[Z]=ae;Z++}Z+=ad>>2;S+=ad}}}};l.prototype.blockData=null;l.prototype.decodeBlock=function(M){var I=0,Q;if(this.macroblockIntra){var H,R;if(M<4){H=this.dcPredictorY;R=this.readCode(F)}else{H=(M===4?this.dcPredictorCr:this.dcPredictorCb);R=this.readCode(f)}if(R>0){var N=this.buffer.getBits(R);if((N&(1<<(R-1)))!==0){this.blockData[0]=H+N}else{this.blockData[0]=H+((-1<<R)|(N+1))}}else{this.blockData[0]=H}if(M<4){this.dcPredictorY=this.blockData[0]}else{if(M===4){this.dcPredictorCr=this.blockData[0]}else{this.dcPredictorCb=this.blockData[0]}}this.blockData[0]<<=(3+5);Q=this.intraQuantMatrix;I=1}else{Q=this.nonIntraQuantMatrix}var G=0;while(true){var J=0,P=this.readCode(q);if((P===1)&&(I>0)&&(this.buffer.getBits(1)===0)){break}if(P===65535){J=this.buffer.getBits(6);G=this.buffer.getBits(8);if(G===0){G=this.buffer.getBits(8)}else{if(G===128){G=this.buffer.getBits(8)-256}else{if(G>128){G=G-256}}}}else{J=P>>8;G=P&255;if(this.buffer.getBits(1)){G=-G}}I+=J;var L=E[I];I++;G<<=1;if(!this.macroblockIntra){G+=(G<0?-1:1)}G=(G*this.quantizerScale*Q[L])>>4;if((G&1)===0){G-=G>0?1:-1}if(G>2047){G=2047}else{if(G<-2048){G=-2048}}this.blockData[L]=G*v[L]}var O,K,S;if(M<4){O=this.currentY;S=this.codedWidth-8;K=(this.mbRow*this.codedWidth+this.mbCol)<<4;if((M&1)!==0){K+=8}if((M&2)!==0){K+=this.codedWidth<<3}}else{O=(M===4)?this.currentCb:this.currentCr;S=(this.codedWidth>>1)-8;K=((this.mbRow*this.codedWidth)<<2)+(this.mbCol<<3)}if(this.macroblockIntra){if(I===1){this.copyValueToDestination((this.blockData[0]+128)>>8,O,K,S);this.blockData[0]=0}else{this.IDCT();this.copyBlockToDestination(this.blockData,O,K,S);this.blockData.set(this.zeroBlockData)}}else{if(I===1){this.addValueToDestination((this.blockData[0]+128)>>8,O,K,S);this.blockData[0]=0}else{this.IDCT();this.addBlockToDestination(this.blockData,O,K,S);this.blockData.set(this.zeroBlockData)}}I=0};l.prototype.copyBlockToDestination=function(I,K,H,G){for(var J=0;J<64;J+=8,H+=G+8){K[H+0]=I[J+0];K[H+1]=I[J+1];K[H+2]=I[J+2];K[H+3]=I[J+3];K[H+4]=I[J+4];K[H+5]=I[J+5];K[H+6]=I[J+6];K[H+7]=I[J+7]}};l.prototype.addBlockToDestination=function(I,K,H,G){for(var J=0;J<64;J+=8,H+=G+8){K[H+0]+=I[J+0];K[H+1]+=I[J+1];K[H+2]+=I[J+2];K[H+3]+=I[J+3];K[H+4]+=I[J+4];K[H+5]+=I[J+5];K[H+6]+=I[J+6];K[H+7]+=I[J+7]}};l.prototype.copyValueToDestination=function(I,K,H,G){for(var J=0;J<64;J+=8,H+=G+8){K[H+0]=I;K[H+1]=I;K[H+2]=I;K[H+3]=I;K[H+4]=I;K[H+5]=I;K[H+6]=I;K[H+7]=I}};l.prototype.addValueToDestination=function(I,K,H,G){for(var J=0;J<64;J+=8,H+=G+8){K[H+0]+=I;K[H+1]+=I;K[H+2]+=I;K[H+3]+=I;K[H+4]+=I;K[H+5]+=I;K[H+6]+=I;K[H+7]+=I}};l.prototype.copyBlockToDestinationClamp=function(K,N,I,G){var M=0;for(var J=0;J<8;J++){for(var H=0;H<8;H++){var L=K[M++];N[I++]=L>255?255:(L<0?0:L)}I+=G}};l.prototype.addBlockToDestinationClamp=function(K,N,I,G){var M=0;for(var J=0;J<8;J++){for(var H=0;H<8;H++){var L=K[M++]+N[I];N[I++]=L>255?255:(L<0?0:L)}I+=G}};l.prototype.IDCT=function(){var Q,P,O,N,M,S,R,J,Z,Y,X,W,U,L,K,I,H,G,V,T=this.blockData;for(V=0;V<8;++V){Q=T[4*8+V];P=T[2*8+V]+T[6*8+V];O=T[5*8+V]-T[3*8+V];S=T[1*8+V]+T[7*8+V];R=T[3*8+V]+T[5*8+V];N=T[1*8+V]-T[7*8+V];M=S+R;J=T[0*8+V];U=((N*473-O*196+128)>>8)-M;Z=U-(((S-R)*362+128)>>8);Y=J-Q;X=(((T[2*8+V]-T[6*8+V])*362+128)>>8)-P;W=J+Q;L=Y+X;K=W+P;I=Y-X;H=W-P;G=-Z-((O*473+N*196+128)>>8);T[0*8+V]=M+K;T[1*8+V]=U+L;T[2*8+V]=I-Z;T[3*8+V]=H-G;T[4*8+V]=H+G;T[5*8+V]=Z+I;T[6*8+V]=L-U;T[7*8+V]=K-M}for(V=0;V<64;V+=8){Q=T[4+V];P=T[2+V]+T[6+V];O=T[5+V]-T[3+V];S=T[1+V]+T[7+V];R=T[3+V]+T[5+V];N=T[1+V]-T[7+V];M=S+R;J=T[0+V];U=((N*473-O*196+128)>>8)-M;Z=U-(((S-R)*362+128)>>8);Y=J-Q;X=(((T[2+V]-T[6+V])*362+128)>>8)-P;W=J+Q;L=Y+X;K=W+P;I=Y-X;H=W-P;G=-Z-((O*473+N*196+128)>>8);T[0+V]=(M+K+128)>>8;T[1+V]=(U+L+128)>>8;T[2+V]=(I-Z+128)>>8;T[3+V]=(H-G+128)>>8;T[4+V]=(H+G+128)>>8;T[5+V]=(Z+I+128)>>8;T[6+V]=(L-U+128)>>8;T[7+V]=(K-M+128)>>8}};var e="jsmp",B=1,o=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],E=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),D=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),u=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),v=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),z=new Int16Array([1*3,2*3,0,3*3,4*3,0,0,0,1,5*3,6*3,0,7*3,8*3,0,9*3,10*3,0,11*3,12*3,0,0,0,3,0,0,2,13*3,14*3,0,15*3,16*3,0,0,0,5,0,0,4,17*3,18*3,0,19*3,20*3,0,0,0,7,0,0,6,21*3,22*3,0,23*3,24*3,0,25*3,26*3,0,27*3,28*3,0,-1,29*3,0,-1,30*3,0,31*3,32*3,0,33*3,34*3,0,35*3,36*3,0,37*3,38*3,0,0,0,9,0,0,8,39*3,40*3,0,41*3,42*3,0,43*3,44*3,0,45*3,46*3,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,47*3,-1,0,-1,48*3,0,49*3,50*3,0,51*3,52*3,0,53*3,54*3,0,55*3,56*3,0,57*3,58*3,0,59*3,60*3,0,61*3,-1,0,-1,62*3,0,63*3,64*3,0,65*3,66*3,0,67*3,68*3,0,69*3,70*3,0,71*3,72*3,0,73*3,74*3,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),j=new Int8Array([1*3,2*3,0,-1,3*3,0,0,0,1,0,0,17]),d=new Int8Array([1*3,2*3,0,3*3,4*3,0,0,0,10,5*3,6*3,0,0,0,2,7*3,8*3,0,0,0,8,9*3,10*3,0,11*3,12*3,0,-1,13*3,0,0,0,18,0,0,26,0,0,1,0,0,17]),m=new Int8Array([1*3,2*3,0,3*3,5*3,0,4*3,6*3,0,8*3,7*3,0,0,0,12,9*3,10*3,0,0,0,14,13*3,14*3,0,12*3,11*3,0,0,0,4,0,0,6,18*3,16*3,0,15*3,17*3,0,0,0,8,0,0,10,-1,19*3,0,0,0,1,20*3,21*3,0,0,0,30,0,0,17,0,0,22,0,0,26]),C=new Int16Array([2*3,1*3,0,3*3,6*3,0,4*3,5*3,0,8*3,11*3,0,12*3,13*3,0,9*3,7*3,0,10*3,14*3,0,20*3,19*3,0,18*3,16*3,0,23*3,17*3,0,27*3,25*3,0,21*3,28*3,0,15*3,22*3,0,24*3,26*3,0,0,0,60,35*3,40*3,0,44*3,48*3,0,38*3,36*3,0,42*3,47*3,0,29*3,31*3,0,39*3,32*3,0,0,0,32,45*3,46*3,0,33*3,41*3,0,43*3,34*3,0,0,0,4,30*3,37*3,0,0,0,8,0,0,16,0,0,44,50*3,56*3,0,0,0,28,0,0,52,0,0,62,61*3,59*3,0,52*3,60*3,0,0,0,1,55*3,54*3,0,0,0,61,0,0,56,57*3,58*3,0,0,0,2,0,0,40,51*3,62*3,0,0,0,48,64*3,63*3,0,49*3,53*3,0,0,0,20,0,0,12,80*3,83*3,0,0,0,63,77*3,75*3,0,65*3,73*3,0,84*3,66*3,0,0,0,24,0,0,36,0,0,3,69*3,87*3,0,81*3,79*3,0,68*3,71*3,0,70*3,78*3,0,67*3,76*3,0,72*3,74*3,0,86*3,85*3,0,88*3,82*3,0,-1,94*3,0,95*3,97*3,0,0,0,33,0,0,9,106*3,110*3,0,102*3,116*3,0,0,0,5,0,0,10,93*3,89*3,0,0,0,6,0,0,18,0,0,17,0,0,34,113*3,119*3,0,103*3,104*3,0,90*3,92*3,0,109*3,107*3,0,117*3,118*3,0,101*3,99*3,0,98*3,96*3,0,100*3,91*3,0,114*3,115*3,0,105*3,108*3,0,112*3,111*3,0,121*3,125*3,0,0,0,41,0,0,14,0,0,21,124*3,122*3,0,120*3,123*3,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),g=new Int16Array([1*3,2*3,0,4*3,3*3,0,0,0,0,6*3,5*3,0,8*3,7*3,0,0,0,-1,0,0,1,9*3,10*3,0,12*3,11*3,0,0,0,2,0,0,-2,14*3,15*3,0,16*3,13*3,0,20*3,18*3,0,0,0,3,0,0,-3,17*3,19*3,0,-1,23*3,0,27*3,25*3,0,26*3,21*3,0,24*3,22*3,0,32*3,28*3,0,29*3,31*3,0,-1,33*3,0,36*3,35*3,0,0,0,-4,30*3,34*3,0,0,0,4,0,0,-7,0,0,5,37*3,41*3,0,0,0,-5,0,0,7,38*3,40*3,0,42*3,39*3,0,0,0,-6,0,0,6,51*3,54*3,0,50*3,49*3,0,45*3,46*3,0,52*3,47*3,0,43*3,53*3,0,44*3,48*3,0,0,0,10,0,0,9,0,0,8,0,0,-8,57*3,66*3,0,0,0,-9,60*3,64*3,0,56*3,61*3,0,55*3,62*3,0,58*3,63*3,0,0,0,-10,59*3,65*3,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),F=new Int8Array([2*3,1*3,0,6*3,5*3,0,3*3,4*3,0,0,0,1,0,0,2,9*3,8*3,0,7*3,10*3,0,0,0,0,12*3,11*3,0,0,0,4,0,0,3,13*3,14*3,0,0,0,5,0,0,6,16*3,15*3,0,17*3,-1,0,0,0,7,0,0,8]),f=new Int8Array([2*3,1*3,0,4*3,3*3,0,6*3,5*3,0,8*3,7*3,0,0,0,2,0,0,1,0,0,0,10*3,9*3,0,0,0,3,12*3,11*3,0,0,0,4,14*3,13*3,0,0,0,5,16*3,15*3,0,0,0,6,17*3,-1,0,0,0,7,0,0,8]),q=new Int32Array([1*3,2*3,0,4*3,3*3,0,0,0,1,7*3,8*3,0,6*3,5*3,0,13*3,9*3,0,11*3,10*3,0,14*3,12*3,0,0,0,257,20*3,22*3,0,18*3,21*3,0,16*3,19*3,0,0,0,513,17*3,15*3,0,0,0,2,0,0,3,27*3,25*3,0,29*3,31*3,0,24*3,26*3,0,32*3,30*3,0,0,0,1025,23*3,28*3,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,37*3,36*3,0,0,0,1281,35*3,34*3,0,39*3,38*3,0,33*3,42*3,0,40*3,41*3,0,52*3,50*3,0,54*3,53*3,0,48*3,49*3,0,43*3,45*3,0,46*3,44*3,0,0,0,2049,0,0,4,0,0,514,0,0,2305,51*3,47*3,0,55*3,57*3,0,60*3,56*3,0,59*3,58*3,0,61*3,62*3,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,76*3,75*3,0,67*3,70*3,0,73*3,71*3,0,78*3,74*3,0,72*3,77*3,0,69*3,64*3,0,68*3,63*3,0,66*3,65*3,0,81*3,87*3,0,91*3,80*3,0,82*3,79*3,0,83*3,86*3,0,93*3,92*3,0,84*3,85*3,0,90*3,94*3,0,88*3,89*3,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,105*3,107*3,0,111*3,114*3,0,104*3,97*3,0,125*3,119*3,0,96*3,98*3,0,-1,123*3,0,95*3,101*3,0,106*3,121*3,0,99*3,102*3,0,113*3,103*3,0,112*3,116*3,0,110*3,100*3,0,124*3,115*3,0,117*3,122*3,0,109*3,118*3,0,120*3,108*3,0,127*3,136*3,0,139*3,140*3,0,130*3,126*3,0,145*3,146*3,0,128*3,129*3,0,0,0,2050,132*3,134*3,0,155*3,154*3,0,0,0,8,137*3,133*3,0,143*3,144*3,0,151*3,138*3,0,142*3,141*3,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,148*3,152*3,0,0,0,1027,153*3,150*3,0,0,0,261,131*3,135*3,0,0,0,516,149*3,147*3,0,172*3,173*3,0,162*3,158*3,0,170*3,161*3,0,168*3,166*3,0,157*3,179*3,0,169*3,167*3,0,174*3,171*3,0,178*3,177*3,0,156*3,159*3,0,164*3,165*3,0,183*3,182*3,0,175*3,176*3,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,180*3,181*3,0,160*3,163*3,0,196*3,199*3,0,0,0,27,203*3,185*3,0,202*3,201*3,0,0,0,19,0,0,22,197*3,207*3,0,0,0,18,191*3,192*3,0,188*3,190*3,0,0,0,20,184*3,194*3,0,0,0,21,186*3,193*3,0,0,0,23,204*3,198*3,0,0,0,25,0,0,24,200*3,205*3,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,189*3,206*3,0,187*3,195*3,0,218*3,211*3,0,0,0,37,215*3,216*3,0,0,0,36,210*3,212*3,0,0,0,34,213*3,209*3,0,221*3,222*3,0,219*3,208*3,0,217*3,214*3,0,223*3,220*3,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),h=1,a=2,k=3,s=179,w=1,b=175,r=0,c=181,x=178,i=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),A=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),p=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n");var t=[null,j,d,m];var y=function(G){this.bytes=new Uint8Array(G);this.length=this.bytes.length;this.writePos=this.bytes.length;this.index=0};y.NOT_FOUND=-1;y.prototype.findNextMPEGStartCode=function(){for(var G=(this.index+7>>3);G<this.writePos;G++){if(this.bytes[G]===0&&this.bytes[G+1]===0&&this.bytes[G+2]===1){this.index=(G+4)<<3;return this.bytes[G+3]}}this.index=(this.writePos<<3);return y.NOT_FOUND};y.prototype.nextBytesAreStartCode=function(){var G=(this.index+7>>3);return(G>=this.writePos||(this.bytes[G]===0&&this.bytes[G+1]===0&&this.bytes[G+2]===1))};y.prototype.nextBits=function(J){var I=this.index>>3,L=(8-this.index%8);if(L>=J){return(this.bytes[I]>>(L-J))&(255>>(8-J))}var H=(this.index+J)%8,G=(this.index+J-1)>>3,K=this.bytes[I]&(255>>(8-L));for(I++;I<G;I++){K<<=8;K|=this.bytes[I]}if(H>0){K<<=H;K|=(this.bytes[I]>>(8-H))}else{K<<=8;K|=this.bytes[I]}return K};y.prototype.getBits=function(G){var H=this.nextBits(G);this.index+=G;return H};y.prototype.advance=function(G){return(this.index+=G)};y.prototype.rewind=function(G){return(this.index-=G)}})(window);
