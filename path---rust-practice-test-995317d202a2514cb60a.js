webpackJsonp([58501103903283],{1407:function(n,a){n.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlUlEQVRIx11WaWxU1xWewbQlrdofkSIhGiBpMPZ4Vs/2lpm3zupZPOOZ8Sz2YGzANkaAKaYQUrMkLYgiIlxCQjCYQAwYEoMQNJAIFBxaQgUhoCopYceBJo1pKFVDCbOc0/fesOZKV+fM1Tvf/c56R0VYOZW8lvAxtSybvbExAu1+mndGuaDQ2F4rNHVFhCZJZlMeZ1Qrf9Mt+H+qur/ihFORAFA64J0pVTcXVcDmcKFfruIzZ7rY1H89fAZivjbM1MzFxkAnZqWd9M7KJcTmv7zCN44sY+tflm12C79WLxLCqidWN9cwWpYvsfXL13vasZudgm4mgX4hW6h1teRjnrZCwjOzWO/twIR/FjZ7WnEZ35JvcUSeU4gwSXV7W1sJzEH6R8nSRArlXjr6r7S1DqNUvMAzCXCzSfDxDRAUmyDkaoawtEPi1LxHyGLMkby5gEqUy7atjnq1roosAXqE6Yq7DBXa7RLS6HRG8y4hhbwzDiJbj4IkXUwS5e1h07IOorMePUL6ruiKGmRblg2PesJlq9nxrJMMfydIbhIWP9jMPrBLkrIHgXfG0CdmgKMjwFARFKVvHEQo5xUyKDDRN2T7aE17mV5rfZQYm1lM0EQYWUe0aNTxoKl0Qnk5jVqNA/VaFu3SBS7SB7Ju0ougr2KKWg2DBi17mbCaxyghMzgeMTTp2W7CGkTKHshZqn0Q5Osg6opBhAmAzcADY/NheyQJBi2D8mXVehYMOgEsJg9aTIxSN2YTO+ohQ62G6rGZa5AmAjmj0YvzG5vhVP8f4fTO12FtVxfMjTfC6zPbwOsIQNybhK6GlmLCm5DA6cu2aoeSaaOeVheLxRKgpoJcZ5UAly94MeeiQ+jnQtBCcTBTZ8Ght9fDfy58DDdOHIRj2zdA/4uzYWBpZ6Fr6jR8/lfWP8n2usqA2mQgH7msr3Ks0WgEfGvN6lz/q6tgXqgZjgpZOGSLwsldA4CFG4j3rmP/osU47xkdrm5pLfjdETm+p64cf0fJME34HiVFV+VYajF50UGGc/Nnz4XDfW/ArQ09+M++XsCblwD+fQEL356HswuWwdedS+Dg2p5ilZQwa7VrpCHZ9nOl7Ojg44B0hxxg0hbMjx2rh2iwDk4feReKI58hfn8V8c5lwNyXiF+dRbz4Z1jY1g4TJ1rQbnHfc/ORihJDr5q0kw8AyVqDjpeSEpJLAyaMN6HRwMDuTa/B1fcPwcfbBuHc8SPw+cnDsGvzeim7HOg0DpAYoouPBWUMJxUo65y18X4MtbYJOo3zjgQoxwWen1iNDdPmwPu9+2BvfCXsXbQRehf9Hly0B8aN04OuioGqCipvt/hQ5GLzS4Dh0Tdv3+/nvm0qVVUlfUouboOWK8jxmaznMBXIwpbfroWN63th384tcHTfDpj0gg21lQxoK+m8TQGMb5UxAt6OUYSVkUuGK5MPKiuIHicZwWqDmNNqpE6pIFBjpGDxsqXwuxUroWtBN5w4NgSbNvcDIRW61CUFu9UrtV/si7Fjf/ajUmICSvxKgJMtdQxVK2XOU9RpGNBL3VBeQWIqPR3SjR3QOW8xrFmxCnrWbYJMaobEkr1HE/4zIpv4nrK7NIrbpF+tspoYZdpMLte+wNPRu6S1Bs1GqV/1DOqMPFjIMFbq3dg6cyFkGmagqZqHaoOAHF2XZ6ngWg+XBM4RVoLHOWrLVG4uWpo4FvsvfHz6NktFkbT6QafnQGsUoFLHYm1dFj44cgwYPgQVkymkbP6RWl+LNIRjL/uFhltuNjEoYySCXaNUojOsMPSw4aqwa+o9ga5DggiC1RFDmyMG1bYQVlTSIIhRMJq9RaPZJ4VF+DQZ6MCAmOkLurJ/DYiNt/R67VMKs4hrqjL+o+6mjrj0hjBEOG+1h8FOxcFO1oHVFgazPYQGqdfNthBYpUqwEME78nsT4tP7o96WwWSwA1nKb35iyCZ8M85EXE3oYBO3ab4RKWcSKCaFJJMCQprSpPQcUFwKzWQUKo1+lC9x0r7Fcc+0OVOj8zEkNrY8BAuLDV11ruZvDXrhuJ3NIu+bAYK/FXjfdOA8zegUp6DdmQKNMQD+8HTseW1LYeijE/jB4Q+/Wry8a5L01B6MeaetUcDSjfVjjOVM7da+bTMPvHfkbmrKb5DksjkLncmZqXTe6siAnWmAmkhbYUPvQP7cufO5L69fxyvD/8Ctb+/aI2PU8AmvRGqZAoiIityzb8/T165d3X3t2vD/Pjr+KW7b+R6u2/AOrli9CQfePYQXLg3jpSvDeOLkWTxw6Oh3uwYPrJTMlNHlFcLPeNk6/UOXZ7cuGP1A397fP/7v584vvzJ8o+dvn33+Zm/v9q9X/2EDbN+19+ybm3ds33/ww5f63uovf/D9woVL1A90P5dQqYaGhpQfg4N71BJbteoHqyk7Z+e8zlfuSupPHj+/eO2bso5ZcxQ9Fsiqgny6ZOv3+VTfjIwo+iefnFYN7BxQf3FxuEwGH1c+fgxBuIZnTFuIIh9U2qt3844fb9y0Vf0gXPKm7bzKzYZ+wGTKFFWNz1/6v8OLUiuaFKMJz00yEvaa/RQZnK086s6MutpEqRLx+kcT+rH1f+YikeeNfqnwAAAAAElFTkSuQmCC",aspectRatio:.6666666666666666,src:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-25c91.png",srcSet:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-8a97b.png 200w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-0fdf3.png 400w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-25c91.png 600w",srcWebp:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-216f6.webp",srcSetWebp:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-5d70e.webp 200w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-d1677.webp 400w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<h1 id="背景知识"><a href="#%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>背景知识</h1>\n<p><a href="https://course.rs/about-book.html" target="_blank" rel="nofollow noreferrer noopener">Rust 语言圣经</a></p>\n<h1 id="变量绑定与解构"><a href="#%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>变量绑定与解构</h1>\n<h2 id="问题一"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h2>\n<p>变量只有在初始化后才能被使用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22691665573774400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并尽可能少的修改\nfn main() {\n    let x: i32; // 未初始化，但被使用\n    let y: i32; // 未初始化，也未被使用\n    println!(&quot;x is equal to {}&quot;, x);\n}`, `22691665573774400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并尽可能少的修改</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">;</span> <span class="token comment">// 未初始化，但被使用</span>\n    <span class="token keyword">let</span> y<span class="token punctuation">:</span> i32<span class="token punctuation">;</span> <span class="token comment">// 未初始化，也未被使用</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x is equal to {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27018205584528940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并尽可能少的修改\nfn main() {\n    let x: i32 = 0; // 未初始化，但被使用\n    let _y: i32; // 未初始化，也未被使用\n    println!(&quot;x is equal to {}&quot;, x);\n}`, `27018205584528940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并尽可能少的修改</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 未初始化，但被使用</span>\n    <span class="token keyword">let</span> _y<span class="token punctuation">:</span> i32<span class="token punctuation">;</span> <span class="token comment">// 未初始化，也未被使用</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x is equal to {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题二"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h2>\n<p>可以使用 mut 将变量标记为可变</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70585080220451890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 完形填空，让代码编译\nfn main() {\n    let __ =  1;\n    __ += 2;\n\n    println!(&quot;x = {}&quot;, x);\n}`, `70585080220451890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 完形填空，让代码编译</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> __ <span class="token operator">=</span>  <span class="token number">1</span><span class="token punctuation">;</span>\n    __ <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x = {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-1"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30509634357525074000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 完形填空，让代码编译\nfn main() {\n    let mut x = 1;\n    x += 2;\n\n    println!(&quot;x = {}&quot;, x);\n}`, `30509634357525074000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 完形填空，让代码编译</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x = {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题三"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h2>\n<p>作用域是一个变量在程序中能够保持合法的范围</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1806168973999078400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并使用尽可能少的改变\nfn main() {\n    let x: i32 = 10;\n    {\n        let y: i32 = 5;\n        println!(&quot;x 的值是 {}, y 的值是 {}&quot;, x, y);\n    }\n    println!(&quot;x 的值是 {}, y 的值是 {}&quot;, x, y);\n}`, `1806168973999078400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并使用尽可能少的改变</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> y<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x 的值是 {}, y 的值是 {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x 的值是 {}, y 的值是 {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-2"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5623180578429188000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并使用尽可能少的改变\nfn main() {\n    let x: i32 = 10;\n    let y: i32 = 5;\n    {\n        println!(&quot;x 的值是 {}, y 的值是 {}&quot;, x, y);\n    }\n    println!(&quot;x 的值是 {}, y 的值是 {}&quot;, x, y);\n}`, `5623180578429188000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并使用尽可能少的改变</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x 的值是 {}, y 的值是 {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x 的值是 {}, y 的值是 {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="最佳解答"><a href="#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27302201227498380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x: i32 = 10;\n    {\n        let y: i32 = 5;\n        println!(&quot;The value of x is {} and value of y is {}&quot;, x, y);\n    }\n    println!(&quot;The value of x is {}&quot;, x);\n}`, `27302201227498380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> y<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"The value of x is {} and value of y is {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"The value of x is {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题四"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94081196252874280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    println!(&quot;{}, world&quot;, x);\n}\n\nfn define_x() {\n    let x = &quot;hello&quot;;\n}`, `94081196252874280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, world"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">define_x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-3"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96557961259365100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let x = define_x();\n    println!(&quot;{}, world&quot;, x);\n}\n\nfn define_x() -> &\'static str {\n    let x = &quot;hello&quot;;\n    x\n}`, `96557961259365100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">define_x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, world"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">define_x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">\'static</span> str <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>\n    x\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="最佳解答-1"><a href="#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17836283077604920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = define_x();\n    println!(&quot;{}, world&quot;, x);\n}\n\nfn define_x() -> String {\n    let x = &quot;hello&quot;.to_string();\n    x\n}`, `17836283077604920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">define_x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, world"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">define_x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    x\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题五"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h2>\n<p>若后面的变量声明的名称和之前的变量相同，则我们说：第一个变量被第二个同名变量遮蔽了（shadowing）</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68047504986472825000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 只允许修改 \\`assert_eq!\\` 来让 \\`println!\\` 工作(在终端输出 \\`42\\`)\nfn main() {\n    let x: i32 = 5;\n    {\n        let x = 12;\n        assert_eq!(x, 5);\n    }\n\n    assert_eq!(x, 12);\n\n    let x = 42;\n    println!(&quot;{}&quot;, x); // 输出 &quot;42&quot;.\n}`, `68047504986472825000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 只允许修改 `assert_eq!` 来让 `println!` 工作(在终端输出 `42`)</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>\n        <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 "42".</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-4"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65592612632394110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 只允许修改 \\`assert_eq!\\` 来让 \\`println!\\` 工作(在终端输出 \\`42\\`)\nfn main() {\n    let x: i32 = 5;\n    {\n        let x = 12;\n        assert_eq!(x, 12);\n    }\n\n    assert_eq!(x, 5);\n\n    let x = 42;\n    println!(&quot;{}&quot;, x); // 输出 &quot;42&quot;.\n}`, `65592612632394110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 只允许修改 `assert_eq!` 来让 `println!` 工作(在终端输出 `42`)</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>\n        <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 "42".</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题六"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h2>\n<p>删除一行代码以通过编译</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82598314802448290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut x: i32 = 1;\n    x = 7;\n    // 遮蔽且再次绑定\n    let x = x;\n    x += 3;\n\n\n    let y = 4;\n    // 遮蔽\n    let y = &quot;I can also be bound to text!&quot;;\n}`, `82598314802448290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    x <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>\n    <span class="token comment">// 遮蔽且再次绑定</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> x<span class="token punctuation">;</span>\n    x <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n\n\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>\n    <span class="token comment">// 遮蔽</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token string">"I can also be bound to text!"</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-5"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11154780332142322000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut x: i32 = 1;\n    x = 7;\n    // 遮蔽且再次绑定\n    let x = x;\n\n    let y = 4;\n    // 遮蔽\n    let y = &quot;I can also be bound to text!&quot;;\n}`, `11154780332142322000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    x <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>\n    <span class="token comment">// 遮蔽且再次绑定</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> x<span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>\n    <span class="token comment">// 遮蔽</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token string">"I can also be bound to text!"</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题七"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h2>\n<p>使用以下方法来修复编译器输出的 warning:</p>\n<ul>\n<li>一种方法</li>\n<li>两种方法</li>\n</ul>\n<blockquote>\n<p>注意: 你可以使用两种方法解决，但是它们没有一种是移除 <code class="language-text">let x = 1</code> 所在的代码行</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87680573937614730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = 1;\n}\n\n// compiler warning: unused variable: \\`x\\``, `87680573937614730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// compiler warning: unused variable: `x`</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-6"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33074738952991445000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let _x = 1;\n}\n\n// compiler warning: unused variable: \\`x\\``, `33074738952991445000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// compiler warning: unused variable: `x`</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98225801856873860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[allow(unused_variables)]\nfn main() {\n    let x = 1;\n}\n\n// compiler warning: unused variable: \\`x\\``, `98225801856873860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[allow(unused_variables)]</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// compiler warning: unused variable: `x`</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题八"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h2>\n<p>我们可以将 let 跟一个模式一起使用来解构一个元组，最终将它解构为多个独立的变量</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57670341782942880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并尽可能少的修改\nfn main() {\n    let (x, y) = (1, 2);\n    x += 2;\n\n    assert_eq!(x, 3);\n    assert_eq!(y, 2);\n}`, `57670341782942880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并尽可能少的修改</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-7"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47923968804064890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并尽可能少的修改\nfn main() {\n    let (mut x, y) = (1, 2);\n    x += 2;\n\n    assert_eq!(x, 3);\n    assert_eq!(y, 2);\n}`, `47923968804064890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并尽可能少的修改</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token keyword">mut</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31640692375700640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复下面代码的错误并尽可能少的修改\nfn main() {\n    let (x, y) = (1, 2);\n    let x = 3;\n\n    assert_eq!(x, 3);\n    assert_eq!(y, 2);\n}`, `31640692375700640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复下面代码的错误并尽可能少的修改</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题九"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h2>\n<p>在赋值语句的左式中使用元组、切片或结构体进行匹配赋值。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90652904601956830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let (x, y);\n    (x, ..) = (3, 4);\n    [.., y] = [1, 2];\n    // 填空，让代码工作\n    assert_eq!([x, y], __);\n}`, `90652904601956830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">..</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// 填空，让代码工作</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">,</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-8"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1349631482064395000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let (x, y);\n    (x, ..) = (3, 4);\n    [.., y] = [1, 2];\n    // 填空，让代码工作\n    assert_eq!([x, y], [3, 2]);\n}`, `1349631482064395000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">..</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// 填空，让代码工作</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="基本类型"><a href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基本类型</h1>\n<h2 id="数值类型"><a href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数值类型</h2>\n<h3 id="问题一-1"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>如果我们没有显式的给予变量一个类型，那编译器会自动帮我们推导一个类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24392686663085937000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 移除某个部分让代码工作\nfn main() {\n    let x: i32 = 5;\n    let mut y: u32 = 5;\n\n    y = x;\n\n    let z = 10; // 这里 z 的类型是?\n}`, `24392686663085937000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 移除某个部分让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> y<span class="token punctuation">:</span> u32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n    y <span class="token operator">=</span> x<span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 这里 z 的类型是?</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-9"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94145140340418600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 移除某个部分让代码工作\nfn main() {\n    let x: i32 = 5;\n    let mut y: u32 = 5;\n\n    // y = x;\n\n    let z = 10; // 这里 z 的类型是?\n}`, `94145140340418600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 移除某个部分让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> y<span class="token punctuation">:</span> u32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// y = x;</span>\n\n    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 这里 z 的类型是?</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="最佳解答-2"><a href="#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43963876085740945000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x: i32 = 5;\n    let mut y = 5;\n\n    y = x;\n\n    let z = 10; // type of z : i32\n}`, `43963876085740945000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x<span class="token punctuation">:</span> i32 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n    y <span class="token operator">=</span> x<span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// type of z : i32</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-1"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66410406820074906000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let v: u16 = 38_u8 as __;\n}`, `66410406820074906000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v<span class="token punctuation">:</span> u16 <span class="token operator">=</span> <span class="token number">38_u8</span> <span class="token keyword">as</span> __<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-10"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39189462629436340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let v: u16 = 38_u8 as u16;\n}`, `39189462629436340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v<span class="token punctuation">:</span> u16 <span class="token operator">=</span> <span class="token number">38_u8</span> <span class="token keyword">as</span> u16<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-1"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3250431276300869000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//  修改 \\`assert_eq!\\` 让代码工作\nfn main() {\n    let x = 5;\n    assert_eq!(&quot;u32&quot;.to_string(), type_of(&x));\n}\n\n// 以下函数可以获取传入参数的类型，并返回类型的字符串形式，例如  &quot;i8&quot;, &quot;u8&quot;, &quot;i32&quot;, &quot;u32&quot;\nfn type_of<T>(_: &T) -> String {\n    format!(&quot;{}&quot;, std::any::type_name::<T>())\n}`, `3250431276300869000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">//  修改 `assert_eq!` 让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token string">"u32"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">type_of</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 以下函数可以获取传入参数的类型，并返回类型的字符串形式，例如  "i8", "u8", "i32", "u32"</span>\n<span class="token keyword">fn</span> type_of<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>_<span class="token punctuation">:</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> std<span class="token punctuation">::</span>any<span class="token punctuation">::</span>type_name<span class="token punctuation">::</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-11"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89370974906885460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//  修改 \\`assert_eq!\\` 让代码工作\nfn main() {\n    let x = 5;\n    assert_eq!(&quot;i32&quot;.to_string(), type_of(&x));\n}\n\n// 以下函数可以获取传入参数的类型，并返回类型的字符串形式，例如  &quot;i8&quot;, &quot;u8&quot;, &quot;i32&quot;, &quot;u32&quot;\nfn type_of<T>(_: &T) -> String {\n    format!(&quot;{}&quot;, std::any::type_name::<T>())\n}`, `89370974906885460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">//  修改 `assert_eq!` 让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token string">"i32"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">type_of</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 以下函数可以获取传入参数的类型，并返回类型的字符串形式，例如  "i8", "u8", "i32", "u32"</span>\n<span class="token keyword">fn</span> type_of<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>_<span class="token punctuation">:</span> <span class="token operator">&amp;</span>T<span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> std<span class="token punctuation">::</span>any<span class="token punctuation">::</span>type_name<span class="token punctuation">::</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-1"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97172558049556580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码工作\nfn main() {\n    assert_eq!(i8::MAX, __);\n    assert_eq!(u8::MAX, __);\n}`, `97172558049556580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>i8<span class="token punctuation">::</span>MAX<span class="token punctuation">,</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>u8<span class="token punctuation">::</span>MAX<span class="token punctuation">,</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-12"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12198770922227165000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码工作\nfn main() {\n    assert_eq!(i8::MAX, 127);\n    assert_eq!(u8::MAX, 255);\n}`, `12198770922227165000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>i8<span class="token punctuation">::</span>MAX<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>u8<span class="token punctuation">::</span>MAX<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-1"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41931601882292720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 解决代码中的错误和 \\`panic\\`\nfn main() {\n   let v1 = 251_u8 + 8;\n   let v2 = i8::checked_add(251, 8).unwrap();\n   println!(&quot;{},{}&quot;,v1,v2);\n}`, `41931601882292720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 解决代码中的错误和 `panic`</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">let</span> v1 <span class="token operator">=</span> <span class="token number">251_u8</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>\n   <span class="token keyword">let</span> v2 <span class="token operator">=</span> i8<span class="token punctuation">::</span><span class="token function">checked_add</span><span class="token punctuation">(</span><span class="token number">251</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-13"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15660719954510660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 解决代码中的错误和 \\`panic\\`\nfn main() {\n    let v1 = 251_u16 + 8;\n    let v2 = i16::checked_add(251, 8).unwrap();\n    println!(&quot;{},{}&quot;, v1, v2);\n}`, `15660719954510660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 解决代码中的错误和 `panic`</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v1 <span class="token operator">=</span> <span class="token number">251_u16</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> v2 <span class="token operator">=</span> i16<span class="token punctuation">::</span><span class="token function">checked_add</span><span class="token punctuation">(</span><span class="token number">251</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="最佳解答-3"><a href="#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25623493214831526000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let v1 = 247_u8 + 8;\n    let v2 = i8::checked_add(119, 8).unwrap();\n    println!(&quot;{},{}&quot;, v1, v2);\n}`, `25623493214831526000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v1 <span class="token operator">=</span> <span class="token number">247_u8</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> v2 <span class="token operator">=</span> i8<span class="token punctuation">::</span><span class="token function">checked_add</span><span class="token punctuation">(</span><span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-1"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40427126674627560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改 \\`assert!\\` 让代码工作\nfn main() {\n    let v = 1_024 + 0xff + 0o77 + 0b1111_1111;\n    assert!(v == 1579);\n}`, `40427126674627560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改 `assert!` 让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token number">1_024</span> <span class="token operator">+</span> <span class="token number">0xff</span> <span class="token operator">+</span> <span class="token number">0o77</span> <span class="token operator">+</span> <span class="token number">0b1111_1111</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>v <span class="token operator">==</span> <span class="token number">1579</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-14"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30567981435222660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改 \\`assert!\\` 让代码工作\nfn main() {\n    let v = 1_024 + 0xff + 0o77 + 0b1111_1111;\n    assert!(v == 1597);\n}`, `30567981435222660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改 `assert!` 让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token number">1_024</span> <span class="token operator">+</span> <span class="token number">0xff</span> <span class="token operator">+</span> <span class="token number">0o77</span> <span class="token operator">+</span> <span class="token number">0b1111_1111</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>v <span class="token operator">==</span> <span class="token number">1597</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-1"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62091168860738730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 将 ? 替换成你的答案\nfn main() {\n    let x = 1_000.000_1; // ?\n    let y: f32 = 0.12; // f32\n    let z = 0.01_f64; // f64\n}`, `62091168860738730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 将 ? 替换成你的答案</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1_000.000_1</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>\n    <span class="token keyword">let</span> y<span class="token punctuation">:</span> f32 <span class="token operator">=</span> <span class="token number">0.12</span><span class="token punctuation">;</span> <span class="token comment">// f32</span>\n    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">0.01_f64</span><span class="token punctuation">;</span> <span class="token comment">// f64</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-15"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57176342665933650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 将 ? 替换成你的答案\nfn main() {\n    let x = 1_000.000_1; // f64\n    let y: f32 = 0.12; // f32\n    let z = 0.01_f64; // f64\n}`, `57176342665933650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 将 ? 替换成你的答案</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1_000.000_1</span><span class="token punctuation">;</span> <span class="token comment">// f64</span>\n    <span class="token keyword">let</span> y<span class="token punctuation">:</span> f32 <span class="token operator">=</span> <span class="token number">0.12</span><span class="token punctuation">;</span> <span class="token comment">// f32</span>\n    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">0.01_f64</span><span class="token punctuation">;</span> <span class="token comment">// f64</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题八-1"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h3>\n<p>使用两种方法来让下面代码工作</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4023576369152004000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    assert!(0.1 + 0.2 == 0.3);\n}`, `4023576369152004000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">==</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-16"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72733947846570240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    assert!((0.1_f64 + 0.2 - 0.3).abs() < 0.00001);\n}`, `72733947846570240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.1_f64</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">-</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.00001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53681467293551570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    assert!(0.1_f32 + 0.2_f32 == 0.3_f32);\n}`, `53681467293551570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">0.1_f32</span> <span class="token operator">+</span> <span class="token number">0.2_f32</span> <span class="token operator">==</span> <span class="token number">0.3_f32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题九-1"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h3>\n<p>两个目标:</p>\n<ol>\n<li>修改 assert! 让它工作</li>\n<li>让 println! 输出: 97 - 122</li>\n</ol>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76592422385361010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut sum = 0;\n    for i in -3..2 {\n        sum += i\n    }\n\n    assert!(sum == -3);\n\n    for c in \'a\'..=\'z\' {\n        println!(&quot;{}&quot;, c);\n    }\n}`, `76592422385361010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">..</span><span class="token number">2</span> <span class="token punctuation">{</span>\n        sum <span class="token operator">+=</span> i\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>sum <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> c <span class="token keyword">in</span> <span class="token char string">\'a\'</span><span class="token punctuation">..=</span><span class="token char string">\'z\'</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-17"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-17" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26564776629797640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut sum = 0;\n    for i in -3..2 {\n        sum += i\n    }\n\n    assert!(sum == -5);\n\n    for c in \'a\'..=\'z\' {\n        println!(&quot;{}&quot;, c);\n    }\n}`, `26564776629797640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">..</span><span class="token number">2</span> <span class="token punctuation">{</span>\n        sum <span class="token operator">+=</span> i\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>sum <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> c <span class="token keyword">in</span> <span class="token char string">\'a\'</span><span class="token punctuation">..=</span><span class="token char string">\'z\'</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="最佳解答-4"><a href="#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2495699612590174000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut sum = 0;\n    for i in -3..2 {\n        sum += i\n    }\n\n    assert!(sum == -5);\n\n    for c in \'a\'..=\'z\' {\n        println!(&quot;{}&quot;, c as u8);\n    }\n}`, `2495699612590174000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">..</span><span class="token number">2</span> <span class="token punctuation">{</span>\n        sum <span class="token operator">+=</span> i\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>sum <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> c <span class="token keyword">in</span> <span class="token char string">\'a\'</span><span class="token punctuation">..=</span><span class="token char string">\'z\'</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c <span class="token keyword">as</span> u8<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73569666707945760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nuse std::ops::{Range, RangeInclusive};\nfn main() {\n    assert_eq!((1..__), Range{ start: 1, end: 5 });\n    assert_eq!((1..__), RangeInclusive::new(1, 5));\n}`, `73569666707945760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">use</span> std<span class="token punctuation">::</span>ops<span class="token punctuation">::</span><span class="token punctuation">{</span>Range<span class="token punctuation">,</span> RangeInclusive<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span>__<span class="token punctuation">)</span><span class="token punctuation">,</span> Range<span class="token punctuation">{</span> start<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span>__<span class="token punctuation">)</span><span class="token punctuation">,</span> RangeInclusive<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-18"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-18" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74368261851407350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nuse std::ops::{Range, RangeInclusive};\nfn main() {\n    assert_eq!((1..5), Range { start: 1, end: 5 });\n    assert_eq!((1..=5), RangeInclusive::new(1, 5));\n}`, `74368261851407350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">use</span> std<span class="token punctuation">::</span>ops<span class="token punctuation">::</span><span class="token punctuation">{</span>Range<span class="token punctuation">,</span> RangeInclusive<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Range <span class="token punctuation">{</span> start<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> RangeInclusive<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十一"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19817302272820548000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，并解决错误\nfn main() {\n    // 整数加法\n    assert!(1u32 + 2 == __);\n\n    // 整数减法\n    assert!(1i32 - 2 == __);\n    assert!(1u8 - 2 == -1);\n\n    assert!(3 * 50 == __);\n\n    assert!(9.6 / 3.2 == 3.0); // error ! 修改它让代码工作\n\n    assert!(24 % 5 == __);\n\n    // 逻辑与或非操作\n    assert!(true && false == __);\n    assert!(true || false == __);\n    assert!(!true == __);\n\n    // 位操作\n    println!(&quot;0011 AND 0101 is {:04b}&quot;, 0b0011u32 & 0b0101);\n    println!(&quot;0011 OR 0101 is {:04b}&quot;, 0b0011u32 | 0b0101);\n    println!(&quot;0011 XOR 0101 is {:04b}&quot;, 0b0011u32 ^ 0b0101);\n    println!(&quot;1 << 5 is {}&quot;, 1u32 << 5);\n    println!(&quot;0x80 >> 2 is 0x{:x}&quot;, 0x80u32 >> 2);\n}`, `19817302272820548000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，并解决错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 整数加法</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">1u32</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 整数减法</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">1i32</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">1u8</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">9.6</span> <span class="token operator">/</span> <span class="token number">3.2</span> <span class="token operator">==</span> <span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error ! 修改它让代码工作</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 逻辑与或非操作</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token keyword">true</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">false</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token keyword">true</span> <span class="token operator">||</span> <span class="token keyword">false</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">true</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 位操作</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0011 AND 0101 is {:04b}"</span><span class="token punctuation">,</span> <span class="token number">0b0011u32</span> <span class="token operator">&amp;</span> <span class="token number">0b0101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0011 OR 0101 is {:04b}"</span><span class="token punctuation">,</span> <span class="token number">0b0011u32</span> <span class="token operator">|</span> <span class="token number">0b0101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0011 XOR 0101 is {:04b}"</span><span class="token punctuation">,</span> <span class="token number">0b0011u32</span> <span class="token operator">^</span> <span class="token number">0b0101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"1 &lt;&lt; 5 is {}"</span><span class="token punctuation">,</span> <span class="token number">1u32</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0x80 >> 2 is 0x{:x}"</span><span class="token punctuation">,</span> <span class="token number">0x80u32</span> <span class="token operator">>></span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-19"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-19" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65901586463192154000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，并解决错误\nfn main() {\n    // 整数加法\n    assert!(1u32 + 2 == 3);\n\n    // 整数减法\n    assert!(1i32 - 2 == -1);\n    assert!(1i8 - 2 == -1);\n\n    assert!(3 * 50 == 150);\n\n    assert!(9.6_f32 / 3.2_f32 == 3.0_f32); // error ! 修改它让代码工作\n\n    assert!(24 % 5 == 4);\n\n    // 逻辑与或非操作\n    assert!(true && false == false);\n    assert!(true || false == true);\n    assert!(!true == false);\n\n    // 位操作\n    println!(&quot;0011 AND 0101 is {:04b}&quot;, 0b0011u32 & 0b0101);\n    println!(&quot;0011 OR 0101 is {:04b}&quot;, 0b0011u32 | 0b0101);\n    println!(&quot;0011 XOR 0101 is {:04b}&quot;, 0b0011u32 ^ 0b0101);\n    println!(&quot;1 << 5 is {}&quot;, 1u32 << 5);\n    println!(&quot;0x80 >> 2 is 0x{:x}&quot;, 0x80u32 >> 2);\n}`, `65901586463192154000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，并解决错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 整数加法</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">1u32</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 整数减法</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">1i32</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">1i8</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">==</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">9.6_f32</span> <span class="token operator">/</span> <span class="token number">3.2_f32</span> <span class="token operator">==</span> <span class="token number">3.0_f32</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error ! 修改它让代码工作</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token number">24</span> <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 逻辑与或非操作</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token keyword">true</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">false</span> <span class="token operator">==</span> <span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token keyword">true</span> <span class="token operator">||</span> <span class="token keyword">false</span> <span class="token operator">==</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">true</span> <span class="token operator">==</span> <span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 位操作</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0011 AND 0101 is {:04b}"</span><span class="token punctuation">,</span> <span class="token number">0b0011u32</span> <span class="token operator">&amp;</span> <span class="token number">0b0101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0011 OR 0101 is {:04b}"</span><span class="token punctuation">,</span> <span class="token number">0b0011u32</span> <span class="token operator">|</span> <span class="token number">0b0101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0011 XOR 0101 is {:04b}"</span><span class="token punctuation">,</span> <span class="token number">0b0011u32</span> <span class="token operator">^</span> <span class="token number">0b0101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"1 &lt;&lt; 5 is {}"</span><span class="token punctuation">,</span> <span class="token number">1u32</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"0x80 >> 2 is 0x{:x}"</span><span class="token punctuation">,</span> <span class="token number">0x80u32</span> <span class="token operator">>></span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="字符、布尔、单元类型"><a href="#%E5%AD%97%E7%AC%A6%E3%80%81%E5%B8%83%E5%B0%94%E3%80%81%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符、布尔、单元类型</h2>\n<h3 id="问题一-2"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14278801345821712000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//  修改 2 处 \\`assert_eq!\\` 让代码工作\n\nuse std::mem::size_of_val;\nfn main() {\n    let c1 = \'a\';\n    assert_eq!(size_of_val(&c1), 1);\n\n    let c2 = \'中\';\n    assert_eq!(size_of_val(&c2), 3);\n\n    println!(&quot;Success!&quot;)\n}`, `14278801345821712000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">//  修改 2 处 `assert_eq!` 让代码工作</span>\n\n<span class="token keyword">use</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of_val<span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token char string">\'a\'</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> c2 <span class="token operator">=</span> <span class="token char string">\'中\'</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-20"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-20" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19612177498407444000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改 2 处 \\`assert_eq!\\` 让代码工作\n\nuse std::mem::size_of_val;\nfn main() {\n    let c1 = \'a\';\n    assert_eq!(size_of_val(&c1), 4);\n\n    let c2 = \'中\';\n    assert_eq!(size_of_val(&c2), 4);\n\n    println!(&quot;Success!&quot;)\n}`, `19612177498407444000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改 2 处 `assert_eq!` 让代码工作</span>\n\n<span class="token keyword">use</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of_val<span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token char string">\'a\'</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> c2 <span class="token operator">=</span> <span class="token char string">\'中\'</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-2"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10392011115649712000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改一行让代码正常打印\nfn main() {\n    let c1 = &quot;中&quot;;\n    print_char(c1);\n}\n\nfn print_char(c : char) {\n    println!(&quot;{}&quot;, c);\n}`, `10392011115649712000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改一行让代码正常打印</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token string">"中"</span><span class="token punctuation">;</span>\n    <span class="token function">print_char</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">print_char</span><span class="token punctuation">(</span>c <span class="token punctuation">:</span> char<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-21"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-21" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4922973100024919000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改一行让代码正常打印\nfn main() {\n    let c1 = \'中\';\n    print_char(c1);\n}\n\nfn print_char(c: char) {\n    println!(&quot;{}&quot;, c);\n}`, `4922973100024919000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改一行让代码正常打印</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token char string">\'中\'</span><span class="token punctuation">;</span>\n    <span class="token function">print_char</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">print_char</span><span class="token punctuation">(</span>c<span class="token punctuation">:</span> char<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-2"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37205488550194170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 使成功打印\nfn main() {\n    let _f: bool = false;\n\n    let t = true;\n    if !t {\n        println!(&quot;Success!&quot;)\n    }\n}`, `37205488550194170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 使成功打印</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _f<span class="token punctuation">:</span> bool <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token operator">!</span>t <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-22"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-22" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9775015213354955000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 使成功打印\nfn main() {\n    let _f: bool = false;\n\n    let t = true;\n    if t {\n        println!(&quot;Success!&quot;)\n    }\n}`, `9775015213354955000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 使成功打印</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _f<span class="token punctuation">:</span> bool <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> t <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-2"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44708922410222110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let f = true;\n    let t = true && false;\n    assert_eq!(t, f);\n\n    println!(&quot;Success!&quot;)\n}`, `44708922410222110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">true</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">false</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-23"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-23" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96069828720885140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let f = true;\n    let t = true && false;\n    assert_eq!(t, !f);\n\n    println!(&quot;Success!&quot;)\n}`, `96069828720885140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">true</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">false</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token operator">!</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-2"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24452629651351175000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 让代码工作，但不要修改 \\`implicitly_ret_unit\\` !\nfn main() {\n    let _v: () = ();\n\n    let v = (2, 3);\n    assert_eq!(v, implicitly_ret_unit());\n\n    println!(&quot;Success!&quot;)\n}\n\nfn implicitly_ret_unit() {\n    println!(&quot;I will return a ()&quot;)\n}\n\n// 不要使用下面的函数，它只用于演示！\nfn explicitly_ret_unit() -> () {\n    println!(&quot;I will return a ()&quot;)\n}`, `24452629651351175000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 让代码工作，但不要修改 `implicitly_ret_unit` !</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _v<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token function">implicitly_ret_unit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">implicitly_ret_unit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"I will return a ()"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 不要使用下面的函数，它只用于演示！</span>\n<span class="token keyword">fn</span> <span class="token function">explicitly_ret_unit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"I will return a ()"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-24"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-24" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64199037797789510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 让代码工作，但不要修改 \\`implicitly_ret_unit\\` !\nfn main() {\n    let _v: () = ();\n\n    let v = ();\n    assert_eq!(v, implicitly_ret_unit());\n\n    println!(&quot;Success!&quot;)\n}\n\nfn implicitly_ret_unit() {\n    println!(&quot;I will return a ()&quot;)\n}\n\n// 不要使用下面的函数，它只用于演示！\nfn explicitly_ret_unit() -> () {\n    println!(&quot;I will return a ()&quot;)\n}`, `64199037797789510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 让代码工作，但不要修改 `implicitly_ret_unit` !</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _v<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token function">implicitly_ret_unit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">implicitly_ret_unit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"I will return a ()"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 不要使用下面的函数，它只用于演示！</span>\n<span class="token keyword">fn</span> <span class="token function">explicitly_ret_unit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"I will return a ()"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-2"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>单元类型占用的内存大小是多少？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35867452293142475000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 让代码工作：修改 \\`assert!\\` 中的 \\`4\\`\nuse std::mem::size_of_val;\nfn main() {\n    let unit: () = ();\n    assert!(size_of_val(&unit) == 4);\n\n    println!(&quot;Success!&quot;)\n}`, `35867452293142475000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 让代码工作：修改 `assert!` 中的 `4`</span>\n<span class="token keyword">use</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of_val<span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> unit<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>unit<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-25"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-25" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47858097826575640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 让代码工作：修改 \\`assert!\\` 中的 \\`4\\`\nuse std::mem::size_of_val;\nfn main() {\n    let unit: () = ();\n    assert!(size_of_val(&unit) == 0);\n\n    println!(&quot;Success!&quot;)\n}`, `47858097826575640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 让代码工作：修改 `assert!` 中的 `4`</span>\n<span class="token keyword">use</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of_val<span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> unit<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>unit<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="语句与表达式"><a href="#%E8%AF%AD%E5%8F%A5%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>语句与表达式</h2>\n<h3 id="问题一-3"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57587474895066700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 使用两种方法让代码工作起来\nfn main() {\n    let v = {\n        let mut x = 1;\n        x += 2\n    };\n\n    assert_eq!(v, 3);\n}`, `57587474895066700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 使用两种方法让代码工作起来</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> <span class="token keyword">mut</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        x <span class="token operator">+=</span> <span class="token number">2</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-26"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-26" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11228895729198385000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let v = {\n        let mut x = 1;\n        x += 2\n    };\n\n    assert_eq!(v, ());\n}`, `11228895729198385000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> <span class="token keyword">mut</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        x <span class="token operator">+=</span> <span class="token number">2</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9476238050113150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let v = {\n        let mut x = 1;\n        x += 2;\n        x\n    };\n\n    assert_eq!(v, 3);\n}`, `9476238050113150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> <span class="token keyword">mut</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        x\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-3"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22021982175931720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let v = (let x = 3);\n\n    assert!(v == 3);\n}`, `22021982175931720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>v <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-27"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-27" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44255677497751170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let v = {\n        let x = 3;\n        x\n    };\n\n    assert!(v == 3);\n}`, `44255677497751170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">{</span>\n        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n        x\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>v <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-3"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94798018198746510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = sum(1, 2);\n    assert_eq!(s, 3);\n}\n\nfn sum(x: i32, y: i32) -> i32 {\n    x + y;\n}`, `94798018198746510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span>\n    x <span class="token operator">+</span> y<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-28"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-28" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31849864756305002000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = sum(1, 2);\n    assert_eq!(s, 3);\n}\n\nfn sum(x: i32, y: i32) -> i32 {\n    x + y\n}`, `31849864756305002000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span>\n    x <span class="token operator">+</span> y\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="函数"><a href="#%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>函数</h2>\n<h3 id="问题一-4"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87924891837371090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 不要修改下面两行代码!\n    let (x, y) = (1, 2);\n    let s = sum(x, y);\n\n    assert_eq!(s, 3);\n}\n\nfn sum(x, y: i32) {\n    x + y;\n}`, `87924891837371090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 不要修改下面两行代码!</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    x <span class="token operator">+</span> y<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-29"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-29" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63545643634757320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let (x, y) = (1, 2);\n    let s = sum(x, y);\n\n    assert_eq!(s, 3);\n}\n\nfn sum(x: i32, y: i32) -> i32 {\n    x + y\n}`, `63545643634757320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span>\n    x <span class="token operator">+</span> y\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-4"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1045677048228244100"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    print();\n}\n\n// 使用另一个类型来替代 i32\nfn print() -> i32 {\n    println!(&quot;hello,world&quot;);\n}`, `1045677048228244100`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 使用另一个类型来替代 i32</span>\n<span class="token keyword">fn</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"hello,world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-30"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-30" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59865257627229030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    print();\n}\n\nfn print() -> () {\n    println!(&quot;hello,world&quot;);\n}`, `59865257627229030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"hello,world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-4"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26813360496460304000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 用两种方法求解\nfn main() {\n    never_return();\n}\n\nfn never_return() -> ! {\n    // 实现这个函数，不要修改函数签名!\n}`, `26813360496460304000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 用两种方法求解</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">never_return</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">never_return</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 实现这个函数，不要修改函数签名!</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-31"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-31" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29575990122543837000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    never_return();\n}\n\nfn never_return() -> ! {\n    loop {}\n}`, `29575990122543837000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">never_return</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">never_return</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span>\n    <span class="token keyword">loop</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28843799080599642000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    never_return();\n}\n\nfn never_return() -> ! {\n    panic!(&quot;error&quot;)\n}`, `28843799080599642000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">never_return</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">never_return</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span>\n    <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-3"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>发散函数(Diverging function)不会返回任何值，因此它们可以用于替代需要返回任何值的地方</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98673927835257900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    println!(&quot;Success!&quot;);\n}\n\nfn get_option(tp: u8) -> Option<i32> {\n    match tp {\n        1 => {\n        }\n        _ => {\n        }\n    };\n\n    // 这里与其返回一个 None，不如使用发散函数替代\n    never_return_fn()\n}\n\n// 使用三种方法实现以下发散函数\nfn never_return_fn() -> ! {}`, `98673927835257900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">get_option</span><span class="token punctuation">(</span>tp<span class="token punctuation">:</span> u8<span class="token punctuation">)</span> <span class="token punctuation">-></span> Option<span class="token operator">&lt;</span>i32<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> tp <span class="token punctuation">{</span>\n        <span class="token number">1</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token punctuation">}</span>\n        _ <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 这里与其返回一个 None，不如使用发散函数替代</span>\n    <span class="token function">never_return_fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 使用三种方法实现以下发散函数</span>\n<span class="token keyword">fn</span> <span class="token function">never_return_fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-32"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-32" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82868205036830130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn never_return_fn() -> ! {\n    panic!()\n}`, `82868205036830130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">never_return_fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span>\n    <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9949108900564330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn never_return_fn() -> ! {\n    todo!();\n}`, `9949108900564330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">never_return_fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span>\n    <span class="token function">todo!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69327645263299710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn never_return_fn() -> ! {\n    loop {\n        std::thread::sleep(std::time::Duration::from_secs(1))\n    }\n}`, `69327645263299710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">never_return_fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">!</span> <span class="token punctuation">{</span>\n    <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        std<span class="token punctuation">::</span>thread<span class="token punctuation">::</span><span class="token function">sleep</span><span class="token punctuation">(</span>std<span class="token punctuation">::</span>time<span class="token punctuation">::</span>Duration<span class="token punctuation">::</span><span class="token function">from_secs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-3"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24097679544413598000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 填空\n    let b = __;\n\n    let _v = match b {\n        true => 1,\n        // 发散函数也可以用于 \\`match\\` 表达式，用于替代任何类型的值\n        false => {\n            println!(&quot;Success!&quot;);\n            panic!(&quot;we have no value for \\`false\\`, but we can panic&quot;)\n        }\n    };\n\n    println!(&quot;Exercise Failed if printing out this line!&quot;);\n}`, `24097679544413598000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 填空</span>\n    <span class="token keyword">let</span> b <span class="token operator">=</span> __<span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> _v <span class="token operator">=</span> <span class="token keyword">match</span> b <span class="token punctuation">{</span>\n        <span class="token keyword">true</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">,</span>\n        <span class="token comment">// 发散函数也可以用于 `match` 表达式，用于替代任何类型的值</span>\n        <span class="token keyword">false</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"we have no value for `false`, but we can panic"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Exercise Failed if printing out this line!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-33"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-33" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24526784648630608000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let b = false;\n\n    let _v = match b {\n        true => 1,\n        // 发散函数也可以用于 \\`match\\` 表达式，用于替代任何类型的值\n        false => {\n            println!(&quot;Success!&quot;);\n            panic!(&quot;we have no value for \\`false\\`, but we can panic&quot;)\n        }\n    };\n\n    println!(&quot;Exercise Failed if printing out this line!&quot;);\n}`, `24526784648630608000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> _v <span class="token operator">=</span> <span class="token keyword">match</span> b <span class="token punctuation">{</span>\n        <span class="token keyword">true</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">,</span>\n        <span class="token comment">// 发散函数也可以用于 `match` 表达式，用于替代任何类型的值</span>\n        <span class="token keyword">false</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Success!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"we have no value for `false`, but we can panic"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Exercise Failed if printing out this line!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="所有权与借用"><a href="#%E6%89%80%E6%9C%89%E6%9D%83%E4%B8%8E%E5%80%9F%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>所有权与借用</h1>\n<h2 id="所有权"><a href="#%E6%89%80%E6%9C%89%E6%9D%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>所有权</h2>\n<h3 id="问题一-5"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99204349165844760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 使用尽可能多的方法来通过编译\n    let x = String::from(&quot;hello, world&quot;);\n    let y = x;\n    println!(&quot;{},{}&quot;, x, y);\n}`, `99204349165844760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 使用尽可能多的方法来通过编译</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-34"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-34" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68499995164210320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = String::from(&quot;hello, world&quot;);\n    let y = x.clone();\n    println!(&quot;{},{}&quot;, x, y);\n}`, `68499995164210320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3350083819187332600"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = String::from(&quot;hello, world&quot;);\n    let y = &x;\n    println!(&quot;{},{}&quot;, x, y);\n}`, `3350083819187332600`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52183782542958720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = &quot;hello, world&quot;;\n    let y = x;\n    println!(&quot;{},{}&quot;, x, y);\n}`, `52183782542958720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94017383188464750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = String::from(&quot;hello, world&quot;);\n    let y = x.as_str();\n    println!(&quot;{},{}&quot;, x, y);\n}`, `94017383188464750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">as_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{},{}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-5"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13428595988115522000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 不要修改 main 中的代码\nfn main() {\n    let s1 = String::from(&quot;hello, world&quot;);\n    let s2 = take_ownership(s1);\n\n    println!(&quot;{}&quot;, s2);\n}\n\n// 只能修改下面的代码!\nfn take_ownership(s: String) {\n    println!(&quot;{}&quot;, s);\n}`, `13428595988115522000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 不要修改 main 中的代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 只能修改下面的代码!</span>\n<span class="token keyword">fn</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-35"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-35" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1892753632205757000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s1 = String::from(&quot;hello, world&quot;);\n    let s2 = take_ownership(s1);\n\n    println!(&quot;{}&quot;, s2);\n}\n\nfn take_ownership(s: String) -> String {\n    println!(&quot;{}&quot;, s);\n    s\n}`, `1892753632205757000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">take_ownership</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-5"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88246357637539360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = give_ownership();\n    println!(&quot;{}&quot;, s);\n}\n\n// 只能修改下面的代码!\nfn give_ownership() -> String {\n    let s = String::from(&quot;hello, world&quot;);\n    // convert String to Vec\n    // 将 String 转换成 Vec 类型\n    let _s = s.into_bytes();\n    s\n}`, `88246357637539360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">give_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 只能修改下面的代码!</span>\n<span class="token keyword">fn</span> <span class="token function">give_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// convert String to Vec</span>\n    <span class="token comment">// 将 String 转换成 Vec 类型</span>\n    <span class="token keyword">let</span> _s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">into_bytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-36"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-36" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33215946501184400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = give_ownership();\n    println!(&quot;{}&quot;, s);\n}\n\nfn give_ownership() -> String {\n    let s = String::from(&quot;hello, world&quot;);\n    // convert String to Vec\n    // 将 String 转换成 Vec 类型\n    let _s = s.as_bytes();\n    s\n}`, `33215946501184400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">give_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">give_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// convert String to Vec</span>\n    <span class="token comment">// 将 String 转换成 Vec 类型</span>\n    <span class="token keyword">let</span> _s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">as_bytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71729615476485000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = give_ownership();\n    println!(&quot;{}&quot;, s);\n}\n\n// Only modify the code below!\nfn give_ownership() -> String {\n    let s = String::from(&quot;hello, world&quot;);\n    s\n}`, `71729615476485000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">give_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// Only modify the code below!</span>\n<span class="token keyword">fn</span> <span class="token function">give_ownership</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-4"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66602565727608210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，不要删除任何代码行\nfn main() {\n    let s = String::from(&quot;hello, world&quot;);\n\n    print_str(s);\n\n    println!(&quot;{}&quot;, s);\n}\n\nfn print_str(s: String)  {\n    println!(&quot;{}&quot;,s)\n}`, `66602565727608210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，不要删除任何代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">print_str</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">print_str</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span>  <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-37"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-37" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63301020151785780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello, world&quot;);\n\n    print_str(&s);\n\n    println!(&quot;{}&quot;, s);\n}\n\nfn print_str(s: &String) {\n    println!(&quot;{}&quot;, s)\n}`, `63301020151785780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">print_str</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">print_str</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77001690595425550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello, world&quot;);\n\n    print_str(s.clone());\n\n    println!(&quot;{}&quot;, s);\n}\n\nfn print_str(s: String)  {\n    println!(&quot;{}&quot;,s)\n}`, `77001690595425550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">print_str</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">print_str</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span>  <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-4"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53655453393832820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 不要使用 clone，使用 copy 的方式替代\nfn main() {\n    let x = (1, 2, (), &quot;hello&quot;.to_string());\n    let y = x.clone();\n    println!(&quot;{:?}, {:?}&quot;, x, y);\n}`, `53655453393832820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 不要使用 clone，使用 copy 的方式替代</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}, {:?}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-38"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-38" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79873358338304480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = (1, 2, (), &quot;hello&quot;);\n    let y = x;\n    println!(&quot;{:?}, {:?}&quot;, x, y);\n}`, `79873358338304480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}, {:?}"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-3"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>当所有权转移时，可变性也可以随之改变</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84598398462687380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello, &quot;);\n\n    // 只修改下面这行代码 !\n    let s1 = s;\n\n    s1.push_str(&quot;world&quot;)\n}`, `84598398462687380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 只修改下面这行代码 !</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> s<span class="token punctuation">;</span>\n\n    s1<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-39"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-39" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52862054108604140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello, &quot;);\n\n    let mut s1 = s;\n\n    s1.push_str(&quot;world&quot;)\n}`, `52862054108604140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s1 <span class="token operator">=</span> s<span class="token punctuation">;</span>\n\n    s1<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-2"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26441520015823540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = Box::new(5);\n\n    let ...      // 完成该行代码，不要修改其它行！\n\n    *y = 4;\n\n    assert_eq!(*x, 5);\n}`, `26441520015823540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> Box<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> <span class="token punctuation">...</span>      <span class="token comment">// 完成该行代码，不要修改其它行！</span>\n\n    <span class="token operator">*</span>y <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-40"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-40" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49441727884532560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = Box::new(5);\n\n    let mut y = Box::new(1);\n\n    *y = 4;\n\n    assert_eq!(*x, 5);\n}`, `49441727884532560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> Box<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> y <span class="token operator">=</span> Box<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token operator">*</span>y <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题八-2"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h3>\n<p>当解构一个变量时，可以同时使用 move 和引用模式绑定的方式。当这么做时，部分 move 就会发生：变量中一部分的所有权被转移给其它变量，而另一部分我们获取了它的引用。</p>\n<p>在这种情况下，原变量将无法再被使用，但是它没有转移所有权的那一部分依然可以使用，也就是之前被引用的那部分。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44151064957422270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n   let t = (String::from(&quot;hello&quot;), String::from(&quot;world&quot;));\n\n   let _s = t.0;\n\n   // 仅修改下面这行代码，且不要使用 \\`_s\\`\n   println!(&quot;{:?}&quot;, t);\n}`, `44151064957422270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n   <span class="token keyword">let</span> _s <span class="token operator">=</span> t<span class="token number">.0</span><span class="token punctuation">;</span>\n\n   <span class="token comment">// 仅修改下面这行代码，且不要使用 `_s`</span>\n   <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-41"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-41" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90192304577223250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let t = (String::from(&quot;hello&quot;), String::from(&quot;world&quot;));\n\n    let _s = t.0;\n\n    println!(&quot;{:?}&quot;, t.1);\n}`, `90192304577223250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> _s <span class="token operator">=</span> t<span class="token number">.0</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> t<span class="token number">.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题九-2"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67085624346225340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n   let t = (String::from(&quot;hello&quot;), String::from(&quot;world&quot;));\n\n   // 填空，不要修改其它代码\n   let (__, __) = __;\n\n   println!(&quot;{:?}, {:?}, {:?}&quot;, s1, s2, t); // -> &quot;hello&quot;, &quot;world&quot;, (&quot;hello&quot;, &quot;world&quot;)\n}`, `67085624346225340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n   <span class="token comment">// 填空，不要修改其它代码</span>\n   <span class="token keyword">let</span> <span class="token punctuation">(</span>__<span class="token punctuation">,</span> __<span class="token punctuation">)</span> <span class="token operator">=</span> __<span class="token punctuation">;</span>\n\n   <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}, {:?}, {:?}"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -> "hello", "world", ("hello", "world")</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-42"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-42" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36443107853135490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let t = (String::from(&quot;hello&quot;), String::from(&quot;world&quot;));\n\n    let (ref s1, ref s2) = t;\n\n    println!(&quot;{:?}, {:?}, {:?}&quot;, s1, s2, t); // -> &quot;hello&quot;, &quot;world&quot;, (&quot;hello&quot;, &quot;world&quot;)\n}`, `36443107853135490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token keyword">ref</span> s1<span class="token punctuation">,</span> <span class="token keyword">ref</span> s2<span class="token punctuation">)</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}, {:?}, {:?}"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -> "hello", "world", ("hello", "world")</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12774782322939960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let t = (String::from(&quot;hello&quot;), String::from(&quot;world&quot;));\n\n    let (ref s1, ref s2) = t.clone();\n\n    println!(&quot;{:?}, {:?}, {:?}&quot;, s1, s2, t); // -> &quot;hello&quot;, &quot;world&quot;, (&quot;hello&quot;, &quot;world&quot;)\n}`, `12774782322939960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token keyword">ref</span> s1<span class="token punctuation">,</span> <span class="token keyword">ref</span> s2<span class="token punctuation">)</span> <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}, {:?}, {:?}"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -> "hello", "world", ("hello", "world")</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="引用与借用"><a href="#%E5%BC%95%E7%94%A8%E4%B8%8E%E5%80%9F%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>引用与借用</h2>\n<h3 id="问题一-6"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>引用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55876704347823300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n   let x = 5;\n   // 填写空白处\n   let p = __;\n\n   println!(&quot;x 的内存地址是 {:p}&quot;, p); // output: 0x16fa3ac84\n}`, `55876704347823300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n   <span class="token comment">// 填写空白处</span>\n   <span class="token keyword">let</span> p <span class="token operator">=</span> __<span class="token punctuation">;</span>\n\n   <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x 的内存地址是 {:p}"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output: 0x16fa3ac84</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-43"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-43" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39484714353199490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = 5;\n    // 填写空白处\n    let p = &x;\n\n    println!(&quot;x 的内存地址是 {:p}&quot;, p); // output: 0x16fa3ac84\n}`, `39484714353199490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token comment">// 填写空白处</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x 的内存地址是 {:p}"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output: 0x16fa3ac84</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-6"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26460678272839844000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = 5;\n    let y = &x;\n\n    // 只能修改以下行\n    assert_eq!(5, y);\n}`, `26460678272839844000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>\n\n    <span class="token comment">// 只能修改以下行</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-44"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-44" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36488622370255098000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let x = 5;\n    let y = &x;\n\n    // 只能修改以下行\n    assert_eq!(5, *y);\n}`, `36488622370255098000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>\n\n    <span class="token comment">// 只能修改以下行</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-6"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23341287122458800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    borrow_object(s)\n}\n\nfn borrow_object(s: &String) {}`, `23341287122458800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">borrow_object</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">borrow_object</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>String<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-45"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-45" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94059764181683420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    borrow_object(&s)\n}\n\nfn borrow_object(s: &String) {}`, `94059764181683420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">borrow_object</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">borrow_object</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>String<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-5"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37855773644299730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    push_str(s)\n}\n\nfn push_str(s: &mut String) {\n    s.push_str(&quot;world&quot;)\n}`, `37855773644299730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">push_str</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">push_str</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-46"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-46" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63870398297538730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    push_str(&mut s)\n}\n\nfn push_str(s: &mut String) {\n    s.push_str(&quot;world&quot;)\n}`, `63870398297538730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">push_str</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">push_str</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-5"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61028144957948720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    // 填写空白处，让代码工作\n    let p = __;\n\n    p.push_str(&quot;world&quot;);\n}`, `61028144957948720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填写空白处，让代码工作</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> __<span class="token punctuation">;</span>\n\n    p<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-47"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-47" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30109484890585000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    // 填写空白处，让代码工作\n    let p = &mut s;\n\n    p.push_str(&quot;world&quot;);\n}`, `30109484890585000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填写空白处，让代码工作</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n\n    p<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-4"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>ref 与 &#x26; 类似，可以用来获取一个值的引用，但是它们的用法有所不同。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="859678720828149800"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let c = \'中\';\n\n    let r1 = &c;\n    // 填写空白处，但是不要修改其它行的代码\n    let __ r2 = c;\n\n    assert_eq!(*r1, *r2);\n\n    // 判断两个内存地址的字符串是否相等\n    assert_eq!(get_addr(r1),get_addr(r2));\n}\n\n// 获取传入引用的内存地址的字符串形式\nfn get_addr(r: &char) -> String {\n    format!(&quot;{:p}&quot;, r)\n}`, `859678720828149800`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token char string">\'中\'</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span>\n    <span class="token comment">// 填写空白处，但是不要修改其它行的代码</span>\n    <span class="token keyword">let</span> __ r2 <span class="token operator">=</span> c<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token operator">*</span>r1<span class="token punctuation">,</span> <span class="token operator">*</span>r2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 判断两个内存地址的字符串是否相等</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token function">get_addr</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">get_addr</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 获取传入引用的内存地址的字符串形式</span>\n<span class="token keyword">fn</span> <span class="token function">get_addr</span><span class="token punctuation">(</span>r<span class="token punctuation">:</span> <span class="token operator">&amp;</span>char<span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"{:p}"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-48"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-48" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5443843216403610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let c = \'中\';\n\n    let r1 = &c;\n    let ref r2 = c;\n\n    assert_eq!(*r1, *r2);\n\n    assert_eq!(get_addr(r1), get_addr(r2));\n}\n\nfn get_addr(r: &char) -> String {\n    format!(&quot;{:p}&quot;, r)\n}`, `5443843216403610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token char string">\'中\'</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token keyword">ref</span> r2 <span class="token operator">=</span> c<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token operator">*</span>r1<span class="token punctuation">,</span> <span class="token operator">*</span>r2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token function">get_addr</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">get_addr</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">get_addr</span><span class="token punctuation">(</span>r<span class="token punctuation">:</span> <span class="token operator">&amp;</span>char<span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n    <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"{:p}"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-3"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<p>借用规则</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7204938485686730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 移除代码某个部分，让它工作\n// 你不能移除整行的代码！\nfn main() {\n    let mut s = String::from(&quot;hello&quot;);\n\n    let r1 = &mut s;\n    let r2 = &mut s;\n\n    println!(&quot;{}, {}&quot;, r1, r2);\n}`, `7204938485686730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 移除代码某个部分，让它工作</span>\n<span class="token comment">// 你不能移除整行的代码！</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-49"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-49" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76174238790838140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 移除代码某个部分，让它工作\n// 你不能移除整行的代码！\nfn main() {\n    let mut s = String::from(&quot;hello&quot;);\n\n    let r1 = &s;\n    let r2 = &s;\n\n    println!(&quot;{}, {}&quot;, r1, r2);\n}`, `76174238790838140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 移除代码某个部分，让它工作</span>\n<span class="token comment">// 你不能移除整行的代码！</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题八-3"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h3>\n<p>错误: 从不可变对象借用可变</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55664988330963400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 通过修改下面一行代码来修复错误\n    let s = String::from(&quot;hello, &quot;);\n\n    borrow_object(&mut s)\n}\n\nfn borrow_object(s: &mut String) {}`, `55664988330963400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 通过修改下面一行代码来修复错误</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">borrow_object</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">borrow_object</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-50"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-50" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52348616291929326000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    borrow_object(&mut s)\n}\n\nfn borrow_object(s: &mut String) {}`, `52348616291929326000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">borrow_object</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">borrow_object</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96953570591562380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    borrow_object(&s);\n\n    s.push_str(&quot;world&quot;);\n}\n\nfn borrow_object(s: &String) {}`, `96953570591562380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">borrow_object</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">borrow_object</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>String<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题九-3"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h3>\n<p>NLL</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15808360854523685000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 注释掉一行代码让它工作\nfn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    let r1 = &mut s;\n    r1.push_str(&quot;world&quot;);\n    let r2 = &mut s;\n    r2.push_str(&quot;!&quot;);\n\n    println!(&quot;{}&quot;,r1);\n}`, `15808360854523685000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 注释掉一行代码让它工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    r1<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    r2<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>r1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-51"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-51" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46248719215890150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    let r1 = &mut s;\n    r1.push_str(&quot;world&quot;);\n    let r2 = &mut s;\n    r2.push_str(&quot;!&quot;);\n\n    // println!(&quot;{}&quot;,r1);\n}`, `46248719215890150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    r1<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    r2<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// println!("{}",r1);</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十-1"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4954251960741507000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    let r1 = &mut s;\n    let r2 = &mut s;\n\n    // 在下面增加一行代码人为制造编译错误：cannot borrow \\`s\\` as mutable more than once at a time\n    // 你不能同时使用 r1 和 r2\n}`, `4954251960741507000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n\n    <span class="token comment">// 在下面增加一行代码人为制造编译错误：cannot borrow `s` as mutable more than once at a time</span>\n    <span class="token comment">// 你不能同时使用 r1 和 r2</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-52"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-52" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65218807198901805000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello, &quot;);\n\n    let r1 = &mut s;\n    let r2 = &mut s;\n\n    println!(&quot;{}&quot;, r1)\n}`, `65218807198901805000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> r1<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="复合类型"><a href="#%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>复合类型</h1>\n<h2 id="字符串"><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符串</h2>\n<h3 id="问题一-7"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>正常情况下我们无法使用 str 类型，但是可以使用 &#x26;str 来替代</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37231025077259485000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，不要新增代码行\nfn main() {\n    let s: str = &quot;hello, world&quot;;\n}`, `37231025077259485000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，不要新增代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s<span class="token punctuation">:</span> str <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-53"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-53" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33440353349378780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s: &str = &quot;hello, world&quot;;\n}`, `33440353349378780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-7"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>如果要使用 str 类型，只能配合 Box。 &#x26; 可以用来将 <code class="language-text">Box&lt;str&gt;</code> 转换为 &#x26;str 类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16308710243199353000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 使用至少两种方法来修复错误\nfn main() {\n    let s: Box<str> = &quot;hello, world&quot;.into();\n    greetings(s)\n}\n\nfn greetings(s: &str) {\n    println!(&quot;{}&quot;,s)\n}`, `16308710243199353000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 使用至少两种方法来修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s<span class="token punctuation">:</span> Box<span class="token operator">&lt;</span>str<span class="token operator">></span> <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-54"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-54" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75479640233855960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s: Box<str> = &quot;hello, world&quot;.into();\n    greetings(&s)\n}\n\nfn greetings(s: &str) {\n    println!(&quot;{}&quot;, s)\n}`, `75479640233855960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s<span class="token punctuation">:</span> Box<span class="token operator">&lt;</span>str<span class="token operator">></span> <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14669095950889388000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s: Box<&str> = &quot;hello, world&quot;.into();\n    greetings(*s)\n}\n\nfn greetings(s: &str) {\n    println!(&quot;{}&quot;, s);\n}`, `14669095950889388000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s<span class="token punctuation">:</span> Box<span class="token operator">&lt;</span><span class="token operator">&amp;</span>str<span class="token operator">></span> <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span><span class="token operator">*</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-7"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>String 是定义在标准库中的类型，分配在堆上，可以动态的增长。它的底层存储是动态字节数组的方式(<code class="language-text">Vec&lt;u8&gt;</code>)，但是与字节数组不同，String 是 UTF-8 编码。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91298540954313260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let mut s = __;\n    s.push_str(&quot;hello, world&quot;);\n    s.push(\'!\');\n\n    assert_eq!(s, &quot;hello, world!&quot;);\n}`, `91298540954313260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> __<span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char string">\'!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-55"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-55" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85059977371518710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;&quot;);\n    s.push_str(&quot;hello, world&quot;);\n    s.push(\'!\');\n\n    assert_eq!(s, &quot;hello, world!&quot;);\n}`, `85059977371518710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char string">\'!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69383177324262466000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::new();\n    s.push_str(&quot;hello, world&quot;);\n    s.push(\'!\');\n\n    assert_eq!(s, &quot;hello, world!&quot;);\n}`, `69383177324262466000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char string">\'!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-6"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81188273761037880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复所有错误，并且不要新增代码行\nfn main() {\n    let  s = String::from(&quot;hello&quot;);\n    s.push(\',\');\n    s.push(&quot; world&quot;);\n    s += &quot;!&quot;.to_string();\n\n    println!(&quot;{}&quot;, s)\n}`, `81188273761037880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复所有错误，并且不要新增代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span>  s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char string">\',\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">" world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s <span class="token operator">+=</span> <span class="token string">"!"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-56"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-56" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12517165890378035000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello&quot;);\n    s.push(\',\');\n    s.push_str(&quot; world&quot;);\n    s += &quot;!&quot;;\n\n    println!(&quot;{}&quot;, s)\n}`, `12517165890378035000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char string">\',\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">" world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    s <span class="token operator">+=</span> <span class="token string">"!"</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-6"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<p>我们可以用 replace 方法来替换指定的子字符串</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8971508782708981000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let s = String::from(&quot;I like dogs&quot;);\n    // 以下方法会重新分配一块内存空间，然后将修改后的字符串存在这里\n    let s1 = s.__(&quot;dogs&quot;, &quot;cats&quot;);\n\n    assert_eq!(s1, &quot;I like cats&quot;)\n}`, `8971508782708981000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"I like dogs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 以下方法会重新分配一块内存空间，然后将修改后的字符串存在这里</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">__</span><span class="token punctuation">(</span><span class="token string">"dogs"</span><span class="token punctuation">,</span> <span class="token string">"cats"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token string">"I like cats"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-57"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-57" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89188956356976480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;I like dogs&quot;);\n    let s1 = s.replace(&quot;dogs&quot;, &quot;cats&quot;);\n\n    assert_eq!(s1, &quot;I like cats&quot;)\n}`, `89188956356976480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"I like dogs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"dogs"</span><span class="token punctuation">,</span> <span class="token string">"cats"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token string">"I like cats"</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-5"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>你只能将 String 跟 &#x26;str 类型进行拼接，并且 String 的所有权在此过程中会被 move</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14823752126768298000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复所有错误，不要删除任何一行代码\nfn main() {\n    let s1 = String::from(&quot;hello,&quot;);\n    let s2 = String::from(&quot;world!&quot;);\n    let s3 = s1 + s2;\n    assert_eq!(s3,&quot;hello,world!&quot;);\n    println!(&quot;{}&quot;,s1);\n}`, `14823752126768298000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复所有错误，不要删除任何一行代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello,"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s2 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s3 <span class="token operator">=</span> s1 <span class="token operator">+</span> s2<span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span><span class="token string">"hello,world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-58"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-58" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3201660655369398300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s1 = String::from(&quot;hello,&quot;);\n    let s2 = String::from(&quot;world!&quot;);\n    let s3 = s1.clone() + &s2;\n    assert_eq!(s3, &quot;hello,world!&quot;);\n    println!(&quot;{}&quot;, s1);\n}`, `3201660655369398300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello,"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s2 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s3 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">&amp;</span>s2<span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token string">"hello,world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-4"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<p>我们可以使用两种方法将 &#x26;str 转换成 String 类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5576965966659531000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 使用至少两种方法来修复错误\nfn main() {\n    let s = &quot;hello, world&quot;;\n    greetings(s)\n}\n\nfn greetings(s: String) {\n    println!(&quot;{}&quot;,s)\n}`, `5576965966659531000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 使用至少两种方法来修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-59"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-59" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41256983693183205000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;hello, world&quot;;\n    greetings(s)\n}\n\nfn greetings(s: &str) {\n    println!(&quot;{}&quot;, s)\n}`, `41256983693183205000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46323444007665260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;hello, world&quot;.to_string();\n    greetings(s)\n}\n\nfn greetings(s: String) {\n    println!(&quot;{}&quot;, s)\n}`, `46323444007665260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89503837951092340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello, world&quot;);\n    greetings(s)\n}\n\nfn greetings(s: String) {\n    println!(&quot;{}&quot;, s)\n}`, `89503837951092340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">greetings</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题八-4"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h3>\n<p>我们可以使用 String::from 或 <code class="language-text">to_string</code> 将 &#x26;str 转换成 String 类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3361360448149475300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 使用两种方法来解决错误，不要新增代码行\nfn main() {\n    let s = &quot;hello, world&quot;.to_string();\n    let s1: &str = s;\n}`, `3361360448149475300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 使用两种方法来解决错误，不要新增代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-60"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-60" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89395580004908240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;hello, world&quot;.to_string();\n    let s1: &str = &s;\n}`, `89395580004908240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54416789766530130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;hello, world&quot;;\n    let s1: &str = &s;\n}`, `54416789766530130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54751109777195975000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;hello, world&quot;.to_string();\n    let s1: &str = &s[..];\n}`, `54751109777195975000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23472592347775656000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;hello, world&quot;.to_string();\n    let s1: &str = s.as_str();\n}`, `23472592347775656000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">as_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题九-4"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20266395292343730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 你可以使用转义的方式来输出想要的字符，这里我们使用十六进制的值，例如 \\x73 会被转义成小写字母 \'s\'\n    // 填空以输出 &quot;I\'m writing Rust&quot;\n    let byte_escape = &quot;I\'m writing Ru\\x73__!&quot;;\n    println!(&quot;What are you doing\\x3F (\\\\x3F means ?) {}&quot;, byte_escape);\n\n    // 也可以使用 Unicode 形式的转义字符\n    let unicode_codepoint = &quot;\\u{211D}&quot;;\n    let character_name = &quot;\\&quot;DOUBLE-STRUCK CAPITAL R\\&quot;&quot;;\n\n    println!(&quot;Unicode character {} (U+211D) is called {}&quot;,\n                unicode_codepoint, character_name );\n\n    // 还能使用 \\ 来连接多行字符串\n    let long_string = &quot;String literals\n                        can span multiple lines.\n                        The linebreak and indentation here \\\n                         can be escaped too!&quot;;\n    println!(&quot;{}&quot;, long_string);\n}`, `20266395292343730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 你可以使用转义的方式来输出想要的字符，这里我们使用十六进制的值，例如 \\x73 会被转义成小写字母 \'s\'</span>\n    <span class="token comment">// 填空以输出 "I\'m writing Rust"</span>\n    <span class="token keyword">let</span> byte_escape <span class="token operator">=</span> <span class="token string">"I\'m writing Ru\\x73__!"</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"What are you doing\\x3F (\\\\x3F means ?) {}"</span><span class="token punctuation">,</span> byte_escape<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 也可以使用 Unicode 形式的转义字符</span>\n    <span class="token keyword">let</span> unicode_codepoint <span class="token operator">=</span> <span class="token string">"\\u{211D}"</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> character_name <span class="token operator">=</span> <span class="token string">"\\"DOUBLE-STRUCK CAPITAL R\\""</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Unicode character {} (U+211D) is called {}"</span><span class="token punctuation">,</span>\n                unicode_codepoint<span class="token punctuation">,</span> character_name <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 还能使用 \\ 来连接多行字符串</span>\n    <span class="token keyword">let</span> long_string <span class="token operator">=</span> "String literals\n                        can span multiple lines<span class="token punctuation">.</span>\n                        The linebreak and indentation here \\\n                         can <span class="token keyword">be</span> escaped <span class="token macro-rules function">too!</span>"<span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> long_string<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-61"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-61" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63064511311223640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let byte_escape = &quot;I\'m writing Ru\\x73\\x74!&quot;;\n    println!(&quot;What are you doing\\x3F (\\\\x3F means ?) {}&quot;, byte_escape);\n\n    let unicode_codepoint = &quot;\\u{211D}&quot;;\n    let character_name = &quot;\\&quot;DOUBLE-STRUCK CAPITAL R\\&quot;&quot;;\n\n    println!(&quot;Unicode character {} (U+211D) is called {}&quot;,\n                unicode_codepoint, character_name );\n\n   let long_string = &quot;String literals\n                        can span multiple lines.\n                        The linebreak and indentation here \\\n                         can be escaped too!&quot;;\n    println!(&quot;{}&quot;, long_string);\n}`, `63064511311223640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> byte_escape <span class="token operator">=</span> <span class="token string">"I\'m writing Ru\\x73\\x74!"</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"What are you doing\\x3F (\\\\x3F means ?) {}"</span><span class="token punctuation">,</span> byte_escape<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> unicode_codepoint <span class="token operator">=</span> <span class="token string">"\\u{211D}"</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> character_name <span class="token operator">=</span> <span class="token string">"\\"DOUBLE-STRUCK CAPITAL R\\""</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Unicode character {} (U+211D) is called {}"</span><span class="token punctuation">,</span>\n                unicode_codepoint<span class="token punctuation">,</span> character_name <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n   <span class="token keyword">let</span> long_string <span class="token operator">=</span> "String literals\n                        can span multiple lines<span class="token punctuation">.</span>\n                        The linebreak and indentation here \\\n                         can <span class="token keyword">be</span> escaped <span class="token macro-rules function">too!</span>"<span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> long_string<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十-2"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十</h3>\n<p>有时候需要转义的字符很多，我们会希望使用更方便的方式来书写字符串: raw string.</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20979079242937360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* 填空并修复所有错误 */\nfn main() {\n    let raw_str = r&quot;Escapes don\'t work here: \\x3F \\u{211D}&quot;;\n    // 修改上面的行让代码工作\n    assert_eq!(raw_str, &quot;Escapes don\'t work here: ? ℝ&quot;);\n\n    // 如果你希望在字符串中使用双引号，可以使用以下形式\n    let quotes = r#&quot;And then I said: &quot;There is no escape!&quot;&quot;#;\n    println!(&quot;{}&quot;, quotes);\n\n    // 如果希望在字符串中使用 # 号，可以如下使用：\n    let  delimiter = r###&quot;A string with &quot;# in it. And even &quot;##!&quot;###;\n    println!(&quot;{}&quot;, delimiter);\n\n    // 填空\n    let long_delimiter = __;\n    assert_eq!(long_delimiter, &quot;Hello, \\&quot;##\\&quot;&quot;)\n}`, `20979079242937360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">/* 填空并修复所有错误 */</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> raw_str <span class="token operator">=</span> <span class="token string">r"Escapes don\'t work here: \\x3F \\u{211D}"</span><span class="token punctuation">;</span>\n    <span class="token comment">// 修改上面的行让代码工作</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>raw_str<span class="token punctuation">,</span> <span class="token string">"Escapes don\'t work here: ? ℝ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 如果你希望在字符串中使用双引号，可以使用以下形式</span>\n    <span class="token keyword">let</span> quotes <span class="token operator">=</span> <span class="token string">r#"And then I said: "There is no escape!""#</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> quotes<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 如果希望在字符串中使用 # 号，可以如下使用：</span>\n    <span class="token keyword">let</span>  delimiter <span class="token operator">=</span> <span class="token string">r###"A string with "# in it. And even "##!"###</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> delimiter<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填空</span>\n    <span class="token keyword">let</span> long_delimiter <span class="token operator">=</span> __<span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>long_delimiter<span class="token punctuation">,</span> <span class="token string">"Hello, \\"##\\""</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-62"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-62" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66651082519366490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let raw_str = &quot;Escapes don\'t work here: \\x3F \\u{211D}&quot;;\n    assert_eq!(raw_str, &quot;Escapes don\'t work here: ? ℝ&quot;);\n\n    let quotes = r#&quot;And then I said: &quot;There is no escape!&quot;&quot;#;\n    println!(&quot;{}&quot;, quotes);\n\n    let delimiter = r###&quot;A string with &quot;# in it. And even &quot;##!&quot;###;\n    println!(&quot;{}&quot;, delimiter);\n\n    let long_delimiter = r###&quot;Hello, &quot;##&quot;&quot;###;\n    assert_eq!(long_delimiter, &quot;Hello, \\&quot;##\\&quot;&quot;)\n}`, `66651082519366490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> raw_str <span class="token operator">=</span> <span class="token string">"Escapes don\'t work here: \\x3F \\u{211D}"</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>raw_str<span class="token punctuation">,</span> <span class="token string">"Escapes don\'t work here: ? ℝ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> quotes <span class="token operator">=</span> <span class="token string">r#"And then I said: "There is no escape!""#</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> quotes<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> delimiter <span class="token operator">=</span> <span class="token string">r###"A string with "# in it. And even "##!"###</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> delimiter<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> long_delimiter <span class="token operator">=</span> <span class="token string">r###"Hello, "##""###</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>long_delimiter<span class="token punctuation">,</span> <span class="token string">"Hello, \\"##\\""</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十一-1"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%80-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十一</h3>\n<p>你无法通过索引的方式去访问字符串中的某个字符，但是可以使用切片的方式 <code class="language-text">&amp;s1[start..end]</code>，但是 start 和 end 必须准确落在字符的边界处</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94581132941746240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s1 = String::from(&quot;hi,中国&quot;);\n    let h = s1[0]; // 修改当前行来修复错误，提示: \\`h\\` 字符在 UTF-8 格式中只需要 1 个字节来表示\n    assert_eq!(h, &quot;h&quot;);\n\n    let h1 = &s1[3..5];// 修改当前行来修复错误，提示: \\`中\\` 字符在 UTF-8 格式中需要 3 个字节来表示\n    assert_eq!(h1, &quot;中&quot;);\n}`, `94581132941746240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hi,中国"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> h <span class="token operator">=</span> s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 修改当前行来修复错误，提示: `h` 字符在 UTF-8 格式中只需要 1 个字节来表示</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token string">"h"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> h1 <span class="token operator">=</span> <span class="token operator">&amp;</span>s1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 修改当前行来修复错误，提示: `中` 字符在 UTF-8 格式中需要 3 个字节来表示</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> <span class="token string">"中"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-63"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-63" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11785683719248552000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s1 = String::from(&quot;hi,中国&quot;);\n    let h = &s1[0..1];\n    assert_eq!(h, &quot;h&quot;);\n\n    let h1 = &s1[3..6];\n    assert_eq!(h1, &quot;中&quot;);\n}`, `11785683719248552000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s1 <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hi,中国"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token operator">&amp;</span>s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token string">"h"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> h1 <span class="token operator">=</span> <span class="token operator">&amp;</span>s1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">..</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>h1<span class="token punctuation">,</span> <span class="token string">"中"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十二"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81%E4%BA%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73423212345622190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 填空，打印出 &quot;你好，世界&quot; 中的每一个字符\n    for c in &quot;你好，世界&quot;.__ {\n        println!(&quot;{}&quot;, c)\n    }\n}`, `73423212345622190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 填空，打印出 "你好，世界" 中的每一个字符</span>\n    <span class="token keyword">for</span> c <span class="token keyword">in</span> <span class="token string">"你好，世界"</span><span class="token punctuation">.</span>__ <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-64"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-64" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3088455707002801700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    for c in &quot;你好，世界&quot;.chars() {\n        println!(&quot;{}&quot;, c)\n    }\n}`, `3088455707002801700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> c <span class="token keyword">in</span> <span class="token string">"你好，世界"</span><span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题十三"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十三</h3>\n<p>我们可以使用三方库 <code class="language-text">utf8_slice</code> 来访问 UTF-8 字符串的某个子串，但是与之前不同的是，该库索引的是字符，而不是字节</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92479935468929860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`use utf8_slice;\nfn main() {\n    let s = &quot;The 🚀 goes to the 🌑!&quot;;\n\n    let rocket = utf8_slice::slice(s, 4, 5);\n    // 结果是 &quot;🚀&quot;，索引的是字符\n}`, `92479935468929860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">use</span> utf8_slice<span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"The 🚀 goes to the 🌑!"</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> rocket <span class="token operator">=</span> utf8_slice<span class="token punctuation">::</span><span class="token function">slice</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 结果是 "🚀"，索引的是字符</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="数组"><a href="#%E6%95%B0%E7%BB%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数组</h2>\n<h3 id="问题一-8"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>数组的类型是 [T; Length]，就如你所看到的，数组的长度是类型签名的一部分，因此数组的长度必须在编译期就已知</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6819059507678004000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 使用合适的类型填空\n    let arr: __ = [1, 2, 3, 4, 5];\n\n    // 修改以下代码，让它顺利运行\n    assert!(arr.len() == 4);\n}`, `6819059507678004000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 使用合适的类型填空</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> __ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 修改以下代码，让它顺利运行</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-65"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-65" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50541384858445000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr: [i32; 5] = [1, 2, 3, 4, 5];\n\n    assert!(arr.len() == 5);\n}`, `50541384858445000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>i32<span class="token punctuation">;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-8"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66094837218897550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 很多时候，我们可以忽略数组的部分类型，也可以忽略全部类型，让编译器帮助我们推导\n    let arr0 = [1, 2, 3];\n    let arr: [_; 3] = [\'a\', \'b\', \'c\'];\n\n    // 填空\n    // 数组分配在栈上， \\`std::mem::size_of_val\\` 函数会返回整个数组占用的内存空间\n    // 数组中的每个 char 元素占用 4 字节的内存空间，因为在 Rust 中， char 是 Unicode 字符\n    assert!(std::mem::size_of_val(&arr) == __);\n}`, `66094837218897550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 很多时候，我们可以忽略数组的部分类型，也可以忽略全部类型，让编译器帮助我们推导</span>\n    <span class="token keyword">let</span> arr0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>_<span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'a\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'c\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填空</span>\n    <span class="token comment">// 数组分配在栈上， `std::mem::size_of_val` 函数会返回整个数组占用的内存空间</span>\n    <span class="token comment">// 数组中的每个 char 元素占用 4 字节的内存空间，因为在 Rust 中， char 是 Unicode 字符</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span> <span class="token operator">==</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-66"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-66" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99623761935712850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr0 = [1, 2, 3];\n    let arr: [_; 3] = [\'a\', \'b\', \'c\'];\n\n    assert!(std::mem::size_of_val(&arr) == 12);\n}`, `99623761935712850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>_<span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'a\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'c\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-8"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>数组中的所有元素可以一起初始化为同一个值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40663503776457620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 填空\n    let list: [i32; 100] = __ ;\n\n    assert!(list[0] == 1);\n    assert!(list.len() == 100);\n}`, `40663503776457620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 填空</span>\n    <span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token punctuation">[</span>i32<span class="token punctuation">;</span> <span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> __ <span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-67"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-67" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6501898553974228000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let list: [i32; 100] = [1; 100];\n\n    assert!(list[0] == 1);\n    assert!(list.len() == 100);\n}`, `6501898553974228000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token punctuation">[</span>i32<span class="token punctuation">;</span> <span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-7"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>数组中的所有元素必须是同一类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98785565370017660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 修复错误\n    let _arr = [1, 2, \'3\'];\n}`, `98785565370017660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 修复错误</span>\n    <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token char string">\'3\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-68"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-68" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52957397320064860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let _arr = [1, 2, 3];\n}`, `52957397320064860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-7"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<p>数组的下标索引从 0 开始</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61749970172240330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr = [\'a\', \'b\', \'c\'];\n\n    let ele = arr[1]; // 只修改此行来让代码工作\n\n    assert!(ele == \'a\');\n}`, `61749970172240330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'a\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'c\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> ele <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 只修改此行来让代码工作</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>ele <span class="token operator">==</span> <span class="token char string">\'a\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-69"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-69" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90057544009778610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr = [\'a\', \'b\', \'c\'];\n\n    let ele = arr[0];\n\n    assert!(ele == \'a\');\n}`, `90057544009778610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'a\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'c\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> ele <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>ele <span class="token operator">==</span> <span class="token char string">\'a\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-6"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>越界索引会导致代码的 panic</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18824373482463350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复代码中的错误\nfn main() {\n    let names = [String::from(&quot;Sunfei&quot;), &quot;Sunface&quot;.to_string()];\n\n    // \\`get\\` 返回 \\`Option<T>\\` 类型，因此它的使用非常安全\n    let name0 = names.get(0).unwrap();\n\n    // 但是下标索引就存在越界的风险了\n    let _name1 = &names[2];\n}`, `18824373482463350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复代码中的错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Sunfei"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Sunface"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// `get` 返回 `Option&lt;T>` 类型，因此它的使用非常安全</span>\n    <span class="token keyword">let</span> name0 <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 但是下标索引就存在越界的风险了</span>\n    <span class="token keyword">let</span> _name1 <span class="token operator">=</span> <span class="token operator">&amp;</span>names<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-70"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-70" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46850200925122400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let names = [String::from(&quot;Sunfei&quot;), &quot;Sunface&quot;.to_string()];\n\n    let name0 = names.get(0).unwrap();\n\n    let _name1 = &names[1];\n}`, `46850200925122400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Sunfei"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Sunface"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> name0 <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> _name1 <span class="token operator">=</span> <span class="token operator">&amp;</span>names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="切片"><a href="#%E5%88%87%E7%89%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>切片</h2>\n<h3 id="问题一-9"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>这里 <code class="language-text">[i32]</code> 和 str 都是切片类型，但是直接使用它们会造成编译错误，如下代码所示。为了解决，你需要使用切片的引用： <code class="language-text">&amp;[i32]</code>，&#x26;str</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41860507834477500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复代码中的错误，不要新增代码行!\nfn main() {\n    let arr = [1, 2, 3];\n    let s1: [i32] = arr[0..2];\n\n    let s2: str = &quot;hello, world&quot; as str;\n}`, `41860507834477500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复代码中的错误，不要新增代码行!</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token punctuation">[</span>i32<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> s2<span class="token punctuation">:</span> str <span class="token operator">=</span> <span class="token string">"hello, world"</span> <span class="token keyword">as</span> str<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-71"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-71" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67016259302401560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr = [1, 2, 3];\n    let s1: &[i32] = &arr[0..2];\n\n    let s2: &str = &quot;hello, world&quot;;\n}`, `67016259302401560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>i32<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> s2<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str <span class="token operator">=</span> <span class="token string">"hello, world"</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-9"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>一个切片引用占用了 2 个字大小的内存空间(从现在开始，为了简洁性考虑，如无特殊原因，我们统一使用切片来特指切片引用)。该切片的第一个字是指向数据的指针，第二个字是切片的长度。字的大小取决于处理器架构，例如在 x86-64 上，字的大小是 64 位也就是 8 个字节，那么一个切片引用就是 16 个字节大小。</p>\n<p>切片(引用)可以用来借用数组的某个连续的部分，对应的签名是 <code class="language-text">&amp;[T]</code>，大家可以与数组的签名对比下 <code class="language-text">[T; Length]</code>。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74148148532255310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr: [char; 3] = [\'中\', \'国\', \'人\'];\n\n    let slice = &arr[..2];\n\n    // 修改数字 \\`8\\` 让代码工作\n    // 小提示: 切片和数组不一样，它是引用。如果是数组的话，那下面的 \\`assert!\\` 将会通过： \'中\'和\'国\'是 char 类型，char 类型是 Unicode 编码，大小固定为 4 字节，两个字符为 8 字节。\n    assert!(std::mem::size_of_val(&slice) == 8);\n}`, `74148148532255310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>char<span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'中\'</span><span class="token punctuation">,</span> <span class="token char string">\'国\'</span><span class="token punctuation">,</span> <span class="token char string">\'人\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> slice <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 修改数字 `8` 让代码工作</span>\n    <span class="token comment">// 小提示: 切片和数组不一样，它是引用。如果是数组的话，那下面的 `assert!` 将会通过： \'中\'和\'国\'是 char 类型，char 类型是 Unicode 编码，大小固定为 4 字节，两个字符为 8 字节。</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>slice<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-72"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-72" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30727270277426190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr: [char; 3] = [\'中\', \'国\', \'人\'];\n\n    let slice = &arr[..2];\n\n    // 16 是切片大小\n    assert!(std::mem::size_of_val(&slice) == 16);\n    // 8 是数组大小\n    assert!(std::mem::size_of_val(slice) == 8);\n}`, `30727270277426190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>char<span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'中\'</span><span class="token punctuation">,</span> <span class="token char string">\'国\'</span><span class="token punctuation">,</span> <span class="token char string">\'人\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> slice <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 16 是切片大小</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>slice<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 8 是数组大小</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span><span class="token function">size_of_val</span><span class="token punctuation">(</span>slice<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-9"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47968029147127870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n   let arr: [i32; 5] = [1, 2, 3, 4, 5];\n  // 填空让代码工作起来\n  let slice: __ = __;\n  assert_eq!(slice, &[2, 3, 4]);\n}`, `47968029147127870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>i32<span class="token punctuation">;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token comment">// 填空让代码工作起来</span>\n  <span class="token keyword">let</span> slice<span class="token punctuation">:</span> __ <span class="token operator">=</span> __<span class="token punctuation">;</span>\n  <span class="token function">assert_eq!</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-73"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-73" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93645551806740430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let arr: [i32; 5] = [1, 2, 3, 4, 5];\n    // let slice: &[i32] = &arr[1..=3];\n    let slice: &[i32] = &arr[1..4];\n    assert_eq!(slice, &[2, 3, 4]);\n}`, `93645551806740430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>i32<span class="token punctuation">;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// let slice: &amp;[i32] = &amp;arr[1..=3];</span>\n    <span class="token keyword">let</span> slice<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>i32<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-8"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39406349481293490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello&quot;);\n\n    let slice1 = &s[0..2];\n    // 填空，不要再使用 0..2\n    let slice2 = &s[__];\n\n    assert_eq!(slice1, slice2);\n}`, `39406349481293490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> slice1 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// 填空，不要再使用 0..2</span>\n    <span class="token keyword">let</span> slice2 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span>__<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-74"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-74" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12365142345801083000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = String::from(&quot;hello&quot;);\n\n    let slice1 = &s[0..2];\n    // let slice2 = &s[..=1];\n    let slice2 = &s[..2];\n\n    assert_eq!(slice1, slice2);\n}`, `12365142345801083000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> slice1 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// let slice2 = &amp;s[..=1];</span>\n    <span class="token keyword">let</span> slice2 <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-8"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11799065791167896000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;你好，世界&quot;;\n    // 修改以下代码行，让代码工作起来\n    let slice = &s[0..2];\n\n    assert!(slice == &quot;你&quot;);\n}`, `11799065791167896000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"你好，世界"</span><span class="token punctuation">;</span>\n    <span class="token comment">// 修改以下代码行，让代码工作起来</span>\n    <span class="token keyword">let</span> slice <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>slice <span class="token operator">==</span> <span class="token string">"你"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-75"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-75" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14031125516776655000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let s = &quot;你好，世界&quot;;\n    let slice = &s[0..3];\n\n    assert!(slice == &quot;你&quot;);\n}`, `14031125516776655000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">"你好，世界"</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> slice <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>slice <span class="token operator">==</span> <span class="token string">"你"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-7"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>&#x26;String 可以被隐式地转换成 &#x26;str 类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65149779724042880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复所有错误\nfn main() {\n    let mut s = String::from(&quot;hello world&quot;);\n\n    // 这里, &s 是 \\`&String\\` 类型，但是 \\`first_character\\` 函数需要的是 \\`&str\\` 类型。\n    // 尽管两个类型不一样，但是代码仍然可以工作，原因是 \\`&String\\` 会被隐式地转换成 \\`&str\\` 类型，如果大家想要知道更多，可以看看 Deref 章节: https://course.rs/advance/smart-pointer/deref.html\n    let ch = first_character(&s);\n\n    s.clear(); // error!\n\n    println!(&quot;the first character is: {}&quot;, ch);\n}\nfn first_character(s: &str) -> &str {\n    &s[..1]\n}`, `65149779724042880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复所有错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 这里, &amp;s 是 `&amp;String` 类型，但是 `first_character` 函数需要的是 `&amp;str` 类型。</span>\n    <span class="token comment">// 尽管两个类型不一样，但是代码仍然可以工作，原因是 `&amp;String` 会被隐式地转换成 `&amp;str` 类型，如果大家想要知道更多，可以看看 Deref 章节: https://course.rs/advance/smart-pointer/deref.html</span>\n    <span class="token keyword">let</span> ch <span class="token operator">=</span> <span class="token function">first_character</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"the first character is: {}"</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">first_character</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str<span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>str <span class="token punctuation">{</span>\n    <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-76"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-76" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40890143497829650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let mut s = String::from(&quot;hello world&quot;);\n\n    let ch = first_character(&s);\n\n    println!(&quot;the first character is: {}&quot;, ch);\n\n    s.clear(); // error!\n}\n\nfn first_character(s: &str) -> &str {\n    &s[..1]\n}`, `40890143497829650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> s <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> ch <span class="token operator">=</span> <span class="token function">first_character</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"the first character is: {}"</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">first_character</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span>str<span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>str <span class="token punctuation">{</span>\n    <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="元组"><a href="#%E5%85%83%E7%BB%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>元组</h2>\n<h3 id="问题一-10"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>元组中的元素可以是不同的类型。元组的类型签名是(T1, T2, …), 这里 T1, T2 是相对应的元组成员的类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41066995723132970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let _t0: (u8,i16) = (0, -1);\n    // 元组的成员还可以是一个元组\n    let _t1: (u8, (i16, u32)) = (0, (-1, 1));\n    // 填空让代码工作\n    let t: (u8, __, i64, __, __) = (1u8, 2u16, 3i64, &quot;hello&quot;, String::from(&quot;, world&quot;));\n}`, `41066995723132970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _t0<span class="token punctuation">:</span> <span class="token punctuation">(</span>u8<span class="token punctuation">,</span>i16<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 元组的成员还可以是一个元组</span>\n    <span class="token keyword">let</span> _t1<span class="token punctuation">:</span> <span class="token punctuation">(</span>u8<span class="token punctuation">,</span> <span class="token punctuation">(</span>i16<span class="token punctuation">,</span> u32<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 填空让代码工作</span>\n    <span class="token keyword">let</span> t<span class="token punctuation">:</span> <span class="token punctuation">(</span>u8<span class="token punctuation">,</span> __<span class="token punctuation">,</span> i64<span class="token punctuation">,</span> __<span class="token punctuation">,</span> __<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1u8</span><span class="token punctuation">,</span> <span class="token number">2u16</span><span class="token punctuation">,</span> <span class="token number">3i64</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">", world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-77"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-77" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32577608050589336000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let _t0: (u8,i16) = (0, -1);\n    let _t1: (u8, (i16, u32)) = (0, (-1, 1));\n    let t: (u8, u16, i64, &str, String) = (1u8, 2u16, 3i64, &quot;hello&quot;, String::from(&quot;, world&quot;));\n}`, `32577608050589336000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> _t0<span class="token punctuation">:</span> <span class="token punctuation">(</span>u8<span class="token punctuation">,</span>i16<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> _t1<span class="token punctuation">:</span> <span class="token punctuation">(</span>u8<span class="token punctuation">,</span> <span class="token punctuation">(</span>i16<span class="token punctuation">,</span> u32<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> t<span class="token punctuation">:</span> <span class="token punctuation">(</span>u8<span class="token punctuation">,</span> u16<span class="token punctuation">,</span> i64<span class="token punctuation">,</span> <span class="token operator">&amp;</span>str<span class="token punctuation">,</span> String<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1u8</span><span class="token punctuation">,</span> <span class="token number">2u16</span><span class="token punctuation">,</span> <span class="token number">3i64</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">", world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-10"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>可以使用索引来获取元组的成员</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94906795590086430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改合适的地方，让代码工作\nfn main() {\n    let t = (&quot;i&quot;, &quot;am&quot;, &quot;sunface&quot;);\n    assert_eq!(t.1, &quot;sunface&quot;);\n}`, `94906795590086430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改合适的地方，让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"am"</span><span class="token punctuation">,</span> <span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>t<span class="token number">.1</span><span class="token punctuation">,</span> <span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-78"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-78" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74438716686308410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let t = (&quot;i&quot;, &quot;am&quot;, &quot;sunface&quot;);\n    assert_eq!(t.2, &quot;sunface&quot;);\n}`, `74438716686308410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"am"</span><span class="token punctuation">,</span> <span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>t<span class="token number">.2</span><span class="token punctuation">,</span> <span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-10"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>过长的元组无法被打印输出</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68463795608231990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复代码错误\nfn main() {\n    let too_long_tuple = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13);\n    println!(&quot;too long tuple: {:?}&quot;, too_long_tuple);\n}`, `68463795608231990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复代码错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> too_long_tuple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"too long tuple: {:?}"</span><span class="token punctuation">,</span> too_long_tuple<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-79"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-79" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80686024204679730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let too_long_tuple = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12);\n    println!(&quot;too long tuple: {:?}&quot;, too_long_tuple);\n}`, `80686024204679730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> too_long_tuple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"too long tuple: {:?}"</span><span class="token punctuation">,</span> too_long_tuple<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-9"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>使用模式匹配来解构元组</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31882809511256994000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let tup = (1, 6.4, &quot;hello&quot;);\n\n    // 填空\n    let __ = tup;\n\n    assert_eq!(x, 1);\n    assert_eq!(y, &quot;hello&quot;);\n    assert_eq!(z, 6.4);\n}`, `31882809511256994000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> tup <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填空</span>\n    <span class="token keyword">let</span> __ <span class="token operator">=</span> tup<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-80"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82212725812643070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let tup = (1, 6.4, &quot;hello&quot;);\n\n    let (x, z, y) = tup;\n\n    assert_eq!(x, 1);\n    assert_eq!(y, &quot;hello&quot;);\n    assert_eq!(z, 6.4);\n}`, `82212725812643070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> tup <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> z<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> tup<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-9"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<p>解构式赋值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78696015169425950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let (x, y, z);\n\n    // 填空\n    __ = (1, 2, 3);\n\n    assert_eq!(x, 3);\n    assert_eq!(y, 1);\n    assert_eq!(z, 2);\n}`, `78696015169425950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填空</span>\n    __ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-81"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12166688459743180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let (x, y, z);\n\n    (y, z, x) = (1, 2, 3);\n\n    assert_eq!(x, 3);\n    assert_eq!(y, 1);\n    assert_eq!(z, 2);\n}`, `12166688459743180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token punctuation">(</span>y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-8"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>元组可以用于函数的参数和返回值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60181710287911640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    // 填空，需要稍微计算下\n    let (x, y) = sum_multiply(__);\n\n    assert_eq!(x, 5);\n    assert_eq!(y, 6);\n}\n\nfn sum_multiply(nums: (i32, i32)) -> (i32, i32) {\n    (nums.0 + nums.1, nums.0 * nums.1)\n}`, `60181710287911640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 填空，需要稍微计算下</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sum_multiply</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">sum_multiply</span><span class="token punctuation">(</span>nums<span class="token punctuation">:</span> <span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token punctuation">(</span>nums<span class="token number">.0</span> <span class="token operator">+</span> nums<span class="token number">.1</span><span class="token punctuation">,</span> nums<span class="token number">.0</span> <span class="token operator">*</span> nums<span class="token number">.1</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-82"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1599139451814513000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let (x, y) = sum_multiply((2, 3));\n\n    assert_eq!(x, 5);\n    assert_eq!(y, 6);\n}\n\nfn sum_multiply(nums: (i32, i32)) -> (i32, i32) {\n    (nums.0 + nums.1, nums.0 * nums.1)\n}`, `1599139451814513000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sum_multiply</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">sum_multiply</span><span class="token punctuation">(</span>nums<span class="token punctuation">:</span> <span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token punctuation">(</span>nums<span class="token number">.0</span> <span class="token operator">+</span> nums<span class="token number">.1</span><span class="token punctuation">,</span> nums<span class="token number">.0</span> <span class="token operator">*</span> nums<span class="token number">.1</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="结构体"><a href="#%E7%BB%93%E6%9E%84%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结构体</h2>\n<h3 id="问题一-11"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>对于结构体，我们必须为其中的每一个字段都指定具体的值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82842369022605020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// fix the error\nstruct Person {\n    name: String,\n    age: u8,\n    hobby: String\n}\nfn main() {\n    let age = 30;\n    let p = Person {\n        name: String::from(&quot;sunface&quot;),\n        age,\n    };\n}`, `82842369022605020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// fix the error</span>\n<span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    age<span class="token punctuation">:</span> u8<span class="token punctuation">,</span>\n    hobby<span class="token punctuation">:</span> String\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Person <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        age<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-83"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99759354429652760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Person {\n    name: String,\n    age: u8,\n    hobby: String,\n}\nfn main() {\n    let age = 30;\n    let p = Person {\n        name: String::from(&quot;sunface&quot;),\n        age,\n        hobby: String::from(&quot;dsa&quot;),\n    };\n}`, `99759354429652760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    age<span class="token punctuation">:</span> u8<span class="token punctuation">,</span>\n    hobby<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Person <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        age<span class="token punctuation">,</span>\n        hobby<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"dsa"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-11"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>单元结构体没有任何字段</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90297487939622620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Unit;\ntrait SomeTrait {\n    // ...定义一些行为\n}\n\n// 我们并不关心结构体中有什么数据( 字段 )，但我们关心它的行为。\n// 因此这里我们使用没有任何字段的单元结构体，然后为它实现一些行为\nimpl SomeTrait for Unit {  }\nfn main() {\n    let u = Unit;\n    do_something_with_unit(u);\n}\n\n// 填空，让代码工作\nfn do_something_with_unit(u: __) {   }`, `90297487939622620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Unit<span class="token punctuation">;</span>\n<span class="token keyword">trait</span> SomeTrait <span class="token punctuation">{</span>\n    <span class="token comment">// ...定义一些行为</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 我们并不关心结构体中有什么数据( 字段 )，但我们关心它的行为。</span>\n<span class="token comment">// 因此这里我们使用没有任何字段的单元结构体，然后为它实现一些行为</span>\n<span class="token keyword">impl</span> SomeTrait <span class="token keyword">for</span> Unit <span class="token punctuation">{</span>  <span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> u <span class="token operator">=</span> Unit<span class="token punctuation">;</span>\n    <span class="token function">do_something_with_unit</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 填空，让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">do_something_with_unit</span><span class="token punctuation">(</span>u<span class="token punctuation">:</span> __<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-84"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47784155069020680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Unit;\ntrait SomeTrait {\n}\n\nimpl SomeTrait for Unit {}\nfn main() {\n    let u = Unit;\n    do_something_with_unit(u);\n}\n\nfn do_something_with_unit(u: Unit) {}`, `47784155069020680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Unit<span class="token punctuation">;</span>\n<span class="token keyword">trait</span> SomeTrait <span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> SomeTrait <span class="token keyword">for</span> Unit <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> u <span class="token operator">=</span> Unit<span class="token punctuation">;</span>\n    <span class="token function">do_something_with_unit</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">do_something_with_unit</span><span class="token punctuation">(</span>u<span class="token punctuation">:</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-11"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>元组结构体看起来跟元组很像，但是它拥有一个结构体的名称，该名称可以赋予它一定的意义。由于它并不关心内部数据到底是什么名称，因此此时元组结构体就非常适合</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52659320400032604000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空并修复错误\nstruct Color(i32, i32, i32);\nstruct Point(i32, i32, i32);\nfn main() {\n    let v = Point(__, __, __);\n    check_color(v);\n}\n\nfn check_color(p: Color) {\n   let (x, _, _) = p;\n   assert_eq!(x, 0);\n   assert_eq!(p.1, 127);\n   assert_eq!(__, 255);\n}`, `52659320400032604000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空并修复错误</span>\n<span class="token keyword">struct</span> <span class="token function">Color</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">struct</span> <span class="token function">Point</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> __<span class="token punctuation">,</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">check_color</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">check_color</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> Color<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>\n   <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token function">assert_eq!</span><span class="token punctuation">(</span>p<span class="token number">.1</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token function">assert_eq!</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-85"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33637938277583920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Color(i32, i32, i32);\nstruct Point(i32, i32, i32);\nfn main() {\n    let v = Point(0, 127, 255);\n    check_color(v);\n}\n\nfn check_color(p: Point) {\n    let Point(x, y, z) = p;\n    assert_eq!(x, 0);\n    assert_eq!(p.1, 127);\n    assert_eq!(z, 255);\n}`, `33637938277583920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> <span class="token function">Color</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">struct</span> <span class="token function">Point</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">check_color</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">check_color</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> Point<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token function">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>p<span class="token number">.1</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-10"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>你可以在实例化一个结构体时将它整体标记为可变的，但是 Rust 不允许我们将结构体的某个字段专门指定为可变的</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5104521100094095000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空并修复错误，不要增加或移除代码行\nstruct Person {\n    name: String,\n    age: u8,\n}\nfn main() {\n    let age = 18;\n    let p = Person {\n        name: String::from(&quot;sunface&quot;),\n        age,\n    };\n\n    // how can you believe sunface is only 18?\n    p.age = 30;\n\n    // 填空\n    __ = String::from(&quot;sunfei&quot;);\n}`, `5104521100094095000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空并修复错误，不要增加或移除代码行</span>\n<span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    age<span class="token punctuation">:</span> u8<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Person <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        age<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// how can you believe sunface is only 18?</span>\n    p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 填空</span>\n    __ <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunfei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-86"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83852411952983050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Person {\n    name: String,\n    age: u8,\n}\nfn main() {\n    let age = 18;\n    let mut p = Person {\n        name: String::from(&quot;sunface&quot;),\n        age,\n    };\n\n    p.age = 30;\n\n    p.name = String::from(&quot;sunfei&quot;);\n}`, `83852411952983050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    age<span class="token punctuation">:</span> u8<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> p <span class="token operator">=</span> Person <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        age<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n\n    p<span class="token punctuation">.</span>name <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunfei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-10"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<p>使用结构体字段初始化缩略语法可以减少一些重复代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62035143119545850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nstruct Person {\n    name: String,\n    age: u8,\n}\nfn main() {}\n\nfn build_person(name: String, age: u8) -> Person {\n    Person {\n        age,\n        __\n    }\n}`, `62035143119545850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    age<span class="token punctuation">:</span> u8<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">build_person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> String<span class="token punctuation">,</span> age<span class="token punctuation">:</span> u8<span class="token punctuation">)</span> <span class="token punctuation">-></span> Person <span class="token punctuation">{</span>\n    Person <span class="token punctuation">{</span>\n        age<span class="token punctuation">,</span>\n        __\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-87"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11478637711491756000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Person {\n    name: String,\n    age: u8,\n}\nfn main() {}\n\nfn build_person(name: String, age: u8) -> Person {\n    Person {\n        age,\n        name\n    }\n}`, `11478637711491756000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    age<span class="token punctuation">:</span> u8<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">build_person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> String<span class="token punctuation">,</span> age<span class="token punctuation">:</span> u8<span class="token punctuation">)</span> <span class="token punctuation">-></span> Person <span class="token punctuation">{</span>\n    Person <span class="token punctuation">{</span>\n        age<span class="token punctuation">,</span>\n        name\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-9"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>你可以使用结构体更新语法基于一个结构体实例来构造另一个</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69178272043842350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码工作\nstruct User {\n    active: bool,\n    username: String,\n    email: String,\n    sign_in_count: u64,\n}\nfn main() {\n    let u1 = User {\n        email: String::from(&quot;someone@example.com&quot;),\n        username: String::from(&quot;sunface&quot;),\n        active: true,\n        sign_in_count: 1,\n    };\n\n    let u2 = set_email(u1);\n}\n\nfn set_email(u: User) -> User {\n    User {\n        email: String::from(&quot;contact@im.dev&quot;),\n        __\n    }\n}`, `69178272043842350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码工作</span>\n<span class="token keyword">struct</span> User <span class="token punctuation">{</span>\n    active<span class="token punctuation">:</span> bool<span class="token punctuation">,</span>\n    username<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    sign_in_count<span class="token punctuation">:</span> u64<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> u1 <span class="token operator">=</span> User <span class="token punctuation">{</span>\n        email<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"someone@example.com"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        username<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        active<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>\n        sign_in_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> u2 <span class="token operator">=</span> <span class="token function">set_email</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">set_email</span><span class="token punctuation">(</span>u<span class="token punctuation">:</span> User<span class="token punctuation">)</span> <span class="token punctuation">-></span> User <span class="token punctuation">{</span>\n    User <span class="token punctuation">{</span>\n        email<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"contact@im.dev"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        __\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-88"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38629833305242700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct User {\n    active: bool,\n    username: String,\n    email: String,\n    sign_in_count: u64,\n}\nfn main() {\n    let u1 = User {\n        email: String::from(&quot;someone@example.com&quot;),\n        username: String::from(&quot;sunface&quot;),\n        active: true,\n        sign_in_count: 1,\n    };\n\n    let u2 = set_email(u1);\n}\n\nfn set_email(u: User) -> User {\n    User {\n        email: String::from(&quot;contact@im.dev&quot;),\n        ..u\n    }\n}`, `38629833305242700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> User <span class="token punctuation">{</span>\n    active<span class="token punctuation">:</span> bool<span class="token punctuation">,</span>\n    username<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    email<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    sign_in_count<span class="token punctuation">:</span> u64<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> u1 <span class="token operator">=</span> User <span class="token punctuation">{</span>\n        email<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"someone@example.com"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        username<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"sunface"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        active<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>\n        sign_in_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> u2 <span class="token operator">=</span> <span class="token function">set_email</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">set_email</span><span class="token punctuation">(</span>u<span class="token punctuation">:</span> User<span class="token punctuation">)</span> <span class="token punctuation">-></span> User <span class="token punctuation">{</span>\n    User <span class="token punctuation">{</span>\n        email<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"contact@im.dev"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">..</span>u\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-5"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<p>我们可以使用 <code class="language-text">#[derive(Debug)]</code> 让结构体变成可打印的.</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7290379612787134000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码工作\n#[__]\nstruct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nfn main() {\n    let scale = 2;\n    let rect1 = Rectangle {\n        width: dbg!(30 * scale), // 打印 debug 信息到标准错误输出 stderr,并将 \\`30 * scale\\` 的值赋给 \\`width\\`\n        height: 50,\n    };\n\n    dbg!(&rect1); // 打印 debug 信息到标准错误输出 stderr\n\n    println!(__, rect1); // 打印 debug 信息到标准输出 stdout\n}`, `7290379612787134000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码工作</span>\n<span class="token attribute attr-name">#[__]</span>\n<span class="token keyword">struct</span> Rectangle <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> scale <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> rect1 <span class="token operator">=</span> Rectangle <span class="token punctuation">{</span>\n        width<span class="token punctuation">:</span> <span class="token function">dbg!</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 打印 debug 信息到标准错误输出 stderr,并将 `30 * scale` 的值赋给 `width`</span>\n        height<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">dbg!</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rect1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印 debug 信息到标准错误输出 stderr</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> rect1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印 debug 信息到标准输出 stdout</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-89"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68742299266687200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nstruct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nfn main() {\n    let scale = 2;\n    let rect1 = Rectangle {\n        width: dbg!(30 * scale),\n        height: 50,\n    };\n\n    dbg!(&rect1);\n\n    println!(&quot;{:#?}&quot;, rect1);\n}`, `68742299266687200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> Rectangle <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> scale <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> rect1 <span class="token operator">=</span> Rectangle <span class="token punctuation">{</span>\n        width<span class="token punctuation">:</span> <span class="token function">dbg!</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        height<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">dbg!</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rect1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:#?}"</span><span class="token punctuation">,</span> rect1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题八-5"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h3>\n<p>当解构一个变量时，可以同时使用 move 和引用模式绑定的方式。当这么做时，部分 move 就会发生：变量中一部分的所有权被转移给其它变量，而另一部分我们获取了它的引用。</p>\n<p>在这种情况下，原变量将无法再被使用，但是它没有转移所有权的那一部分依然可以使用，也就是之前被引用的那部分。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14853076557659351000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    #[derive(Debug)]\n    struct Person {\n        name: String,\n        age: Box<u8>,\n    }\n\n    let person = Person {\n        name: String::from(&quot;Alice&quot;),\n        age: Box::new(20),\n    };\n\n    // 通过这种解构式模式匹配，person.name 的所有权被转移给新的变量 \\`name\\`\n    // 但是，这里 \\`age\\` 变量确是对 person.age 的引用, 这里 ref 的使用相当于: let age = &person.age\n    let Person { name, ref age } = person;\n\n    println!(&quot;The person\'s age is {}&quot;, age);\n\n    println!(&quot;The person\'s name is {}&quot;, name);\n\n    // Error! 原因是 person 的一部分已经被转移了所有权，因此我们无法再使用它\n    //println!(&quot;The person struct is {:?}&quot;, person);\n\n    // 虽然 \\`person\\` 作为一个整体无法再被使用，但是 \\`person.age\\` 依然可以使用\n    println!(&quot;The person\'s age from person struct is {}&quot;, person.age);\n}`, `14853076557659351000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token attribute attr-name">#[derive(Debug)]</span>\n    <span class="token keyword">struct</span> Person <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n        age<span class="token punctuation">:</span> Box<span class="token operator">&lt;</span>u8<span class="token operator">></span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">let</span> person <span class="token operator">=</span> Person <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        age<span class="token punctuation">:</span> Box<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 通过这种解构式模式匹配，person.name 的所有权被转移给新的变量 `name`</span>\n    <span class="token comment">// 但是，这里 `age` 变量确是对 person.age 的引用, 这里 ref 的使用相当于: let age = &amp;person.age</span>\n    <span class="token keyword">let</span> Person <span class="token punctuation">{</span> name<span class="token punctuation">,</span> <span class="token keyword">ref</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"The person\'s age is {}"</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"The person\'s name is {}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// Error! 原因是 person 的一部分已经被转移了所有权，因此我们无法再使用它</span>\n    <span class="token comment">//println!("The person struct is {:?}", person);</span>\n\n    <span class="token comment">// 虽然 `person` 作为一个整体无法再被使用，但是 `person.age` 依然可以使用</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"The person\'s age from person struct is {}"</span><span class="token punctuation">,</span> person<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题九-5"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45523345583106840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\n#[derive(Debug)]\nstruct File {\n    name: String,\n    data: String,\n}\nfn main() {\n    let f = File {\n        name: String::from(&quot;readme.md&quot;),\n        data: &quot;Rust By Practice&quot;.to_string()\n    };\n\n    let _name = f.name;\n\n    // 只能修改这一行\n    println!(&quot;{}, {}, {:?}&quot;,f.name, f.data, f);\n}`, `45523345583106840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> File <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    data<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> f <span class="token operator">=</span> File <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"readme.md"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        data<span class="token punctuation">:</span> <span class="token string">"Rust By Practice"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> _name <span class="token operator">=</span> f<span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n\n    <span class="token comment">// 只能修改这一行</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, {}, {:?}"</span><span class="token punctuation">,</span>f<span class="token punctuation">.</span>name<span class="token punctuation">,</span> f<span class="token punctuation">.</span>data<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-90"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7742025403758567000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nstruct File {\n    name: String,\n    data: String,\n}\nfn main() {\n    let f = File {\n        name: String::from(&quot;readme.md&quot;),\n        data: &quot;Rust By Practice&quot;.to_string(),\n    };\n\n    let _name = f.name;\n\n    println!(&quot;{}, {}&quot;, _name, f.data);\n}`, `7742025403758567000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> File <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n    data<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> f <span class="token operator">=</span> File <span class="token punctuation">{</span>\n        name<span class="token punctuation">:</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"readme.md"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        data<span class="token punctuation">:</span> <span class="token string">"Rust By Practice"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> _name <span class="token operator">=</span> f<span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> _name<span class="token punctuation">,</span> f<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="枚举"><a href="#%E6%9E%9A%E4%B8%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>枚举</h2>\n<h3 id="问题一-12"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>在创建枚举时，你可以使用显式的整数设定枚举成员的值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52707708351815000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nenum Number {\n    Zero,\n    One,\n    Two,\n}\n\nenum Number1 {\n    Zero = 0,\n    One,\n    Two,\n}\n\n// C语言风格的枚举定义\nenum Number2 {\n    Zero = 0.0,\n    One = 1.0,\n    Two = 2.0,\n}\n\n\nfn main() {\n    // 通过 \\`as\\` 可以将枚举值强转为整数类型\n    assert_eq!(Number::One, Number1::One);\n    assert_eq!(Number1::One, Number2::One);\n}`, `52707708351815000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">enum</span> Number <span class="token punctuation">{</span>\n    Zero<span class="token punctuation">,</span>\n    One<span class="token punctuation">,</span>\n    Two<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">enum</span> Number1 <span class="token punctuation">{</span>\n    Zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    One<span class="token punctuation">,</span>\n    Two<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// C语言风格的枚举定义</span>\n<span class="token keyword">enum</span> Number2 <span class="token punctuation">{</span>\n    Zero <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span>\n    One <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">,</span>\n    Two <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 通过 `as` 可以将枚举值强转为整数类型</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>Number<span class="token punctuation">::</span>One<span class="token punctuation">,</span> Number1<span class="token punctuation">::</span>One<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>Number1<span class="token punctuation">::</span>One<span class="token punctuation">,</span> Number2<span class="token punctuation">::</span>One<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-91"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14622756439602180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum Number {\n    Zero,\n    One,\n    Two,\n}\n\nenum Number1 {\n    Zero = 0,\n    One,\n    Two,\n}\n\nenum Number2 {\n    Zero = 0,\n    One = 1,\n    Two = 2,\n}\n\n\nfn main() {\n    assert_eq!(Number::One as u8, Number1::One as u8);\n    assert_eq!(Number1::One as u8, Number2::One as u8);\n}`, `14622756439602180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> Number <span class="token punctuation">{</span>\n    Zero<span class="token punctuation">,</span>\n    One<span class="token punctuation">,</span>\n    Two<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">enum</span> Number1 <span class="token punctuation">{</span>\n    Zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    One<span class="token punctuation">,</span>\n    Two<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">enum</span> Number2 <span class="token punctuation">{</span>\n    Zero <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    One <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    Two <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>Number<span class="token punctuation">::</span>One <span class="token keyword">as</span> u8<span class="token punctuation">,</span> Number1<span class="token punctuation">::</span>One <span class="token keyword">as</span> u8<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>Number1<span class="token punctuation">::</span>One <span class="token keyword">as</span> u8<span class="token punctuation">,</span> Number2<span class="token punctuation">::</span>One <span class="token keyword">as</span> u8<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-12"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>枚举成员可以持有各种类型的值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79934456406677240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msg1 = Message::Move{__}; // 使用x = 1, y = 2 来初始化\n    let msg2 = Message::Write(__); // 使用 &quot;hello, world!&quot; 来初始化\n}`, `79934456406677240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msg1 <span class="token operator">=</span> Message<span class="token punctuation">::</span>Move<span class="token punctuation">{</span>__<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 使用x = 1, y = 2 来初始化</span>\n    <span class="token keyword">let</span> msg2 <span class="token operator">=</span> Message<span class="token punctuation">::</span><span class="token function">Write</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 "hello, world!" 来初始化</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-92"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-92" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99607472855764430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msg1 = Message::Move { x: 1, y: 2 };\n    let msg2 = Message::Write(String::from(&quot;hello, world!&quot;));\n}`, `99607472855764430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msg1 <span class="token operator">=</span> Message<span class="token punctuation">::</span>Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> msg2 <span class="token operator">=</span> Message<span class="token punctuation">::</span><span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-12"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>枚举成员中的值可以使用模式匹配来获取</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15511668274636659000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 仅填空并修复错误\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msg = Message::Move{x: 1, y: 2};\n\n    if let Message::Move{__} = msg {\n        assert_eq!(a, b);\n    } else {\n        panic!(&quot;不要让这行代码运行！&quot;);\n    }\n}`, `15511668274636659000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 仅填空并修复错误</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msg <span class="token operator">=</span> Message<span class="token punctuation">::</span>Move<span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token keyword">let</span> Message<span class="token punctuation">::</span>Move<span class="token punctuation">{</span>__<span class="token punctuation">}</span> <span class="token operator">=</span> msg <span class="token punctuation">{</span>\n        <span class="token function">assert_eq!</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"不要让这行代码运行！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-93"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47263900017067990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msg = Message::Move { x: 1, y: 1 };\n\n    if let Message::Move { x: a, y: b } = msg {\n        assert_eq!(a, b);\n    } else {\n        panic!(&quot;不要让这行代码运行！&quot;);\n    }\n}`, `47263900017067990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msg <span class="token operator">=</span> Message<span class="token punctuation">::</span>Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token keyword">let</span> Message<span class="token punctuation">::</span>Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> a<span class="token punctuation">,</span> y<span class="token punctuation">:</span> b <span class="token punctuation">}</span> <span class="token operator">=</span> msg <span class="token punctuation">{</span>\n        <span class="token function">assert_eq!</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"不要让这行代码运行！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-11"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>使用枚举对类型进行同一化</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67624993496470860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，并修复错误\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msgs: __ = [\n        Message::Quit,\n        Message::Move{x:1, y:3},\n        Message::ChangeColor(255,255,0)\n    ];\n\n    for msg in msgs {\n        show_message(msg)\n    }\n}\n\nfn show_message(msg: Message) {\n    println!(&quot;{}&quot;, msg);\n}`, `67624993496470860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，并修复错误</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msgs<span class="token punctuation">:</span> __ <span class="token operator">=</span> <span class="token punctuation">[</span>\n        Message<span class="token punctuation">::</span>Quit<span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span>Move<span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span><span class="token function">ChangeColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> msg <span class="token keyword">in</span> msgs <span class="token punctuation">{</span>\n        <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> Message<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-94"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-94" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93164167916005100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msgs = [\n        Message::Quit,\n        Message::Move { x: 1, y: 3 },\n        Message::ChangeColor(255, 255, 0),\n    ];\n\n    for msg in msgs {\n        show_message(msg)\n    }\n}\n\nfn show_message(msg: Message) {\n    println!(&quot;{:#?}&quot;, msg);\n}`, `93164167916005100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msgs <span class="token operator">=</span> <span class="token punctuation">[</span>\n        Message<span class="token punctuation">::</span>Quit<span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span>Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span><span class="token function">ChangeColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> msg <span class="token keyword">in</span> msgs <span class="token punctuation">{</span>\n        <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> Message<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:#?}"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-11"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<p>Rust 中没有 null，我们通过 <code class="language-text">Option&lt;T&gt;</code> 枚举来处理值为空的情况</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88394177291905910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空让 \\`println\\` 输出，同时添加一些代码不要让最后一行的 \\`panic\\` 执行到\nfn main() {\n    let five = Some(5);\n    let six = plus_one(five);\n    let none = plus_one(None);\n\n    if let __ = six {\n        println!(&quot;{}&quot;, n)\n    }\n\n    panic!(&quot;不要让这行代码运行！&quot;);\n}\n\nfn plus_one(x: Option<i32>) -> Option<i32> {\n    match x {\n        __ => None,\n        __ => Some(i + 1),\n    }\n}`, `88394177291905910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空让 `println` 输出，同时添加一些代码不要让最后一行的 `panic` 执行到</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> five <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> six <span class="token operator">=</span> <span class="token function">plus_one</span><span class="token punctuation">(</span>five<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> none <span class="token operator">=</span> <span class="token function">plus_one</span><span class="token punctuation">(</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token keyword">let</span> __ <span class="token operator">=</span> six <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"不要让这行代码运行！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">plus_one</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>i32<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> Option<span class="token operator">&lt;</span>i32<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> x <span class="token punctuation">{</span>\n        __ <span class="token operator">=></span> None<span class="token punctuation">,</span>\n        __ <span class="token operator">=></span> <span class="token function">Some</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-95"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16153777107876243000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let five = Some(5);\n    let six = plus_one(five);\n    let none = plus_one(None);\n\n    if let Some(n) = six {\n        println!(&quot;{}&quot;, n);\n        return\n    }\n\n    panic!(&quot;不要让这行代码运行！&quot;);\n}\n\nfn plus_one(x: Option<i32>) -> Option<i32> {\n    match x {\n        None => None,\n        Some(i) => Some(i + 1),\n    }\n}`, `16153777107876243000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> five <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> six <span class="token operator">=</span> <span class="token function">plus_one</span><span class="token punctuation">(</span>five<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> none <span class="token operator">=</span> <span class="token function">plus_one</span><span class="token punctuation">(</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token function">Some</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> six <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"不要让这行代码运行！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">plus_one</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>i32<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> Option<span class="token operator">&lt;</span>i32<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> x <span class="token punctuation">{</span>\n        None <span class="token operator">=></span> None<span class="token punctuation">,</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">Some</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-10"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-10" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>使用枚举来实现链表</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61911426009185510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码运行\nuse crate::List::*;\n\nenum List {\n    // Cons: 链表中包含有值的节点，节点是元组类型，第一个元素是节点的值，第二个元素是指向下一个节点的指针\n    Cons(u32, Box<List>),\n    // Nil: 链表中的最后一个节点，用于说明链表的结束\n    Nil,\n}\n\n// 为枚举实现一些方法\nimpl List {\n    // 创建空的链表\n    fn new() -> List {\n        // 因为没有节点，所以直接返回 Nil 节点\n        // 枚举成员 Nil 的类型是 List\n        Nil\n    }\n\n    // 在老的链表前面新增一个节点，并返回新的链表\n    fn prepend(self, elem: u32) -> __ {\n        Cons(elem, Box::new(self))\n    }\n\n    // 返回链表的长度\n    fn len(&self) -> u32 {\n        match *self {\n            // 这里我们不能拿走 tail 的所有权，因此需要获取它的引用\n            Cons(_, __ tail) => 1 + tail.len(),\n            // 空链表的长度为 0\n            Nil => 0\n        }\n    }\n\n    // 返回链表的字符串表现形式，用于打印输出\n    fn stringify(&self) -> String {\n        match *self {\n            Cons(head, ref tail) => {\n                // 递归生成字符串\n                format!(&quot;{}, {}&quot;, head, tail.__())\n            },\n            Nil => {\n                format!(&quot;Nil&quot;)\n            },\n        }\n    }\n}\n\nfn main() {\n    // 创建一个新的链表(也是空的)\n    let mut list = List::new();\n\n    // 添加一些元素\n    list = list.prepend(1);\n    list = list.prepend(2);\n    list = list.prepend(3);\n\n    // 打印列表的当前状态\n    println!(&quot;链表的长度是: {}&quot;, list.len());\n    println!(&quot;{}&quot;, list.stringify());\n}`, `61911426009185510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码运行</span>\n<span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token punctuation">::</span>List<span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>\n\n<span class="token keyword">enum</span> List <span class="token punctuation">{</span>\n    <span class="token comment">// Cons: 链表中包含有值的节点，节点是元组类型，第一个元素是节点的值，第二个元素是指向下一个节点的指针</span>\n    <span class="token function">Cons</span><span class="token punctuation">(</span>u32<span class="token punctuation">,</span> Box<span class="token operator">&lt;</span>List<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token comment">// Nil: 链表中的最后一个节点，用于说明链表的结束</span>\n    Nil<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 为枚举实现一些方法</span>\n<span class="token keyword">impl</span> List <span class="token punctuation">{</span>\n    <span class="token comment">// 创建空的链表</span>\n    <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> List <span class="token punctuation">{</span>\n        <span class="token comment">// 因为没有节点，所以直接返回 Nil 节点</span>\n        <span class="token comment">// 枚举成员 Nil 的类型是 List</span>\n        Nil\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 在老的链表前面新增一个节点，并返回新的链表</span>\n    <span class="token keyword">fn</span> <span class="token function">prepend</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> elem<span class="token punctuation">:</span> u32<span class="token punctuation">)</span> <span class="token punctuation">-></span> __ <span class="token punctuation">{</span>\n        <span class="token function">Cons</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> Box<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 返回链表的长度</span>\n    <span class="token keyword">fn</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> u32 <span class="token punctuation">{</span>\n        <span class="token keyword">match</span> <span class="token operator">*</span><span class="token keyword">self</span> <span class="token punctuation">{</span>\n            <span class="token comment">// 这里我们不能拿走 tail 的所有权，因此需要获取它的引用</span>\n            <span class="token function">Cons</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> __ tail<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">1</span> <span class="token operator">+</span> tail<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token comment">// 空链表的长度为 0</span>\n            Nil <span class="token operator">=></span> <span class="token number">0</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 返回链表的字符串表现形式，用于打印输出</span>\n    <span class="token keyword">fn</span> <span class="token function">stringify</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n        <span class="token keyword">match</span> <span class="token operator">*</span><span class="token keyword">self</span> <span class="token punctuation">{</span>\n            <span class="token function">Cons</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> <span class="token keyword">ref</span> tail<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token comment">// 递归生成字符串</span>\n                <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> head<span class="token punctuation">,</span> tail<span class="token punctuation">.</span><span class="token function">__</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            Nil <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"Nil"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 创建一个新的链表(也是空的)</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> list <span class="token operator">=</span> List<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 添加一些元素</span>\n    list <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    list <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    list <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 打印列表的当前状态</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"链表的长度是: {}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-96"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47009575262101740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`use crate::List::*;\n\nenum List {\n    Cons(u32, Box<List>),\n    Nil,\n}\n\nimpl List {\n    fn new() -> List {\n        Nil\n    }\n\n    fn prepend(self, elem: u32) -> List {\n        Cons(elem, Box::new(self))\n    }\n\n    fn len(&self) -> u32 {\n        match *self {\n            Cons(_, ref tail) => 1 + tail.len(),\n            Nil => 0\n        }\n    }\n\n    fn stringify(&self) -> String {\n        match *self {\n            Cons(head, ref tail) => {\n                format!(&quot;{}, {}&quot;, head, tail.stringify())\n            },\n            Nil => {\n                format!(&quot;Nil&quot;)\n            },\n        }\n    }\n}\n\nfn main() {\n    let mut list = List::new();\n\n    list = list.prepend(1);\n    list = list.prepend(2);\n    list = list.prepend(3);\n\n    println!(&quot;链表的长度是: {}&quot;, list.len());\n    println!(&quot;{}&quot;, list.stringify());\n}`, `47009575262101740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token punctuation">::</span>List<span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">;</span>\n\n<span class="token keyword">enum</span> List <span class="token punctuation">{</span>\n    <span class="token function">Cons</span><span class="token punctuation">(</span>u32<span class="token punctuation">,</span> Box<span class="token operator">&lt;</span>List<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    Nil<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> List <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> List <span class="token punctuation">{</span>\n        Nil\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">fn</span> <span class="token function">prepend</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> elem<span class="token punctuation">:</span> u32<span class="token punctuation">)</span> <span class="token punctuation">-></span> List <span class="token punctuation">{</span>\n        <span class="token function">Cons</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> Box<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">fn</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> u32 <span class="token punctuation">{</span>\n        <span class="token keyword">match</span> <span class="token operator">*</span><span class="token keyword">self</span> <span class="token punctuation">{</span>\n            <span class="token function">Cons</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> <span class="token keyword">ref</span> tail<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">1</span> <span class="token operator">+</span> tail<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            Nil <span class="token operator">=></span> <span class="token number">0</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">fn</span> <span class="token function">stringify</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> String <span class="token punctuation">{</span>\n        <span class="token keyword">match</span> <span class="token operator">*</span><span class="token keyword">self</span> <span class="token punctuation">{</span>\n            <span class="token function">Cons</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> <span class="token keyword">ref</span> tail<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> head<span class="token punctuation">,</span> tail<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            Nil <span class="token operator">=></span> <span class="token punctuation">{</span>\n                <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"Nil"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> list <span class="token operator">=</span> List<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    list <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    list <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    list <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"链表的长度是: {}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>// TODO 练习到这里</p>\n<h1 id="流程控制"><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>流程控制</h1>\n<h2 id="问题一-13"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44065218651838390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let n = 5;\n\n    if n < 0 {\n        println!(&quot;{} is negative&quot;, n);\n    } __ n > 0 {\n        println!(&quot;{} is positive&quot;, n);\n    } __ {\n        println!(&quot;{} is zero&quot;, n);\n    }\n}`, `44065218651838390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} is negative"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> __ n <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} is positive"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> __ <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} is zero"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-97"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11014994413511592000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let n = 0;\n\n    if n < 0 {\n        println!(&quot;{} is negative&quot;, n);\n    } else if n > 0 {\n        println!(&quot;{} is positive&quot;, n);\n    } else {\n        println!(&quot;{} is zero&quot;, n);\n    }\n}`, `11014994413511592000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} is negative"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} is positive"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} is zero"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题二-13"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h2>\n<p>if / else 可以用作表达式来进行赋值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86816752649308550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let n = 5;\n\n    let big_n =\n        if n < 10 && n > -10 {\n            println!(&quot; 数字太小，先增加 10 倍再说&quot;);\n\n            10 * n\n        } else {\n            println!(&quot;数字太大，我们得让它减半&quot;);\n\n            n / 2.0 ;\n        }\n\n    println!(&quot;{} -> {}&quot;, n, big_n);\n}`, `86816752649308550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> big_n <span class="token operator">=</span>\n        <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">></span> <span class="token operator">-</span><span class="token number">10</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">" 数字太小，先增加 10 倍再说"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token number">10</span> <span class="token operator">*</span> n\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"数字太大，我们得让它减半"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            n <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} -> {}"</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> big_n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-98"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82778715263970480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nfn main() {\n    let n = 11;\n\n    let big_n = if n < 10 && n > -10 {\n        println!(&quot; 数字太小，先增加 10 倍再说&quot;);\n\n        10 * n\n    } else {\n        println!(&quot;数字太大，我们得让它减半&quot;);\n\n        n / 2\n    };\n\n    println!(&quot;{} -> {}&quot;, n, big_n);\n}`, `82778715263970480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> big_n <span class="token operator">=</span> <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">></span> <span class="token operator">-</span><span class="token number">10</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">" 数字太小，先增加 10 倍再说"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token number">10</span> <span class="token operator">*</span> n\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"数字太大，我们得让它减半"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        n <span class="token operator">/</span> <span class="token number">2</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{} -> {}"</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> big_n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题三-13"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h2>\n<p>for in 可以用于迭代一个迭代器，例如序列 a..b</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81337584427595090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    for n in 1..=100 { // 修改此行，让代码工作\n        if n == 100 {\n            panic!(&quot;NEVER LET THIS RUN&quot;)\n        }\n    }\n}`, `81337584427595090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">100</span> <span class="token punctuation">{</span> <span class="token comment">// 修改此行，让代码工作</span>\n        <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">100</span> <span class="token punctuation">{</span>\n            <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"NEVER LET THIS RUN"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-99"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26263847557764920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    for n in 1..100 { // 修改此行，让代码工作\n        if n == 100 {\n            panic!(&quot;NEVER LET THIS RUN&quot;)\n        }\n    }\n}`, `26263847557764920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">..</span><span class="token number">100</span> <span class="token punctuation">{</span> <span class="token comment">// 修改此行，让代码工作</span>\n        <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">100</span> <span class="token punctuation">{</span>\n            <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">"NEVER LET THIS RUN"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题四-12"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73539699934745985000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，不要新增或删除代码行\nfn main() {\n    let names = [String::from(&quot;liming&quot;),String::from(&quot;hanmeimei&quot;)];\n    for name in names {\n        // do something with name...\n    }\n\n    println!(&quot;{:?}&quot;, names);\n\n    let numbers = [1, 2, 3];\n    // numbers中的元素实现了 Copy，因此无需转移所有权\n    for n in numbers {\n        // do something with name...\n    }\n\n    println!(&quot;{:?}&quot;, numbers);\n}`, `73539699934745985000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，不要新增或删除代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"liming"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hanmeimei"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> name <span class="token keyword">in</span> names <span class="token punctuation">{</span>\n        <span class="token comment">// do something with name...</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> names<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// numbers中的元素实现了 Copy，因此无需转移所有权</span>\n    <span class="token keyword">for</span> n <span class="token keyword">in</span> numbers <span class="token punctuation">{</span>\n        <span class="token comment">// do something with name...</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-100"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-100" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1334469658254455800"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，不要新增或删除代码行\nfn main() {\n    let names = [String::from(&quot;liming&quot;), String::from(&quot;hanmeimei&quot;)];\n    for name in &names {\n        // do something with name...\n    }\n\n    println!(&quot;{:?}&quot;, names);\n\n    let numbers = [1, 2, 3];\n    // numbers 中的元素实现了 Copy，因此无需转移所有权\n    for n in numbers {\n        // do something with name...\n    }\n\n    println!(&quot;{:?}&quot;, numbers);\n}`, `1334469658254455800`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，不要新增或删除代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span>String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"liming"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hanmeimei"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> name <span class="token keyword">in</span> <span class="token operator">&amp;</span>names <span class="token punctuation">{</span>\n        <span class="token comment">// do something with name...</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> names<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token comment">// numbers 中的元素实现了 Copy，因此无需转移所有权</span>\n    <span class="token keyword">for</span> n <span class="token keyword">in</span> numbers <span class="token punctuation">{</span>\n        <span class="token comment">// do something with name...</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题五-12"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70539300896976860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let a = [4,3,2,1];\n\n    // 通过索引和值的方式迭代数组 \\`a\\`\n    for (i,v) in a.__ {\n        println!(&quot;第{}个元素是{}&quot;,i+1,v);\n    }\n}`, `70539300896976860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 通过索引和值的方式迭代数组 `a`</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token keyword">in</span> a<span class="token punctuation">.</span>__ <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"第{}个元素是{}"</span><span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-101"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-101" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22595267285848420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let a = [4, 3, 2, 1];\n\n    // 通过索引和值的方式迭代数组 \\`a\\`\n    for (i, v) in a.iter().enumerate() {\n        println!(&quot;第{}个元素是{}&quot;, i + 1, v);\n    }\n}`, `22595267285848420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 通过索引和值的方式迭代数组 `a`</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">in</span> a<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"第{}个元素是{}"</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题六-11"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-11" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h2>\n<p>当条件为 true 时，while 将一直循环</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70934496034588344000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让最后一行的 println! 工作 !\nfn main() {\n    // 一个计数值\n    let mut n = 1;\n\n    // 当条件为真时，不停的循环\n    while n __ 10 {\n        if n % 15 == 0 {\n            println!(&quot;fizzbuzz&quot;);\n        } else if n % 3 == 0 {\n            println!(&quot;fizz&quot;);\n        } else if n % 5 == 0 {\n            println!(&quot;buzz&quot;);\n        } else {\n            println!(&quot;{}&quot;, n);\n        }\n\n\n        __;\n    }\n\n    println!(&quot;n 的值是 {}, 循环结束&quot;,n);\n}`, `70934496034588344000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让最后一行的 println! 工作 !</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 一个计数值</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 当条件为真时，不停的循环</span>\n    <span class="token keyword">while</span> n __ <span class="token number">10</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">15</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"fizzbuzz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"fizz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"buzz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n\n        __<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"n 的值是 {}, 循环结束"</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-102"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-102" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62508567928184046000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让最后一行的  println! 工作 !\nfn main() {\n    // 一个计数值\n    let mut n = 1;\n\n    // 当条件为真时，不停的循环\n    while n < 10 {\n        if n % 15 == 0 {\n            println!(&quot;fizzbuzz&quot;);\n        } else if n % 3 == 0 {\n            println!(&quot;fizz&quot;);\n        } else if n % 5 == 0 {\n            println!(&quot;buzz&quot;);\n        } else {\n            println!(&quot;{}&quot;, n);\n        }\n\n        n = n + 1;\n    }\n\n    println!(&quot;n 的值是 {}, 循环结束&quot;, n);\n}`, `62508567928184046000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让最后一行的  println! 工作 !</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 一个计数值</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 当条件为真时，不停的循环</span>\n    <span class="token keyword">while</span> n <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">15</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"fizzbuzz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"fizz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> n <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"buzz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"n 的值是 {}, 循环结束"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题七-6"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h2>\n<p>使用 break 可以跳出循环</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43250006501018000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，不要修改其它代码\nfn main() {\n    let mut n = 0;\n    for i in 0..=100 {\n       if n == 66 {\n           __\n       }\n       n += 1;\n    }\n\n    assert_eq!(n, 66);\n}`, `43250006501018000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，不要修改其它代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..=</span><span class="token number">100</span> <span class="token punctuation">{</span>\n       <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">66</span> <span class="token punctuation">{</span>\n           __\n       <span class="token punctuation">}</span>\n       n <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-103"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-103" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41418546806838540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，不要修改其它代码\nfn main() {\n    let mut n = 0;\n    for i in 0..=100 {\n        if n == 66 {\n            break;\n        }\n        n += 1;\n    }\n\n    assert_eq!(n, 66);\n}`, `41418546806838540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，不要修改其它代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..=</span><span class="token number">100</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">66</span> <span class="token punctuation">{</span>\n            <span class="token keyword">break</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        n <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题八-6"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h2>\n<p>continue 会结束当次循环并立即开始下一次循环</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47487264893796000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，不要修改其它代码\nfn main() {\n    let mut n = 0;\n    for i in 0..=100 {\n       if n != 66 {\n           n+=1;\n           __;\n       }\n\n       __\n    }\n\n    assert_eq!(n, 66);\n}`, `47487264893796000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，不要修改其它代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..=</span><span class="token number">100</span> <span class="token punctuation">{</span>\n       <span class="token keyword">if</span> n <span class="token operator">!=</span> <span class="token number">66</span> <span class="token punctuation">{</span>\n           n<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">;</span>\n           __<span class="token punctuation">;</span>\n       <span class="token punctuation">}</span>\n\n       __\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-104"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-104" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6614494383991976000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，不要修改其它代码\nfn main() {\n    let mut n = 0;\n    for i in 0..=100 {\n        if n != 66 {\n            n += 1;\n            continue;\n        }\n    }\n\n    assert_eq!(n, 66);\n}`, `6614494383991976000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，不要修改其它代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..=</span><span class="token number">100</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> n <span class="token operator">!=</span> <span class="token number">66</span> <span class="token punctuation">{</span>\n            n <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n            <span class="token keyword">continue</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题九-6"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h2>\n<p>loop 一般都需要配合 break 或 continue 一起使用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35619583670625477000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，不要修改其它代码\nfn main() {\n    let mut count = 0u32;\n\n    println!(&quot;Let\'s count until infinity!&quot;);\n\n    // 无限循环\n    loop {\n        count += 1;\n\n        if count == 3 {\n            println!(&quot;three&quot;);\n\n            // 跳过当此循环的剩余代码\n            __;\n        }\n\n        println!(&quot;{}&quot;, count);\n\n        if count == 5 {\n            println!(&quot;OK, that\'s enough&quot;);\n\n            __;\n        }\n    }\n\n    assert_eq!(count, 5);\n}`, `35619583670625477000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，不要修改其它代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0u32</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Let\'s count until infinity!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 无限循环</span>\n    <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> count <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"three"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// 跳过当此循环的剩余代码</span>\n            __<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> count <span class="token operator">==</span> <span class="token number">5</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"OK, that\'s enough"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            __<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-105"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-105" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25880501861275017000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，不要修改其它代码\nfn main() {\n    let mut count = 0u32;\n\n    println!(&quot;Let\'s count until infinity!&quot;);\n\n    // 无限循环\n    loop {\n        count += 1;\n\n        if count == 3 {\n            println!(&quot;three&quot;);\n\n            // 跳过当此循环的剩余代码\n            continue;\n        }\n\n        println!(&quot;{}&quot;, count);\n\n        if count == 5 {\n            println!(&quot;OK, that\'s enough&quot;);\n\n            break;\n        }\n    }\n\n    assert_eq!(count, 5);\n}`, `25880501861275017000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，不要修改其它代码</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0u32</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Let\'s count until infinity!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 无限循环</span>\n    <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> count <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"three"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// 跳过当此循环的剩余代码</span>\n            <span class="token keyword">continue</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> count <span class="token operator">==</span> <span class="token number">5</span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"OK, that\'s enough"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token keyword">break</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题十-3"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十</h2>\n<p>loop 是一个表达式，因此我们可以配合 break 来返回一个值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82044048478695200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let mut counter = 0;\n\n    let result = loop {\n        counter += 1;\n\n        if counter == 10 {\n            __;\n        }\n    };\n\n    assert_eq!(result, 20);\n}`, `82044048478695200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> counter <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">{</span>\n            __<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-106"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-106" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62912116424703025000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let mut counter = 0;\n\n    let result = loop {\n        counter += 1;\n\n        if counter == 10 {\n            break counter * 2;\n        }\n    };\n\n    assert_eq!(result, 20);\n}`, `62912116424703025000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> counter <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">{</span>\n            <span class="token keyword">break</span> counter <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题十一-2"><a href="#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%80-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题十一</h2>\n<p>当有多层循环时，你可以使用 continue 或 break 来控制外层的循环。要实现这一点，外部的循环必须拥有一个标签 <code class="language-text">&#39;label</code>, 然后在 break 或 continue 时指定该标签</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7307526030555467000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let mut count = 0;\n    \'outer: loop {\n        \'inner1: loop {\n            if count >= 20 {\n                // 这只会跳出 inner1 循环\n                break \'inner1; // 这里使用 \\`break\\` 也是一样的\n            }\n            count += 2;\n        }\n\n        count += 5;\n\n        \'inner2: loop {\n            if count >= 30 {\n                break \'outer;\n            }\n\n            continue \'outer;\n        }\n    }\n\n    assert!(count == __)\n}`, `7307526030555467000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token lifetime-annotation symbol">\'outer:</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        <span class="token lifetime-annotation symbol">\'inner1:</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> count <span class="token operator">>=</span> <span class="token number">20</span> <span class="token punctuation">{</span>\n                <span class="token comment">// 这只会跳出 inner1 循环</span>\n                <span class="token keyword">break</span> <span class="token lifetime-annotation symbol">\'inner1;</span> <span class="token comment">// 这里使用 `break` 也是一样的</span>\n            <span class="token punctuation">}</span>\n            count <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        count <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n        <span class="token lifetime-annotation symbol">\'inner2:</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> count <span class="token operator">>=</span> <span class="token number">30</span> <span class="token punctuation">{</span>\n                <span class="token keyword">break</span> <span class="token lifetime-annotation symbol">\'outer;</span>\n            <span class="token punctuation">}</span>\n\n            <span class="token keyword">continue</span> <span class="token lifetime-annotation symbol">\'outer;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>count <span class="token operator">==</span> __<span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-107"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-107" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91378491521886620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn main() {\n    let mut count = 0;\n    \'outer: loop {\n        \'inner1: loop {\n            if count >= 20 {\n                // 这只会跳出 inner1 循环\n                break \'inner1; // 这里使用 \\`break\\` 也是一样的\n            }\n            count += 2;\n        }\n\n        count += 5;\n\n        \'inner2: loop {\n            if count >= 30 {\n                break \'outer;\n            }\n\n            continue \'outer;\n        }\n    }\n\n    assert!(count == 30)\n}`, `91378491521886620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token lifetime-annotation symbol">\'outer:</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n        <span class="token lifetime-annotation symbol">\'inner1:</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> count <span class="token operator">>=</span> <span class="token number">20</span> <span class="token punctuation">{</span>\n                <span class="token comment">// 这只会跳出 inner1 循环</span>\n                <span class="token keyword">break</span> <span class="token lifetime-annotation symbol">\'inner1;</span> <span class="token comment">// 这里使用 `break` 也是一样的</span>\n            <span class="token punctuation">}</span>\n            count <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        count <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n\n        <span class="token lifetime-annotation symbol">\'inner2:</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> count <span class="token operator">>=</span> <span class="token number">30</span> <span class="token punctuation">{</span>\n                <span class="token keyword">break</span> <span class="token lifetime-annotation symbol">\'outer;</span>\n            <span class="token punctuation">}</span>\n\n            <span class="token keyword">continue</span> <span class="token lifetime-annotation symbol">\'outer;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert!</span><span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">30</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="模式匹配"><a href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式匹配</h1>\n<h2 id="match-和-if-let"><a href="#match-%E5%92%8C-if-let" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>match 和 if let</h2>\n<h3 id="问题一-14"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69269372571275530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Direction {\n    East,\n    West,\n    North,\n    South,\n}\n\nfn main() {\n    let dire = Direction::South;\n    match dire {\n        Direction::East => println!(&quot;East&quot;),\n        __  => { // 在这里匹配 South 或 North\n            println!(&quot;South or North&quot;);\n        },\n        _ => println!(__),\n    };\n}`, `69269372571275530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>\n    East<span class="token punctuation">,</span>\n    West<span class="token punctuation">,</span>\n    North<span class="token punctuation">,</span>\n    South<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> dire <span class="token operator">=</span> Direction<span class="token punctuation">::</span>South<span class="token punctuation">;</span>\n    <span class="token keyword">match</span> dire <span class="token punctuation">{</span>\n        Direction<span class="token punctuation">::</span>East <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"East"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        __  <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// 在这里匹配 South 或 North</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"South or North"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        _ <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-108"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-108" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79453230559391860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Direction {\n    East,\n    West,\n    North,\n    South,\n}\n\nfn main() {\n    let dire = Direction::South;\n    match dire {\n        Direction::East => println!(&quot;East&quot;),\n        Direction::South | Direction::North => {\n            // 在这里匹配 South 或 North\n            println!(&quot;South or North&quot;);\n        }\n        _ => println!(&quot;West&quot;),\n    };\n}`, `79453230559391860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>\n    East<span class="token punctuation">,</span>\n    West<span class="token punctuation">,</span>\n    North<span class="token punctuation">,</span>\n    South<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> dire <span class="token operator">=</span> Direction<span class="token punctuation">::</span>South<span class="token punctuation">;</span>\n    <span class="token keyword">match</span> dire <span class="token punctuation">{</span>\n        Direction<span class="token punctuation">::</span>East <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"East"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        Direction<span class="token punctuation">::</span>South <span class="token operator">|</span> Direction<span class="token punctuation">::</span>North <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token comment">// 在这里匹配 South 或 North</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"South or North"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        _ <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"West"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-14"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>match 是一个表达式，因此可以用在赋值语句中</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6865537680882672000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let boolean = true;\n\n    // 使用 match 表达式填空，并满足以下条件\n    //\n    // boolean = true => binary = 1\n    // boolean = false => binary = 0\n    let binary = __;\n\n    assert_eq!(binary, 1);\n}`, `6865537680882672000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> boolean <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 使用 match 表达式填空，并满足以下条件</span>\n    <span class="token comment">//</span>\n    <span class="token comment">// boolean = true => binary = 1</span>\n    <span class="token comment">// boolean = false => binary = 0</span>\n    <span class="token keyword">let</span> binary <span class="token operator">=</span> __<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>binary<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-109"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-109" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8786240898126007000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let boolean = true;\n\n    // 使用 match 表达式填空，并满足以下条件\n    //\n    // boolean = true => binary = 1\n    // boolean = false => binary = 0\n    let binary = match boolean {\n        true => 1,\n        false => 0,\n    };\n\n    assert_eq!(binary, 1);\n}`, `8786240898126007000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> boolean <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 使用 match 表达式填空，并满足以下条件</span>\n    <span class="token comment">//</span>\n    <span class="token comment">// boolean = true => binary = 1</span>\n    <span class="token comment">// boolean = false => binary = 0</span>\n    <span class="token keyword">let</span> binary <span class="token operator">=</span> <span class="token keyword">match</span> boolean <span class="token punctuation">{</span>\n        <span class="token keyword">true</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">,</span>\n        <span class="token keyword">false</span> <span class="token operator">=></span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>binary<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-14"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>使用 match 匹配出枚举成员持有的值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50006419283315380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msgs = [\n        Message::Quit,\n        Message::Move{x:1, y:3},\n        Message::ChangeColor(255,255,0)\n    ];\n\n    for msg in msgs {\n        show_message(msg)\n    }\n}\n\nfn show_message(msg: Message) {\n    match msg {\n        __ => { // 这里匹配 Message::Move\n            assert_eq!(a, 1);\n            assert_eq!(b, 3);\n        },\n        Message::ChangeColor(_, g, b) => {\n            assert_eq!(g, __);\n            assert_eq!(b, __);\n        }\n        __ => println!(&quot;no data in these variants&quot;)\n    }\n}`, `50006419283315380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msgs <span class="token operator">=</span> <span class="token punctuation">[</span>\n        Message<span class="token punctuation">::</span>Quit<span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span>Move<span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span><span class="token function">ChangeColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> msg <span class="token keyword">in</span> msgs <span class="token punctuation">{</span>\n        <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> Message<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> msg <span class="token punctuation">{</span>\n        __ <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// 这里匹配 Message::Move</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span><span class="token function">ChangeColor</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> __<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        __ <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"no data in these variants"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-110"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-110" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51662789708162870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nfn main() {\n    let msgs = [\n        Message::Quit,\n        Message::Move { x: 1, y: 3 },\n        Message::ChangeColor(255, 255, 0),\n    ];\n\n    for msg in msgs {\n        show_message(msg)\n    }\n}\n\nfn show_message(msg: Message) {\n    match msg {\n        Message::Move { x: a, y: b } => {\n            // 这里匹配 Message::Move\n            assert_eq!(a, 1);\n            assert_eq!(b, 3);\n        }\n        Message::ChangeColor(_, g, b) => {\n            assert_eq!(g, 255);\n            assert_eq!(b, 0);\n        }\n        __ => println!(&quot;no data in these variants&quot;),\n    }\n}`, `51662789708162870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Quit<span class="token punctuation">,</span>\n    Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function">Write</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token function">ChangeColor</span><span class="token punctuation">(</span>i32<span class="token punctuation">,</span> i32<span class="token punctuation">,</span> i32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msgs <span class="token operator">=</span> <span class="token punctuation">[</span>\n        Message<span class="token punctuation">::</span>Quit<span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span>Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span><span class="token function">ChangeColor</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">for</span> msg <span class="token keyword">in</span> msgs <span class="token punctuation">{</span>\n        <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">show_message</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> Message<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> msg <span class="token punctuation">{</span>\n        Message<span class="token punctuation">::</span>Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> a<span class="token punctuation">,</span> y<span class="token punctuation">:</span> b <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token comment">// 这里匹配 Message::Move</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        Message<span class="token punctuation">::</span><span class="token function">ChangeColor</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        __ <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"no data in these variants"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-13"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>matches! 看起来像 match, 但是它可以做一些特别的事情</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80135921290869900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let alphabets = [\'a\', \'E\', \'Z\', \'0\', \'x\', \'9\' , \'Y\'];\n\n    // 使用 \\`matches\\` 填空\n    for ab in alphabets {\n        assert!(__)\n    }\n}`, `80135921290869900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> alphabets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'a\'</span><span class="token punctuation">,</span> <span class="token char string">\'E\'</span><span class="token punctuation">,</span> <span class="token char string">\'Z\'</span><span class="token punctuation">,</span> <span class="token char string">\'0\'</span><span class="token punctuation">,</span> <span class="token char string">\'x\'</span><span class="token punctuation">,</span> <span class="token char string">\'9\'</span> <span class="token punctuation">,</span> <span class="token char string">\'Y\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 使用 `matches` 填空</span>\n    <span class="token keyword">for</span> ab <span class="token keyword">in</span> alphabets <span class="token punctuation">{</span>\n        <span class="token function">assert!</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-111"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-111" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85452099594791780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let alphabets = [\'a\', \'E\', \'Z\', \'0\', \'x\', \'9\', \'Y\'];\n\n    // 使用 \\`matches\\` 填空\n    for ab in alphabets {\n        assert!(matches!(ab, \'a\'..=\'z\' | \'A\'..=\'Z\' | \'0\'..=\'9\'))\n    }\n}`, `85452099594791780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> alphabets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char string">\'a\'</span><span class="token punctuation">,</span> <span class="token char string">\'E\'</span><span class="token punctuation">,</span> <span class="token char string">\'Z\'</span><span class="token punctuation">,</span> <span class="token char string">\'0\'</span><span class="token punctuation">,</span> <span class="token char string">\'x\'</span><span class="token punctuation">,</span> <span class="token char string">\'9\'</span><span class="token punctuation">,</span> <span class="token char string">\'Y\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 使用 `matches` 填空</span>\n    <span class="token keyword">for</span> ab <span class="token keyword">in</span> alphabets <span class="token punctuation">{</span>\n        <span class="token function">assert!</span><span class="token punctuation">(</span><span class="token function">matches!</span><span class="token punctuation">(</span>ab<span class="token punctuation">,</span> <span class="token char string">\'a\'</span><span class="token punctuation">..=</span><span class="token char string">\'z\'</span> <span class="token operator">|</span> <span class="token char string">\'A\'</span><span class="token punctuation">..=</span><span class="token char string">\'Z\'</span> <span class="token operator">|</span> <span class="token char string">\'0\'</span><span class="token punctuation">..=</span><span class="token char string">\'9\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-13"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29583087672181674000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum MyEnum {\n    Foo,\n    Bar\n}\n\nfn main() {\n    let mut count = 0;\n\n    let v = vec![MyEnum::Foo,MyEnum::Bar,MyEnum::Foo];\n    for e in v {\n        if e == MyEnum::Foo { // 修复错误，只能修改本行代码\n            count += 1;\n        }\n    }\n\n    assert_eq!(count, 2);\n}`, `29583087672181674000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> MyEnum <span class="token punctuation">{</span>\n    Foo<span class="token punctuation">,</span>\n    Bar\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">vec!</span><span class="token punctuation">[</span>MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">,</span>MyEnum<span class="token punctuation">::</span>Bar<span class="token punctuation">,</span>MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> e <span class="token keyword">in</span> v <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> e <span class="token operator">==</span> MyEnum<span class="token punctuation">::</span>Foo <span class="token punctuation">{</span> <span class="token comment">// 修复错误，只能修改本行代码</span>\n            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-112"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-112" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64918663047197800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum MyEnum {\n    Foo,\n    Bar\n}\n\nfn main() {\n    let mut count = 0;\n\n    let v = vec![MyEnum::Foo,MyEnum::Bar,MyEnum::Foo];\n    for e in v {\n        if matches!(e, MyEnum::Foo) { // 修复错误，只能修改本行代码\n            count += 1;\n        }\n    }\n\n    assert_eq!(count, 2);\n}`, `64918663047197800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> MyEnum <span class="token punctuation">{</span>\n    Foo<span class="token punctuation">,</span>\n    Bar\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">vec!</span><span class="token punctuation">[</span>MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">,</span>MyEnum<span class="token punctuation">::</span>Bar<span class="token punctuation">,</span>MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> e <span class="token keyword">in</span> v <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token function">matches!</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 修复错误，只能修改本行代码</span>\n            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45407582809019335000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum MyEnum {\n    Foo,\n    Bar\n}\n\nfn main() {\n    let mut count = 0;\n\n    let v = vec![MyEnum::Foo,MyEnum::Bar,MyEnum::Foo];\n    for e in v {\n        if let MyEnum::Foo = e { // 修复错误，只能修改本行代码\n            count += 1;\n        }\n    }\n\n    assert_eq!(count, 2);\n}`, `45407582809019335000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> MyEnum <span class="token punctuation">{</span>\n    Foo<span class="token punctuation">,</span>\n    Bar\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">vec!</span><span class="token punctuation">[</span>MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">,</span>MyEnum<span class="token punctuation">::</span>Bar<span class="token punctuation">,</span>MyEnum<span class="token punctuation">::</span>Foo<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">for</span> e <span class="token keyword">in</span> v <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token keyword">let</span> MyEnum<span class="token punctuation">::</span>Foo <span class="token operator">=</span> e <span class="token punctuation">{</span> <span class="token comment">// 修复错误，只能修改本行代码</span>\n            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-12"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-12" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>在有些时候, 使用 match 匹配枚举有些太重了，此时 if let 就非常适合</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30727654622267720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let o = Some(7);\n\n    // 移除整个 \\`match\\` 语句块，使用 \\`if let\\` 替代\n    match o {\n        Some(i) => {\n            println!(&quot;This is a really long string and \\`{:?}\\`&quot;, i);\n        }\n        _ => {}\n    };\n}`, `30727654622267720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 移除整个 `match` 语句块，使用 `if let` 替代</span>\n    <span class="token keyword">match</span> o <span class="token punctuation">{</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"This is a really long string and `{:?}`"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        _ <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-113"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-113" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63448461443104030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {\n    let o = Some(7);\n\n    if let Some(i) = o {\n        println!(&quot;This is a really long string and \\`{:?}\\`&quot;, i);\n    }\n}`, `63448461443104030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token function">Some</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span> o <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"This is a really long string and `{:?}`"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-7"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77503234751152060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Foo {\n    Bar(u8)\n}\n\nfn main() {\n    let a = Foo::Bar(1);\n\n    __ {\n        println!(&quot;foobar 持有的值是: {}&quot;, i);\n    }\n}`, `77503234751152060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Foo <span class="token punctuation">{</span>\n    <span class="token function">Bar</span><span class="token punctuation">(</span>u8<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> a <span class="token operator">=</span> Foo<span class="token punctuation">::</span><span class="token function">Bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    __ <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"foobar 持有的值是: {}"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-114"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-114" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55357903937859330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nenum Foo {\n    Bar(u8),\n}\n\nfn main() {\n    let a = Foo::Bar(1);\n\n    if let Foo::Bar(i) = a {\n        println!(&quot;foobar 持有的值是: {}&quot;, i);\n    }\n}`, `55357903937859330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">enum</span> Foo <span class="token punctuation">{</span>\n    <span class="token function">Bar</span><span class="token punctuation">(</span>u8<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> a <span class="token operator">=</span> Foo<span class="token punctuation">::</span><span class="token function">Bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token keyword">let</span> Foo<span class="token punctuation">::</span><span class="token function">Bar</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"foobar 持有的值是: {}"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题八-7"><a href="#%E9%97%AE%E9%A2%98%E5%85%AB-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题八</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42226035762364940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum Foo {\n    Bar,\n    Baz,\n    Qux(u32)\n}\n\nfn main() {\n    let a = Foo::Qux(10);\n\n    // 移除以下代码，使用 \\`match\\` 代替\n    if let Foo::Bar = a {\n        println!(&quot;match foo::bar&quot;)\n    } else if let Foo::Baz = a {\n        println!(&quot;match foo::baz&quot;)\n    } else {\n        println!(&quot;match others&quot;)\n    }\n}`, `42226035762364940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> Foo <span class="token punctuation">{</span>\n    Bar<span class="token punctuation">,</span>\n    Baz<span class="token punctuation">,</span>\n    <span class="token function">Qux</span><span class="token punctuation">(</span>u32<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> a <span class="token operator">=</span> Foo<span class="token punctuation">::</span><span class="token function">Qux</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 移除以下代码，使用 `match` 代替</span>\n    <span class="token keyword">if</span> <span class="token keyword">let</span> Foo<span class="token punctuation">::</span>Bar <span class="token operator">=</span> a <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match foo::bar"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token keyword">let</span> Foo<span class="token punctuation">::</span>Baz <span class="token operator">=</span> a <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match foo::baz"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match others"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-115"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-115" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6310673896097163000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`enum Foo {\n    Bar,\n    Baz,\n    Qux(u32),\n}\n\nfn main() {\n    let a = Foo::Qux(10);\n\n    match a {\n        Foo::Bar => println!(&quot;match foo::bar&quot;),\n        Foo::Baz => println!(&quot;match foo::baz&quot;),\n        _ => println!(&quot;match others&quot;),\n    }\n}`, `6310673896097163000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">enum</span> Foo <span class="token punctuation">{</span>\n    Bar<span class="token punctuation">,</span>\n    Baz<span class="token punctuation">,</span>\n    <span class="token function">Qux</span><span class="token punctuation">(</span>u32<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> a <span class="token operator">=</span> Foo<span class="token punctuation">::</span><span class="token function">Qux</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> a <span class="token punctuation">{</span>\n        Foo<span class="token punctuation">::</span>Bar <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match foo::bar"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        Foo<span class="token punctuation">::</span>Baz <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match foo::baz"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        _ <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match others"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题九-7"><a href="#%E9%97%AE%E9%A2%98%E4%B9%9D-7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题九</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51137505577883940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 就地修复错误\nfn main() {\n    let age = Some(30);\n    if let Some(age) = age { // 创建一个新的变量，该变量与之前的 \\`age\\` 变量同名\n       assert_eq!(age, Some(30));\n    } // 新的 \\`age\\` 变量在这里超出作用域\n\n    match age {\n        // \\`match\\` 也能实现变量遮蔽\n        Some(age) =>  println!(&quot;age 是一个新的变量，它的值是 {}&quot;,age),\n        _ => ()\n    }\n }`, `51137505577883940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 就地修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token function">Some</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token operator">=</span> age <span class="token punctuation">{</span> <span class="token comment">// 创建一个新的变量，该变量与之前的 `age` 变量同名</span>\n       <span class="token function">assert_eq!</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token comment">// 新的 `age` 变量在这里超出作用域</span>\n\n    <span class="token keyword">match</span> age <span class="token punctuation">{</span>\n        <span class="token comment">// `match` 也能实现变量遮蔽</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token operator">=></span>  <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"age 是一个新的变量，它的值是 {}"</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        _ <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-116"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-116" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48450493301224000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 就地修复错误\nfn main() {\n    let age = Some(30);\n    if let Some(age) = age { // 创建一个新的变量，该变量与之前的 \\`age\\` 变量同名\n        assert_eq!(age, 30);\n    } // 新的 \\`age\\` 变量在这里超出作用域\n\n    match age {\n        // \\`match\\` 也能实现变量遮蔽\n        Some(age) => println!(&quot;age 是一个新的变量，它的值是 {}&quot;, age),\n        _ => (),\n    }\n}`, `48450493301224000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 就地修复错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token function">Some</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token operator">=</span> age <span class="token punctuation">{</span> <span class="token comment">// 创建一个新的变量，该变量与之前的 `age` 变量同名</span>\n        <span class="token function">assert_eq!</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token comment">// 新的 `age` 变量在这里超出作用域</span>\n\n    <span class="token keyword">match</span> age <span class="token punctuation">{</span>\n        <span class="token comment">// `match` 也能实现变量遮蔽</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"age 是一个新的变量，它的值是 {}"</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        _ <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="模式"><a href="#%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模式</h2>\n<h3 id="问题一-15"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>使用 | 可以匹配多个值, 而使用 ..= 可以匹配一个闭区间的数值序列</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77794662016612160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {}\nfn match_number(n: i32) {\n    match n {\n        // 匹配一个单独的值\n        1 => println!(&quot;One!&quot;),\n        // 使用 \\`|\\` 填空，不要使用 \\`..\\` 或 \\`..=\\`\n        __ => println!(&quot;match 2 -> 5&quot;),\n        // 匹配一个闭区间的数值序列\n        6..=10 => {\n            println!(&quot;match 6 -> 10&quot;)\n        },\n        _ => {\n            println!(&quot;match 11 -> +infinite&quot;)\n        }\n    }\n}`, `77794662016612160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">match_number</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> n <span class="token punctuation">{</span>\n        <span class="token comment">// 匹配一个单独的值</span>\n        <span class="token number">1</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"One!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token comment">// 使用 `|` 填空，不要使用 `..` 或 `..=`</span>\n        __ <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match 2 -> 5"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token comment">// 匹配一个闭区间的数值序列</span>\n        <span class="token number">6</span><span class="token punctuation">..=</span><span class="token number">10</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match 6 -> 10"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        _ <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match 11 -> +infinite"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-117"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-117" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28642547337519940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn main() {}\nfn match_number(n: i32) {\n    match n {\n        // 匹配一个单独的值\n        1 => println!(&quot;One!&quot;),\n        // 使用 \\`|\\` 填空，不要使用 \\`..\\` 或 \\`..=\\`\n        2 | 3 | 4 | 5 => println!(&quot;match 2 -> 5&quot;),\n        // 匹配一个闭区间的数值序列\n        6..=10 => {\n            println!(&quot;match 6 -> 10&quot;)\n        }\n        _ => {\n            println!(&quot;match 11 -> +infinite&quot;)\n        }\n    }\n}`, `28642547337519940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">match_number</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">match</span> n <span class="token punctuation">{</span>\n        <span class="token comment">// 匹配一个单独的值</span>\n        <span class="token number">1</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"One!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token comment">// 使用 `|` 填空，不要使用 `..` 或 `..=`</span>\n        <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match 2 -> 5"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token comment">// 匹配一个闭区间的数值序列</span>\n        <span class="token number">6</span><span class="token punctuation">..=</span><span class="token number">10</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match 6 -> 10"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        _ <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"match 11 -> +infinite"</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-15"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>@ 操作符可以让我们将一个与模式相匹配的值绑定到新的变量上</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20234724590140617000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    // 填空，让 p 匹配第二个分支\n    let p = Point { x: __, y: __ };\n\n    match p {\n        Point { x, y: 0 } => println!(&quot;On the x axis at {}&quot;, x),\n        // 第二个分支\n        Point { x: 0..=5, y: y@ (10 | 20 | 30) } => println!(&quot;On the y axis at {}&quot;, y),\n        Point { x, y } => println!(&quot;On neither axis: ({}, {})&quot;, x, y),\n    }\n}`, `20234724590140617000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Point <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> i32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 填空，让 p 匹配第二个分支</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> __<span class="token punctuation">,</span> y<span class="token punctuation">:</span> __ <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> p <span class="token punctuation">{</span>\n        Point <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"On the x axis at {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token comment">// 第二个分支</span>\n        Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">..=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> y<span class="token operator">@</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">20</span> <span class="token operator">|</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"On the y axis at {}"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        Point <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"On neither axis: ({}, {})"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-118"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-118" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69067296259535960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    // 填空，让 p 匹配第二个分支\n    let p = Point { x: 0, y: 10 };\n\n    match p {\n        Point { x, y: 0 } => println!(&quot;On the x axis at {}&quot;, x),\n        // 第二个分支\n        Point { x: 0..=5, y: y@ (10 | 20 | 30) } => println!(&quot;On the y axis at {}&quot;, y),\n        Point { x, y } => println!(&quot;On neither axis: ({}, {})&quot;, x, y),\n    }\n}`, `69067296259535960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Point <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> i32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 填空，让 p 匹配第二个分支</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> p <span class="token punctuation">{</span>\n        Point <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"On the x axis at {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token comment">// 第二个分支</span>\n        Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">..=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> y<span class="token operator">@</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">20</span> <span class="token operator">|</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"On the y axis at {}"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        Point <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"On neither axis: ({}, {})"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-15"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7432325498932712000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nenum Message {\n    Hello { id: i32 },\n}\n\nfn main() {\n    let msg = Message::Hello { id: 5 };\n\n    match msg {\n        Message::Hello {\n            id:  3..=7,\n        } => println!(&quot;id 值的范围在 [3, 7] 之间: {}&quot;, id),\n        Message::Hello { id: newid@10 | 11 | 12 } => {\n            println!(&quot;id 值的范围在 [10, 12] 之间: {}&quot;, newid)\n        }\n        Message::Hello { id } => println!(&quot;Found some other id: {}&quot;, id),\n    }\n}`, `7432325498932712000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Hello <span class="token punctuation">{</span> id<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msg <span class="token operator">=</span> Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> msg <span class="token punctuation">{</span>\n        Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span>\n            id<span class="token punctuation">:</span>  <span class="token number">3</span><span class="token punctuation">..=</span><span class="token number">7</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"id 值的范围在 [3, 7] 之间: {}"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span> id<span class="token punctuation">:</span> newid<span class="token operator">@</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> <span class="token number">12</span> <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"id 值的范围在 [10, 12] 之间: {}"</span><span class="token punctuation">,</span> newid<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Found some other id: {}"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-119"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-119" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75453551266168300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nenum Message {\n    Hello { id: i32 },\n}\n\nfn main() {\n    let msg = Message::Hello { id: 5 };\n\n    match msg {\n        Message::Hello { id: id @ 3..=7 } => println!(&quot;id 值的范围在 [3, 7] 之间: {}&quot;, id),\n        Message::Hello {\n            id: newid @ (10 | 11 | 12),\n        } => {\n            println!(&quot;id 值的范围在 [10, 12] 之间: {}&quot;, newid)\n        }\n        Message::Hello { id } => println!(&quot;Found some other id: {}&quot;, id),\n    }\n}`, `75453551266168300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>\n    Hello <span class="token punctuation">{</span> id<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> msg <span class="token operator">=</span> Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> msg <span class="token punctuation">{</span>\n        Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span> id<span class="token punctuation">:</span> id <span class="token operator">@</span> <span class="token number">3</span><span class="token punctuation">..=</span><span class="token number">7</span> <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"id 值的范围在 [3, 7] 之间: {}"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span>\n            id<span class="token punctuation">:</span> newid <span class="token operator">@</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"id 值的范围在 [10, 12] 之间: {}"</span><span class="token punctuation">,</span> newid<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        Message<span class="token punctuation">::</span>Hello <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Found some other id: {}"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-14"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p>匹配守卫（match guard）是一个位于 match 分支模式之后的额外 if 条件，它能为分支模式提供更进一步的匹配条件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66862309527631634000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空让代码工作，必须使用 \\`split\\`\nfn main() {\n    let num = Some(4);\n    let split = 5;\n    match num {\n        Some(x) __ => assert!(x < split),\n        Some(x) => assert!(x >= split),\n        None => (),\n    }\n}`, `66862309527631634000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空让代码工作，必须使用 `split`</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> split <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">match</span> num <span class="token punctuation">{</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> __ <span class="token operator">=></span> <span class="token function">assert!</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> split<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">assert!</span><span class="token punctuation">(</span>x <span class="token operator">>=</span> split<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        None <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-120"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-120" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64827045743165450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空让代码工作，必须使用 \\`split\\`\nfn main() {\n    let num = Some(4);\n    let split = 5;\n    match num {\n        Some(x) if (x < split) => assert!(x < split),\n        Some(x) => assert!(x >= split),\n        None => (),\n    }\n}`, `64827045743165450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空让代码工作，必须使用 `split`</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> split <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n    <span class="token keyword">match</span> num <span class="token punctuation">{</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> split<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">assert!</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> split<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token function">Some</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">assert!</span><span class="token punctuation">(</span>x <span class="token operator">>=</span> split<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        None <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-14"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<p>使用 .. 忽略一部分值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37518076300844580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码工作\nfn main() {\n    let numbers = (2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048);\n\n    match numbers {\n        __ => {\n           assert_eq!(first, 2);\n           assert_eq!(last, 2048);\n        }\n    }\n}`, `37518076300844580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> numbers <span class="token punctuation">{</span>\n        __ <span class="token operator">=></span> <span class="token punctuation">{</span>\n           <span class="token function">assert_eq!</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n           <span class="token function">assert_eq!</span><span class="token punctuation">(</span>last<span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-121"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-121" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33758573337811915000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空，让代码工作\nfn main() {\n    let numbers = (2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048);\n\n    match numbers {\n        (first, .., last) => {\n            assert_eq!(first, 2);\n            assert_eq!(last, 2048);\n        }\n    }\n}`, `33758573337811915000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空，让代码工作</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> numbers <span class="token punctuation">{</span>\n        <span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token punctuation">..</span><span class="token punctuation">,</span> last<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token function">assert_eq!</span><span class="token punctuation">(</span>last<span class="token punctuation">,</span> <span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-13"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-13" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>使用模式 &#x26;mut V 去匹配一个可变引用时，你需要格外小心，因为匹配出来的 V 是一个值，而不是可变引用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10167340399314639000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，尽量少地修改代码\n// 不要移除任何代码行\nfn main() {\n    let mut v = String::from(&quot;hello,&quot;);\n    let r = &mut v;\n\n    match r {\n       &mut value => value.push_str(&quot; world!&quot;)\n    }\n}`, `10167340399314639000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，尽量少地修改代码</span>\n<span class="token comment">// 不要移除任何代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> v <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello,"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> v<span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> r <span class="token punctuation">{</span>\n       <span class="token operator">&amp;</span><span class="token keyword">mut</span> value <span class="token operator">=></span> value<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">" world!"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-122"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-122" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73682796590773570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，尽量少地修改代码\n// 不要移除任何代码行\nfn main() {\n    let mut v = String::from(&quot;hello,&quot;);\n    let r = &mut v;\n\n    match r {\n        value => value.push_str(&quot; world!&quot;),\n    }\n}`, `73682796590773570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，尽量少地修改代码</span>\n<span class="token comment">// 不要移除任何代码行</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token keyword">mut</span> v <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello,"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> v<span class="token punctuation">;</span>\n\n    <span class="token keyword">match</span> r <span class="token punctuation">{</span>\n        value <span class="token operator">=></span> value<span class="token punctuation">.</span><span class="token function">push_str</span><span class="token punctuation">(</span><span class="token string">" world!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="方法"><a href="#%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>方法</h1>\n<h2 id="问题一-16"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h2>\n<p>方法跟函数类似：都是使用 fn 声明，有参数和返回值。但是与函数不同的是，方法定义在结构体的上下文中(枚举、特征对象也可以定义方法)，而且方法的第一个参数一定是 self 或其变体 &#x26;self、&#x26;mut self，self 代表了当前调用的结构体实例。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7343960618963208000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nimpl Rectangle {\n    // 完成 area 方法，返回矩形 Rectangle 的面积\n    fn area\n}\n\nfn main() {\n    let rect1 = Rectangle { width: 30, height: 50 };\n\n    assert_eq!(rect1.area(), 1500);\n}`, `7343960618963208000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Rectangle <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> Rectangle <span class="token punctuation">{</span>\n    <span class="token comment">// 完成 area 方法，返回矩形 Rectangle 的面积</span>\n    <span class="token keyword">fn</span> area\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> rect1 <span class="token operator">=</span> Rectangle <span class="token punctuation">{</span> width<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>rect1<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-123"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-123" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42793249613527015000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nimpl Rectangle {\n    // 完成 area 方法，返回矩形 Rectangle 的面积\n    fn area(&self) -> u32 {\n        self.width * self.height\n    }\n}\n\nfn main() {\n    let rect1 = Rectangle {\n        width: 30,\n        height: 50,\n    };\n\n    assert_eq!(rect1.area(), 1500);\n}`, `42793249613527015000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Rectangle <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> Rectangle <span class="token punctuation">{</span>\n    <span class="token comment">// 完成 area 方法，返回矩形 Rectangle 的面积</span>\n    <span class="token keyword">fn</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> u32 <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> rect1 <span class="token operator">=</span> Rectangle <span class="token punctuation">{</span>\n        width<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>\n        height<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>rect1<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题二-16"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h2>\n<p>self 会拿走当前结构体实例(调用对象)的所有权，而 &#x26;self 却只会借用一个不可变引用，&#x26;mut self 会借用一个可变引用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80661768109484740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 只填空，不要删除任何代码行!\n#[derive(Debug)]\nstruct TrafficLight {\n    color: String,\n}\n\nimpl TrafficLight {\n    pub fn show_state(__)  {\n        println!(&quot;the current state is {}&quot;, __.color);\n    }\n}\nfn main() {\n    let light = TrafficLight{\n        color: &quot;red&quot;.to_owned(),\n    };\n    // 不要拿走 \\`light\\` 的所有权\n    light.show_state();\n    // 否则下面代码会报错\n    println!(&quot;{:?}&quot;, light);\n}`, `80661768109484740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 只填空，不要删除任何代码行!</span>\n<span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> TrafficLight <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> TrafficLight <span class="token punctuation">{</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">show_state</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span>  <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"the current state is {}"</span><span class="token punctuation">,</span> __<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> light <span class="token operator">=</span> TrafficLight<span class="token punctuation">{</span>\n        color<span class="token punctuation">:</span> <span class="token string">"red"</span><span class="token punctuation">.</span><span class="token function">to_owned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token comment">// 不要拿走 `light` 的所有权</span>\n    light<span class="token punctuation">.</span><span class="token function">show_state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 否则下面代码会报错</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> light<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-124"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-124" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89250691165701880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 只填空，不要删除任何代码行!\n#[derive(Debug)]\nstruct TrafficLight {\n    color: String,\n}\n\nimpl TrafficLight {\n    pub fn show_state(&self) {\n        println!(&quot;the current state is {}&quot;, self.color);\n    }\n}\nfn main() {\n    let light = TrafficLight {\n        color: &quot;red&quot;.to_owned(),\n    };\n    // 不要拿走 \\`light\\` 的所有权\n    light.show_state();\n    // 否则下面代码会报错\n    println!(&quot;{:?}&quot;, light);\n}`, `89250691165701880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 只填空，不要删除任何代码行!</span>\n<span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> TrafficLight <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> TrafficLight <span class="token punctuation">{</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">show_state</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"the current state is {}"</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> light <span class="token operator">=</span> TrafficLight <span class="token punctuation">{</span>\n        color<span class="token punctuation">:</span> <span class="token string">"red"</span><span class="token punctuation">.</span><span class="token function">to_owned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token comment">// 不要拿走 `light` 的所有权</span>\n    light<span class="token punctuation">.</span><span class="token function">show_state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 否则下面代码会报错</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> light<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题三-16"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h2>\n<p>&#x26;self 实际上是 self: &#x26;Self 的缩写或者说语法糖</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39400626006063510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct TrafficLight {\n    color: String,\n}\n\nimpl TrafficLight {\n    // 使用 \\`Self\\` 填空\n    pub fn show_state(__)  {\n        println!(&quot;the current state is {}&quot;, self.color);\n    }\n\n    // 填空，不要使用 \\`Self\\` 或其变体\n    pub fn change_state(__) {\n        self.color = &quot;green&quot;.to_string()\n    }\n}\nfn main() {}`, `39400626006063510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> TrafficLight <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> TrafficLight <span class="token punctuation">{</span>\n    <span class="token comment">// 使用 `Self` 填空</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">show_state</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span>  <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"the current state is {}"</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 填空，不要使用 `Self` 或其变体</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">change_state</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"green"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-125"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-125" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9994736987930409000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct TrafficLight {\n    color: String,\n}\n\nimpl TrafficLight {\n    // 使用 \\`Self\\` 填空\n    pub fn show_state(self: &Self) {\n        println!(&quot;the current state is {}&quot;, self.color);\n    }\n\n    // 填空，不要使用 \\`Self\\` 或其变体\n    pub fn change_state(&mut self) {\n        self.color = &quot;green&quot;.to_string()\n    }\n}\nfn main() {}`, `9994736987930409000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> TrafficLight <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> TrafficLight <span class="token punctuation">{</span>\n    <span class="token comment">// 使用 `Self` 填空</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">show_state</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">Self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"the current state is {}"</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 填空，不要使用 `Self` 或其变体</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">change_state</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"green"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题四-15"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h2>\n<p>定义在 impl 语句块中的函数被称为关联函数，因为它们跟当前类型关联在一起。关联函数与方法最大的区别就是它第一个参数不是 self，原因是它们不需要使用当前的实例，因此关联函数往往可以用于构造函数：初始化一个实例对象</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50910063630786740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nstruct TrafficLight {\n    color: String,\n}\n\nimpl TrafficLight {\n    // 1. 实现下面的关联函数 \\`new\\`,\n    // 2. 该函数返回一个 TrafficLight 实例，包含 \\`color\\` &quot;red&quot;\n    // 3. 该函数必须使用 \\`Self\\` 作为类型，不能在签名或者函数体中使用 \\`TrafficLight\\`\n    pub fn new()\n\n    pub fn get_state(&self) -> &str {\n        &self.color\n    }\n}\n\nfn main() {\n    let light = TrafficLight::new();\n    assert_eq!(light.get_state(), &quot;red&quot;);\n}`, `50910063630786740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> TrafficLight <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> TrafficLight <span class="token punctuation">{</span>\n    <span class="token comment">// 1. 实现下面的关联函数 `new`,</span>\n    <span class="token comment">// 2. 该函数返回一个 TrafficLight 实例，包含 `color` "red"</span>\n    <span class="token comment">// 3. 该函数必须使用 `Self` 作为类型，不能在签名或者函数体中使用 `TrafficLight`</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">get_state</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>str <span class="token punctuation">{</span>\n        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>color\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> light <span class="token operator">=</span> TrafficLight<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>light<span class="token punctuation">.</span><span class="token function">get_state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-126"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-126" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27272940547135960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nstruct TrafficLight {\n    color: String,\n}\n\nimpl TrafficLight {\n    // 1. 实现下面的关联函数 \\`new\\`,\n    // 2. 该函数返回一个 TrafficLight 实例，包含 \\`color\\` &quot;red&quot;\n    // 3. 该函数必须使用 \\`Self\\` 作为类型，不能在签名或者函数体中使用 \\`TrafficLight\\`\n    pub fn new() -> Self {\n        TrafficLight {\n            color: &quot;red&quot;.to_string(),\n        }\n    }\n\n    pub fn get_state(&self) -> &str {\n        &self.color\n    }\n}\n\nfn main() {\n    let light = TrafficLight::new();\n    assert_eq!(light.get_state(), &quot;red&quot;);\n}`, `27272940547135960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">struct</span> TrafficLight <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> String<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> TrafficLight <span class="token punctuation">{</span>\n    <span class="token comment">// 1. 实现下面的关联函数 `new`,</span>\n    <span class="token comment">// 2. 该函数返回一个 TrafficLight 实例，包含 `color` "red"</span>\n    <span class="token comment">// 3. 该函数必须使用 `Self` 作为类型，不能在签名或者函数体中使用 `TrafficLight`</span>\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>\n        TrafficLight <span class="token punctuation">{</span>\n            color<span class="token punctuation">:</span> <span class="token string">"red"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">get_state</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>str <span class="token punctuation">{</span>\n        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>color\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> light <span class="token operator">=</span> TrafficLight<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>light<span class="token punctuation">.</span><span class="token function">get_state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题五-15"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h2>\n<p>每一个结构体允许拥有多个 impl 语句块</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46859749647103160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Rectangle {\n    width: u32,\n    height: u32,\n}\n\n// 使用多个 \\`impl\\` 语句块重写下面的代码\nimpl Rectangle {\n    fn area(&self) -> u32 {\n        self.width * self.height\n    }\n\n    fn can_hold(&self, other: &Rectangle) -> bool {\n        self.width > other.width && self.height > other.height\n    }\n}\n\nfn main() {}`, `46859749647103160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Rectangle <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 使用多个 `impl` 语句块重写下面的代码</span>\n<span class="token keyword">impl</span> Rectangle <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> u32 <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">fn</span> <span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token operator">&amp;</span>Rectangle<span class="token punctuation">)</span> <span class="token punctuation">-></span> bool <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">></span> other<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">></span> other<span class="token punctuation">.</span>height\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-127"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-127" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24116348438947144000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Rectangle {\n    width: u32,\n    height: u32,\n}\n\n// 使用多个 \\`impl\\` 语句块重写下面的代码\nimpl Rectangle {\n    fn area(&self) -> u32 {\n        self.width * self.height\n    }\n}\n\n// 使用多个 \\`impl\\` 语句块重写下面的代码\nimpl Rectangle {\n    fn can_hold(&self, other: &Rectangle) -> bool {\n        self.width > other.width && self.height > other.height\n    }\n}\n\nfn main() {}`, `24116348438947144000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Rectangle <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> u32<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 使用多个 `impl` 语句块重写下面的代码</span>\n<span class="token keyword">impl</span> Rectangle <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> u32 <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 使用多个 `impl` 语句块重写下面的代码</span>\n<span class="token keyword">impl</span> Rectangle <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">can_hold</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token operator">&amp;</span>Rectangle<span class="token punctuation">)</span> <span class="token punctuation">-></span> bool <span class="token punctuation">{</span>\n        <span class="token keyword">self</span><span class="token punctuation">.</span>width <span class="token operator">></span> other<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>height <span class="token operator">></span> other<span class="token punctuation">.</span>height\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="问题六-14"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-14" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h2>\n<p>我们还可以为枚举类型定义方法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21656531922166500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nenum TrafficLightColor {\n    Red,\n    Yellow,\n    Green,\n}\n\n// 为 TrafficLightColor 实现所需的方法\nimpl TrafficLightColor {\n\n}\n\nfn main() {\n    let c = TrafficLightColor::Yellow;\n\n    assert_eq!(c.color(), &quot;yellow&quot;);\n\n    println!(&quot;{:?}&quot;,c);\n}`, `21656531922166500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">enum</span> TrafficLightColor <span class="token punctuation">{</span>\n    Red<span class="token punctuation">,</span>\n    Yellow<span class="token punctuation">,</span>\n    Green<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 为 TrafficLightColor 实现所需的方法</span>\n<span class="token keyword">impl</span> TrafficLightColor <span class="token punctuation">{</span>\n\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c <span class="token operator">=</span> TrafficLightColor<span class="token punctuation">::</span>Yellow<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="我的解答-128"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-128" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14743008521617940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#[derive(Debug)]\nenum TrafficLightColor {\n    Red,\n    Yellow,\n    Green,\n}\n\n// 为 TrafficLightColor 实现所需的方法\nimpl TrafficLightColor {\n    fn color(&self) -> &str {\n        match self {\n            TrafficLightColor::Yellow => &quot;yellow&quot;,\n            _ => &quot;None&quot;,\n        }\n    }\n}\n\nfn main() {\n    let c = TrafficLightColor::Yellow;\n\n    assert_eq!(c.color(), &quot;yellow&quot;);\n\n    println!(&quot;{:?}&quot;, c);\n}`, `14743008521617940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug)]</span>\n<span class="token keyword">enum</span> TrafficLightColor <span class="token punctuation">{</span>\n    Red<span class="token punctuation">,</span>\n    Yellow<span class="token punctuation">,</span>\n    Green<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 为 TrafficLightColor 实现所需的方法</span>\n<span class="token keyword">impl</span> TrafficLightColor <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>str <span class="token punctuation">{</span>\n        <span class="token keyword">match</span> <span class="token keyword">self</span> <span class="token punctuation">{</span>\n            TrafficLightColor<span class="token punctuation">::</span>Yellow <span class="token operator">=></span> <span class="token string">"yellow"</span><span class="token punctuation">,</span>\n            _ <span class="token operator">=></span> <span class="token string">"None"</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> c <span class="token operator">=</span> TrafficLightColor<span class="token punctuation">::</span>Yellow<span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="泛型和特征"><a href="#%E6%B3%9B%E5%9E%8B%E5%92%8C%E7%89%B9%E5%BE%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>泛型和特征</h1>\n<h2 id="泛型"><a href="#%E6%B3%9B%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>泛型</h2>\n<h3 id="问题一-17"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-17" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73229928842422410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nstruct A;          // 具体的类型 \\`A\\`.\nstruct S(A);       // 具体的类型 \\`S\\`.\nstruct SGen<T>(T); // 泛型 \\`SGen\\`.\n\nfn reg_fn(_s: S) {}\n\nfn gen_spec_t(_s: SGen<A>) {}\n\nfn gen_spec_i32(_s: SGen<i32>) {}\n\nfn generic<T>(_s: SGen<T>) {}\n\nfn main() {\n    // 使用非泛型函数\n    reg_fn(__);          // 具体的类型\n    gen_spec_t(__);   // 隐式地指定类型参数  \\`A\\`.\n    gen_spec_i32(__); // 隐式地指定类型参数\\`i32\\`.\n\n    // 显式地指定类型参数 \\`char\\`\n    generic::<char>(__);\n\n    // 隐式地指定类型参数 \\`char\\`.\n    generic(__);\n}`, `73229928842422410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">struct</span> A<span class="token punctuation">;</span>          <span class="token comment">// 具体的类型 `A`.</span>\n<span class="token keyword">struct</span> <span class="token function">S</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 具体的类型 `S`.</span>\n<span class="token keyword">struct</span> SGen<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 泛型 `SGen`.</span>\n\n<span class="token keyword">fn</span> <span class="token function">reg_fn</span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> S<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">gen_spec_t</span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> SGen<span class="token operator">&lt;</span>A<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">gen_spec_i32</span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> SGen<span class="token operator">&lt;</span>i32<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> generic<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> SGen<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 使用非泛型函数</span>\n    <span class="token function">reg_fn</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 具体的类型</span>\n    <span class="token function">gen_spec_t</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 隐式地指定类型参数  `A`.</span>\n    <span class="token function">gen_spec_i32</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 隐式地指定类型参数`i32`.</span>\n\n    <span class="token comment">// 显式地指定类型参数 `char`</span>\n    generic<span class="token punctuation">::</span><span class="token operator">&lt;</span>char<span class="token operator">></span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 隐式地指定类型参数 `char`.</span>\n    <span class="token function">generic</span><span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-129"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-129" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87120225673564640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nstruct A;          // 具体的类型 \\`A\\`.\nstruct S(A);       // 具体的类型 \\`S\\`.\nstruct SGen<T>(T); // 泛型 \\`SGen\\`.\n\nfn reg_fn(_s: S) {}\n\nfn gen_spec_t(_s: SGen<A>) {}\n\nfn gen_spec_i32(_s: SGen<i32>) {}\n\nfn generic<T>(_s: SGen<T>) {}\n\nfn main() {\n    // 使用非泛型函数\n    reg_fn(S(A));          // 具体的类型\n    gen_spec_t(SGen(A));   // 隐式地指定类型参数  \\`A\\`.\n    gen_spec_i32(SGen(1)); // 隐式地指定类型参数\\`i32\\`.\n\n    // 显式地指定类型参数 \\`char\\`\n    generic::<char>(SGen(\'1\'));\n\n    // 隐式地指定类型参数 \\`char\\`.\n    generic(SGen(\'1\'));\n}`, `87120225673564640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">struct</span> A<span class="token punctuation">;</span>          <span class="token comment">// 具体的类型 `A`.</span>\n<span class="token keyword">struct</span> <span class="token function">S</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 具体的类型 `S`.</span>\n<span class="token keyword">struct</span> SGen<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 泛型 `SGen`.</span>\n\n<span class="token keyword">fn</span> <span class="token function">reg_fn</span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> S<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">gen_spec_t</span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> SGen<span class="token operator">&lt;</span>A<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">gen_spec_i32</span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> SGen<span class="token operator">&lt;</span>i32<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> generic<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>_s<span class="token punctuation">:</span> SGen<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 使用非泛型函数</span>\n    <span class="token function">reg_fn</span><span class="token punctuation">(</span><span class="token function">S</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 具体的类型</span>\n    <span class="token function">gen_spec_t</span><span class="token punctuation">(</span><span class="token function">SGen</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 隐式地指定类型参数  `A`.</span>\n    <span class="token function">gen_spec_i32</span><span class="token punctuation">(</span><span class="token function">SGen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 隐式地指定类型参数`i32`.</span>\n\n    <span class="token comment">// 显式地指定类型参数 `char`</span>\n    generic<span class="token punctuation">::</span><span class="token operator">&lt;</span>char<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">SGen</span><span class="token punctuation">(</span><span class="token char string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 隐式地指定类型参数 `char`.</span>\n    <span class="token function">generic</span><span class="token punctuation">(</span><span class="token function">SGen</span><span class="token punctuation">(</span><span class="token char string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-17"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-17" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15279280975753550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 实现下面的泛型函数 sum\nfn sum\n\nfn main() {\n    assert_eq!(5, sum(2i8, 3i8));\n    assert_eq!(50, sum(20, 30));\n    assert_eq!(2.46, sum(1.23, 1.23));\n}`, `15279280975753550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 实现下面的泛型函数 sum</span>\n<span class="token keyword">fn</span> sum\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2i8</span><span class="token punctuation">,</span> <span class="token number">3i8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">2.46</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">,</span> <span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-130"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-130" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45590890221215850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 实现下面的泛型函数 sum\nfn sum<T: std::ops::Add<Output = T>>(a: T, b: T) -> T {\n    a + b\n}\n\nfn main() {\n    assert_eq!(5, sum(2i8, 3i8));\n    assert_eq!(50, sum(20, 30));\n    assert_eq!(2.46, sum(1.23, 1.23));\n}`, `45590890221215850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 实现下面的泛型函数 sum</span>\n<span class="token keyword">fn</span> sum<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> std<span class="token punctuation">::</span>ops<span class="token punctuation">::</span>Add<span class="token operator">&lt;</span>Output <span class="token operator">=</span> T<span class="token operator">>></span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> T<span class="token punctuation">,</span> b<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">-></span> T <span class="token punctuation">{</span>\n    a <span class="token operator">+</span> b\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2i8</span><span class="token punctuation">,</span> <span class="token number">3i8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span><span class="token number">2.46</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1.23</span><span class="token punctuation">,</span> <span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-17"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-17" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84516376609347500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 实现一个结构体 Point 让代码工作\n\nfn main() {\n    let integer = Point { x: 5, y: 10 };\n    let float = Point { x: 1.0, y: 4.0 };\n}`, `84516376609347500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 实现一个结构体 Point 让代码工作</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> integer <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> float <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">4.0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-131"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-131" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96513719544990120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 实现一个结构体 Point 让代码工作\nstruct Point<T> {\n    x: T,\n    y: T,\n}\n\nfn main() {\n    let integer = Point { x: 5, y: 10 };\n    let float = Point { x: 1.0, y: 4.0 };\n}`, `96513719544990120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 实现一个结构体 Point 让代码工作</span>\n<span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> integer <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> float <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">4.0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-16"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36493345990529757000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改以下结构体让代码工作\nstruct Point<T> {\n    x: T,\n    y: T,\n}\n\nfn main() {\n    // 不要修改这行代码！\n    let p = Point{x: 5, y : &quot;hello&quot;.to_string()};\n}`, `36493345990529757000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改以下结构体让代码工作</span>\n<span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 不要修改这行代码！</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Point<span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y <span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-132"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-132" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36625835500819150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修改以下结构体让代码工作\nstruct Point<T, U> {\n    x: T,\n    y: U,\n}\n\nfn main() {\n    // 不要修改这行代码！\n    let p = Point{x: 5, y : &quot;hello&quot;.to_string()};\n}`, `36625835500819150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修改以下结构体让代码工作</span>\n<span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> U<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 不要修改这行代码！</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Point<span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y <span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-16"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21712166288419566000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 为 Val 增加泛型参数，不要修改 \\`main\\` 中的代码\nstruct Val {\n    val: f64,\n}\n\nimpl Val {\n    fn value(&self) -> &f64 {\n        &self.val\n    }\n}\n\nfn main() {\n    let x = Val{ val: 3.0 };\n    let y = Val{ val: &quot;hello&quot;.to_string()};\n    println!(&quot;{}, {}&quot;, x.value(), y.value());\n}`, `21712166288419566000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 为 Val 增加泛型参数，不要修改 `main` 中的代码</span>\n<span class="token keyword">struct</span> Val <span class="token punctuation">{</span>\n    val<span class="token punctuation">:</span> f64<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> Val <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>f64 <span class="token punctuation">{</span>\n        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>val\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> Val<span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token number">3.0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> Val<span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-133"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-133" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93209172413931540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 为 Val 增加泛型参数，不要修改 \\`main\\` 中的代码\nstruct Val<T> {\n    val: T,\n}\n\nimpl<T> Val<T> {\n    fn value(&self) -> &T {\n        &self.val\n    }\n}\n\nfn main() {\n    let x = Val { val: 3.0 };\n    let y = Val {\n        val: &quot;hello&quot;.to_string(),\n    };\n    println!(&quot;{}, {}&quot;, x.value(), y.value());\n}`, `93209172413931540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 为 Val 增加泛型参数，不要修改 `main` 中的代码</span>\n<span class="token keyword">struct</span> Val<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>\n    val<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span><span class="token operator">&lt;</span>T<span class="token operator">></span> Val<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span>T <span class="token punctuation">{</span>\n        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>val\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> x <span class="token operator">=</span> Val <span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token number">3.0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> y <span class="token operator">=</span> Val <span class="token punctuation">{</span>\n        val<span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}, {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-15"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-15" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75802398489244700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Point<T, U> {\n    x: T,\n    y: U,\n}\n\nimpl<T, U> Point<T, U> {\n    // 实现 mixup，不要修改其它代码！\n    fn mixup\n}\n\nfn main() {\n    let p1 = Point { x: 5, y: 10 };\n    let p2 = Point { x: &quot;Hello&quot;, y: \'中\'};\n\n    let p3 = p1.mixup(p2);\n\n    assert_eq!(p3.x, 5);\n    assert_eq!(p3.y, \'中\');\n}`, `75802398489244700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> U<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span><span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> Point<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment">// 实现 mixup，不要修改其它代码！</span>\n    <span class="token keyword">fn</span> mixup\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> p1 <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> p2 <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token char string">\'中\'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> p3 <span class="token operator">=</span> p1<span class="token punctuation">.</span><span class="token function">mixup</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>p3<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>p3<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token char string">\'中\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-134"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-134" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75243796648370950000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct Point<T, U> {\n    x: T,\n    y: U,\n}\n\nimpl<T, U> Point<T, U> {\n    // 实现 mixup，不要修改其它代码！\n    fn mixup<V, W>(self, other: Point<V, W>) -> Point<T, W> {\n        Point {\n            x: self.x,\n            y: other.y,\n        }\n    }\n}\n\nfn main() {\n    let p1 = Point { x: 5, y: 10 };\n    let p2 = Point {\n        x: &quot;Hello&quot;,\n        y: \'中\',\n    };\n\n    let p3 = p1.mixup(p2);\n\n    assert_eq!(p3.x, 5);\n    assert_eq!(p3.y, \'中\');\n}`, `75243796648370950000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> U<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span><span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> Point<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment">// 实现 mixup，不要修改其它代码！</span>\n    <span class="token keyword">fn</span> mixup<span class="token operator">&lt;</span>V<span class="token punctuation">,</span> W<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> Point<span class="token operator">&lt;</span>V<span class="token punctuation">,</span> W<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> Point<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> W<span class="token operator">></span> <span class="token punctuation">{</span>\n        Point <span class="token punctuation">{</span>\n            x<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n            y<span class="token punctuation">:</span> other<span class="token punctuation">.</span>y<span class="token punctuation">,</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> p1 <span class="token operator">=</span> Point <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> p2 <span class="token operator">=</span> Point <span class="token punctuation">{</span>\n        x<span class="token punctuation">:</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span>\n        y<span class="token punctuation">:</span> <span class="token char string">\'中\'</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> p3 <span class="token operator">=</span> p1<span class="token punctuation">.</span><span class="token function">mixup</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>p3<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>p3<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token char string">\'中\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题七-8"><a href="#%E9%97%AE%E9%A2%98%E4%B8%83-8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题七</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40320558541385120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，让代码工作\nstruct Point<T> {\n    x: T,\n    y: T,\n}\n\nimpl Point<f32> {\n    fn distance_from_origin(&self) -> f32 {\n        (self.x.powi(2) + self.y.powi(2)).sqrt()\n    }\n}\n\nfn main() {\n    let p = Point{x: 5, y: 10};\n    println!(&quot;{}&quot;,p.distance_from_origin())\n}`, `40320558541385120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，让代码工作</span>\n<span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> Point<span class="token operator">&lt;</span>f32<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">distance_from_origin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> f32 <span class="token punctuation">{</span>\n        <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token function">powi</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">self</span><span class="token punctuation">.</span>y<span class="token punctuation">.</span><span class="token function">powi</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Point<span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span><span class="token function">distance_from_origin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-135"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-135" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73716273047327910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误，让代码工作\nstruct Point<T> {\n    x: T,\n    y: T,\n}\n\nimpl Point<f32> {\n    fn distance_from_origin(&self) -> f32 {\n        (self.x.powi(2) + self.y.powi(2)).sqrt()\n    }\n}\n\nfn main() {\n    let p = Point{x: 5.0, y: 10.0};\n    println!(&quot;{}&quot;,p.distance_from_origin())\n}`, `73716273047327910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误，让代码工作</span>\n<span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> T<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> Point<span class="token operator">&lt;</span>f32<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">fn</span> <span class="token function">distance_from_origin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> f32 <span class="token punctuation">{</span>\n        <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token function">powi</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">self</span><span class="token punctuation">.</span>y<span class="token punctuation">.</span><span class="token function">powi</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> p <span class="token operator">=</span> Point<span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">5.0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10.0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>p<span class="token punctuation">.</span><span class="token function">distance_from_origin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="const-泛型"><a href="#const-%E6%B3%9B%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Const 泛型</h2>\n<h3 id="问题一-18"><a href="#%E9%97%AE%E9%A2%98%E4%B8%80-18" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题一</h3>\n<p>下面的例子同时使用泛型和 const 泛型来实现一个结构体，该结构体的字段中的数组长度是可变的</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13527223946434908000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct ArrayPair<T, const N: usize> {\n    left: [T; N],\n    right: [T; N],\n}\n\nimpl<T: Debug, const N: usize> Debug for ArrayPair<T, N> {\n    // ...\n}`, `13527223946434908000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">struct</span> ArrayPair<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span> <span class="token punctuation">{</span>\n    left<span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">;</span> N<span class="token punctuation">]</span><span class="token punctuation">,</span>\n    right<span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">;</span> N<span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span><span class="token operator">&lt;</span>T<span class="token punctuation">:</span> Debug<span class="token punctuation">,</span> <span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span> Debug <span class="token keyword">for</span> ArrayPair<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> N<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment">// ...</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题二-18"><a href="#%E9%97%AE%E9%A2%98%E4%BA%8C-18" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题二</h3>\n<p>目前，const 泛型参数只能使用以下形式的实参:</p>\n<ul>\n<li>一个单独的 const 泛型参数</li>\n<li>一个字面量（i.e. 整数, 布尔值或字符）</li>\n<li>一个具体的 const 表达式（表达式中不能包含任何泛型参数）</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89200491189827730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fn foo<const N: usize>() {}\n\nfn bar<T, const M: usize>() {\n    foo::<M>(); // ok: 符合第一种\n    foo::<2021>(); // ok: 符合第二种\n    foo::<{20 * 100 + 20 * 10 + 1}>(); // ok: 符合第三种\n    \n    foo::<{ M + 1 }>(); // error: 违背第三种，const 表达式中不能有泛型参数 M\n    foo::<{ std::mem::size_of::<T>() }>(); // error: 泛型表达式包含了泛型参数 T\n    \n    let _: [u8; M]; // ok: 符合第一种\n    let _: [u8; std::mem::size_of::<T>()]; // error: 泛型表达式包含了泛型参数 T\n}\n\nfn main() {}`, `89200491189827730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">fn</span> foo<span class="token operator">&lt;</span><span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> bar<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> M<span class="token punctuation">:</span> usize<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    foo<span class="token punctuation">::</span><span class="token operator">&lt;</span>M<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok: 符合第一种</span>\n    foo<span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token number">2021</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok: 符合第二种</span>\n    foo<span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token number">20</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">20</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok: 符合第三种</span>\n    \n    foo<span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> M <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: 违背第三种，const 表达式中不能有泛型参数 M</span>\n    foo<span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of<span class="token punctuation">::</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: 泛型表达式包含了泛型参数 T</span>\n    \n    <span class="token keyword">let</span> _<span class="token punctuation">:</span> <span class="token punctuation">[</span>u8<span class="token punctuation">;</span> M<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// ok: 符合第一种</span>\n    <span class="token keyword">let</span> _<span class="token punctuation">:</span> <span class="token punctuation">[</span>u8<span class="token punctuation">;</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of<span class="token punctuation">::</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// error: 泛型表达式包含了泛型参数 T</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题三-18"><a href="#%E9%97%AE%E9%A2%98%E4%B8%89-18" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题三</h3>\n<p>const 泛型还能帮我们避免一些运行时检查，提升性能</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64812134386978920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`pub struct MinSlice<T, const N: usize> {\n    pub head: [T; N],\n    pub tail: [T],\n}\n\nfn main() {\n    let slice: &[u8] = b&quot;Hello, world&quot;;\n    let reference: Option<&u8> = slice.get(6);\n    // 我们知道 \\`.get\\` 返回的是 \\`Some(b\' \')\\`\n    // 但编译器不知道\n    assert!(reference.is_some());\n\n    let slice: &[u8] = b&quot;Hello, world&quot;;\n\n    // 当编译构建 MinSlice 时会进行长度检查，也就是在编译期我们就知道它的长度是 12\n    // 在运行期，一旦 \\`unwrap\\` 成功，在 \\`MinSlice\\` 的作用域内，就再无需任何检查    \n    let minslice = MinSlice::<u8, 12>::from_slice(slice).unwrap();\n    let value: u8 = minslice.head[6];\n    assert_eq!(value, b\' \')\n}`, `64812134386978920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">struct</span> MinSlice<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">pub</span> head<span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">;</span> N<span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token keyword">pub</span> tail<span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> slice<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>u8<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">b"Hello, world"</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> reference<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span><span class="token operator">&amp;</span>u8<span class="token operator">></span> <span class="token operator">=</span> slice<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 我们知道 `.get` 返回的是 `Some(b\' \')`</span>\n    <span class="token comment">// 但编译器不知道</span>\n    <span class="token function">assert!</span><span class="token punctuation">(</span>reference<span class="token punctuation">.</span><span class="token function">is_some</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> slice<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>u8<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">b"Hello, world"</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 当编译构建 MinSlice 时会进行长度检查，也就是在编译期我们就知道它的长度是 12</span>\n    <span class="token comment">// 在运行期，一旦 `unwrap` 成功，在 `MinSlice` 的作用域内，就再无需任何检查    </span>\n    <span class="token keyword">let</span> minslice <span class="token operator">=</span> MinSlice<span class="token punctuation">::</span><span class="token operator">&lt;</span>u8<span class="token punctuation">,</span> <span class="token number">12</span><span class="token operator">></span><span class="token punctuation">::</span><span class="token function">from_slice</span><span class="token punctuation">(</span>slice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> value<span class="token punctuation">:</span> u8 <span class="token operator">=</span> minslice<span class="token punctuation">.</span>head<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">assert_eq!</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token char string">b\' \'</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题四-17"><a href="#%E9%97%AE%E9%A2%98%E5%9B%9B-17" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题四</h3>\n<p><code class="language-text">&lt;T, const N: usize&gt;</code> 是结构体类型的一部分，和数组类型一样，这意味着长度不同会导致类型不同： <code class="language-text">Array&lt;i32, 3&gt;</code> 和 <code class="language-text">Array&lt;i32, 4&gt;</code> 是不同的类型</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42275698207517710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nstruct Array<T, const N: usize> {\n    data : [T; N]\n}\n\nfn main() {\n    let arrays = [\n        Array{\n            data: [1, 2, 3],\n        },\n        Array {\n            data: [1.0, 2.0, 3.0],\n        },\n        Array {\n            data: [1, 2]\n        }\n    ];\n}`, `42275698207517710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">struct</span> Array<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span> <span class="token punctuation">{</span>\n    data <span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">;</span> N<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arrays <span class="token operator">=</span> <span class="token punctuation">[</span>\n        Array<span class="token punctuation">{</span>\n            data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Array <span class="token punctuation">{</span>\n            data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Array <span class="token punctuation">{</span>\n            data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-136"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-136" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77624964975869170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 修复错误\nstruct Array<T, const N: usize> {\n    data : [T; N]\n}\n\nfn main() {\n    let arrays = [\n        Array{\n            data: [1, 2, 3],\n        },\n        Array {\n            data: [1, 2, 3],\n        },\n        Array {\n            data: [1, 2, 3]\n        }\n    ];\n}`, `77624964975869170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 修复错误</span>\n<span class="token keyword">struct</span> Array<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span> <span class="token punctuation">{</span>\n    data <span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">;</span> N<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arrays <span class="token operator">=</span> <span class="token punctuation">[</span>\n        Array<span class="token punctuation">{</span>\n            data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Array <span class="token punctuation">{</span>\n            data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        Array <span class="token punctuation">{</span>\n            data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题五-17"><a href="#%E9%97%AE%E9%A2%98%E4%BA%94-17" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题五</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80548311092968470000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn print_array<__>(__) {\n    println!(&quot;{:?}&quot;, arr);\n}\nfn main() {\n    let arr = [1, 2, 3];\n    print_array(arr);\n\n    let arr = [&quot;hello&quot;, &quot;world&quot;];\n    print_array(arr);\n}`, `80548311092968470000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> print_array<span class="token operator">&lt;</span>__<span class="token operator">></span><span class="token punctuation">(</span>__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">print_array</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">print_array</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-137"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-137" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73506649561398714000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填空\nfn print_array<T: std::fmt::Debug, const N: usize>(arr: [T; N]) {\n    println!(&quot;{:?}&quot;, arr);\n}\n\nfn main() {\n    let arr = [1, 2, 3];\n    print_array(arr);\n\n    let arr = [&quot;hello&quot;, &quot;world&quot;];\n    print_array(arr);\n}`, `73506649561398714000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token comment">// 填空</span>\n<span class="token keyword">fn</span> print_array<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> std<span class="token punctuation">::</span>fmt<span class="token punctuation">::</span>Debug<span class="token punctuation">,</span> <span class="token keyword">const</span> N<span class="token punctuation">:</span> usize<span class="token operator">></span><span class="token punctuation">(</span>arr<span class="token punctuation">:</span> <span class="token punctuation">[</span>T<span class="token punctuation">;</span> N<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">print_array</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token function">print_array</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="问题六-16"><a href="#%E9%97%AE%E9%A2%98%E5%85%AD-16" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题六</h3>\n<p>有时我们希望能限制一个变量占用内存的大小，例如在嵌入式环境中，此时 const 泛型参数的第三种形式 const 表达式 就非常适合</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54998491822329830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#![allow(incomplete_features)]\n#![feature(generic_const_exprs)]\n\nfn check_size<T>(val: T)\nwhere\n    Assert<{ core::mem::size_of::<T>() < 768 }>: IsTrue,\n{\n    //...\n}\n\n// 修复 main 函数中的错误\nfn main() {\n    check_size([0u8; 767]); \n    check_size([0i32; 191]);\n    check_size([&quot;hello你好&quot;; __]); // size of &str ?\n    check_size([(); __].map(|_| &quot;hello你好&quot;.to_string()));  // size of String?\n    check_size([\'中\'; __]); // size of char ?\n}\n\n\n\npub enum Assert<const CHECK: bool> {}\n\npub trait IsTrue {}\n\nimpl IsTrue for Assert<true> {}`, `54998491822329830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#![allow(incomplete_features)]</span>\n<span class="token attribute attr-name">#![feature(generic_const_exprs)]</span>\n\n<span class="token keyword">fn</span> check_size<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>val<span class="token punctuation">:</span> T<span class="token punctuation">)</span>\n<span class="token keyword">where</span>\n    Assert<span class="token operator">&lt;</span><span class="token punctuation">{</span> core<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of<span class="token punctuation">::</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">768</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">:</span> IsTrue<span class="token punctuation">,</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 修复 main 函数中的错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0u8</span><span class="token punctuation">;</span> <span class="token number">767</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> \n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0i32</span><span class="token punctuation">;</span> <span class="token number">191</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello你好"</span><span class="token punctuation">;</span> __<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// size of &amp;str ?</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> __<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">|</span>_<span class="token operator">|</span> <span class="token string">"hello你好"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// size of String?</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char string">\'中\'</span><span class="token punctuation">;</span> __<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// size of char ?</span>\n<span class="token punctuation">}</span>\n\n\n\n<span class="token keyword">pub</span> <span class="token keyword">enum</span> Assert<span class="token operator">&lt;</span><span class="token keyword">const</span> CHECK<span class="token punctuation">:</span> bool<span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">pub</span> <span class="token keyword">trait</span> IsTrue <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> IsTrue <span class="token keyword">for</span> Assert<span class="token operator">&lt;</span><span class="token keyword">true</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="我的解答-138"><a href="#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-138" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>我的解答</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95473600990482120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#![allow(incomplete_features)]\n#![feature(generic_const_exprs)]\n\nfn check_size<T>(val: T)\nwhere\n    Assert<{ core::mem::size_of::<T>() < 768 }>: IsTrue,\n{\n    //...\n}\n\n// 修复 main 函数中的错误\nfn main() {\n    check_size([0u8; 767]); // 1 * 768 = 768\n    check_size([0i32; 191]); // 4 * 192 = 768\n    check_size([&quot;hello你好&quot;; 47]); // 16 * 48 = 768，&str is a string reference, containing a pointer and string length in it, so it takes two word long, in x86-64, 1 word = 8 bytes\n    check_size([(); 31].map(|_| &quot;hello你好&quot;.to_string())); // 24 * 32 = 768，String is a smart pointer struct, it has three fields: pointer, length and capacity, each takes 8 bytes\n    check_size([\'中\'; 191]); // 192 * 4 = 768\n}\n\npub enum Assert<const CHECK: bool> {}\n\npub trait IsTrue {}\n\nimpl IsTrue for Assert<true> {}`, `95473600990482120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="rust"\n              >\n                <span class="gatsby-code-button-language">rust</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="rust"><pre style="counter-reset: linenumber NaN" class="language-rust line-numbers"><code class="language-rust"><span class="token attribute attr-name">#![allow(incomplete_features)]</span>\n<span class="token attribute attr-name">#![feature(generic_const_exprs)]</span>\n\n<span class="token keyword">fn</span> check_size<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>val<span class="token punctuation">:</span> T<span class="token punctuation">)</span>\n<span class="token keyword">where</span>\n    Assert<span class="token operator">&lt;</span><span class="token punctuation">{</span> core<span class="token punctuation">::</span>mem<span class="token punctuation">::</span>size_of<span class="token punctuation">::</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">768</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">:</span> IsTrue<span class="token punctuation">,</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 修复 main 函数中的错误</span>\n<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0u8</span><span class="token punctuation">;</span> <span class="token number">767</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 * 768 = 768</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0i32</span><span class="token punctuation">;</span> <span class="token number">191</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4 * 192 = 768</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello你好"</span><span class="token punctuation">;</span> <span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 16 * 48 = 768，&amp;str is a string reference, containing a pointer and string length in it, so it takes two word long, in x86-64, 1 word = 8 bytes</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">|</span>_<span class="token operator">|</span> <span class="token string">"hello你好"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 24 * 32 = 768，String is a smart pointer struct, it has three fields: pointer, length and capacity, each takes 8 bytes</span>\n    <span class="token function">check_size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char string">\'中\'</span><span class="token punctuation">;</span> <span class="token number">191</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 192 * 4 = 768</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">pub</span> <span class="token keyword">enum</span> Assert<span class="token operator">&lt;</span><span class="token keyword">const</span> CHECK<span class="token punctuation">:</span> bool<span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">pub</span> <span class="token keyword">trait</span> IsTrue <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token keyword">impl</span> IsTrue <span class="token keyword">for</span> Assert<span class="token operator">&lt;</span><span class="token keyword">true</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>// TODO <a href="https://zh.practice.rs/generics-traits/intro.html" target="_blank" rel="nofollow noreferrer noopener">https://zh.practice.rs/generics-traits/intro.html</a></p>',
excerpt:"背景知识 Rust 语言圣经 变量绑定与解构 问题一 变量只有在初始化后才能被使用 我的解答 问题二 可以使用 mut…",timeToRead:83,tableOfContents:'<ul>\n<li><a href="/rust-practice-test/#%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86">背景知识</a></li>\n<li>\n<p><a href="/rust-practice-test/#%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E6%9E%84">变量绑定与解构</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-1">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-2">我的解答</a></li>\n<li><a href="/rust-practice-test/#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94">最佳解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-3">我的解答</a></li>\n<li><a href="/rust-practice-test/#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-1">最佳解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-4">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-5">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-6">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-7">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-8">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B">基本类型</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B">数值类型</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-1">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-9">我的解答</a></li>\n<li><a href="/rust-practice-test/#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-2">最佳解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-1">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-10">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-1">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-11">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-1">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-12">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-1">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-13">我的解答</a></li>\n<li><a href="/rust-practice-test/#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-3">最佳解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-1">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-14">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-1">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-15">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-1">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-16">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-1">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-17">我的解答</a></li>\n<li><a href="/rust-practice-test/#%E6%9C%80%E4%BD%B3%E8%A7%A3%E7%AD%94-4">最佳解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81">问题十</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-18">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%80">问题十一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-19">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%AD%97%E7%AC%A6%E3%80%81%E5%B8%83%E5%B0%94%E3%80%81%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B">字符、布尔、单元类型</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-2">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-20">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-2">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-21">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-2">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-22">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-2">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-23">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-2">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-24">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-2">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-25">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E8%AF%AD%E5%8F%A5%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F">语句与表达式</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-3">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-26">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-3">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-27">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-3">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-28">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%87%BD%E6%95%B0">函数</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-4">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-29">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-4">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-30">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-4">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-31">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-3">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-32">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-3">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-33">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%89%80%E6%9C%89%E6%9D%83%E4%B8%8E%E5%80%9F%E7%94%A8">所有权与借用</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E6%89%80%E6%9C%89%E6%9D%83">所有权</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-5">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-34">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-5">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-35">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-5">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-36">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-4">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-37">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-4">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-38">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-3">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-39">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-2">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-40">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-2">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-41">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-2">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-42">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%BC%95%E7%94%A8%E4%B8%8E%E5%80%9F%E7%94%A8">引用与借用</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-6">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-43">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-6">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-44">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-6">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-45">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-5">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-46">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-5">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-47">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-4">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-48">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-3">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-49">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-3">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-50">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-3">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-51">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81-1">问题十</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-52">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B">复合类型</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E5%AD%97%E7%AC%A6%E4%B8%B2">字符串</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-7">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-53">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-7">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-54">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-7">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-55">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-6">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-56">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-6">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-57">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-5">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-58">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-4">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-59">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-4">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-60">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-4">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-61">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81-2">问题十</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-62">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%80-1">问题十一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-63">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81%E4%BA%8C">问题十二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-64">我的解答</a></li>\n</ul>\n</li>\n<li><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%89">问题十三</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%95%B0%E7%BB%84">数组</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-8">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-65">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-8">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-66">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-8">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-67">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-7">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-68">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-7">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-69">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-6">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-70">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%88%87%E7%89%87">切片</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-9">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-71">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-9">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-72">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-9">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-73">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-8">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-74">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-8">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-75">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-7">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-76">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E5%85%83%E7%BB%84">元组</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-10">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-77">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-10">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-78">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-10">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-79">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-9">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-80">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-9">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-81">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-8">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-82">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E7%BB%93%E6%9E%84%E4%BD%93">结构体</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-11">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-83">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-11">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-84">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-11">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-85">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-10">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-86">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-10">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-87">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-9">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-88">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-5">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-89">我的解答</a></li>\n</ul>\n</li>\n<li><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-5">问题八</a></li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-5">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-90">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%9E%9A%E4%B8%BE">枚举</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-12">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-91">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-12">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-92">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-12">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-93">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-11">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-94">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-11">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-95">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-10">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-96">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">流程控制</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-13">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-97">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-13">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-98">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-13">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-99">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-12">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-100">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-12">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-101">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-11">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-102">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-6">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-103">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-6">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-104">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-6">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-105">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81-3">问题十</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-106">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%8D%81%E4%B8%80-2">问题十一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-107">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D">模式匹配</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#match-%E5%92%8C-if-let">match 和 if let</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-14">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-108">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-14">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-109">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-14">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-110">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-13">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-111">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-13">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-112">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-12">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-113">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-7">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-114">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AB-7">问题八</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-115">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B9%9D-7">问题九</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-116">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%A8%A1%E5%BC%8F">模式</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-15">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-117">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-15">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-118">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-15">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-119">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-14">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-120">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-14">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-121">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-13">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-122">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%96%B9%E6%B3%95">方法</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-16">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-123">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-16">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-124">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-16">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-125">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-15">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-126">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-15">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-127">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-14">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-128">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E6%B3%9B%E5%9E%8B%E5%92%8C%E7%89%B9%E5%BE%81">泛型和特征</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E6%B3%9B%E5%9E%8B">泛型</a></p>\n<ul>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-17">问题一</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-129">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-17">问题二</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-130">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-17">问题三</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-131">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-16">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-132">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-16">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-133">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-15">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-134">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%83-8">问题七</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-135">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#const-%E6%B3%9B%E5%9E%8B">Const 泛型</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%80-18">问题一</a></li>\n<li><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%8C-18">问题二</a></li>\n<li><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%B8%89-18">问题三</a></li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%9B%9B-17">问题四</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-136">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E4%BA%94-17">问题五</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-137">我的解答</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/rust-practice-test/#%E9%97%AE%E9%A2%98%E5%85%AD-16">问题六</a></p>\n<ul>\n<li><a href="/rust-practice-test/#%E6%88%91%E7%9A%84%E8%A7%A3%E7%AD%94-138">我的解答</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>',wordCount:{words:749},frontmatter:{date:"2022-08-02 17:24:05",path:"/rust-practice-test/",tags:"后端, Rust, 练手测试",title:"Rust练手测试",draft:null,catalog_number:null}},nextPost:{html:'<h1 id="webgl-三维纹理"><a href="#webgl-%E4%B8%89%E7%BB%B4%E7%BA%B9%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 三维纹理</h1>\n<p>在 WebGL 中如何使用纹理？你可能会从二维图像处理的文章中得到启发，如果我们讲的再深入一点可能更好理解。</p>\n<p>首先需要调整着色器以便使用纹理，这里是顶点着色器的修改部分，我们需要传递纹理坐标，在这个例子中直接将它们传到片断着色器中。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23293402653145125000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n  // 将位置和矩阵相乘\n  gl_Position = u_matrix * a_position;\n\n  // 传递纹理坐标到片断着色器\n  v_texcoord = a_texcoord;\n}`, `23293402653145125000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{2,6,12-13}"\n              >\n                <span class="gatsby-code-button-language">glsl{2,6,12-13}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">attribute</span> <span class="token keyword">vec2</span> a_texcoord<span class="token punctuation">;</span></span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_matrix<span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 将位置和矩阵相乘</span>\n  gl_Position <span class="token operator">=</span> u_matrix <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 传递纹理坐标到片断着色器</span></span><span class="gatsby-highlight-code-line">  v_texcoord <span class="token operator">=</span> a_texcoord<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在片断着色器中声明一个 sampler2D 类型的全局变量，可以让我们引用一个纹理，然后使用从顶点着色器传入的纹理坐标调用 texture2D 方法，在纹理上找到对应的颜色。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26152657011144000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 从顶点着色器中传入的值\nvarying vec2 v_texcoord;\n\n// 纹理\nuniform sampler2D u_texture;\n\nvoid main() {\n   gl_FragColor = texture2D(u_texture, v_texcoord);\n}`, `26152657011144000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{4,6-7,10}"\n              >\n                <span class="gatsby-code-button-language">glsl{4,6-7,10}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器中传入的值</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// 纹理</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_texture<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">   gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们需要设置纹理坐标</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75763353747609900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 找到顶点坐标中的属性\nvar positionLocation = gl.getAttribLocation(program, \'a_position\');\nvar texcoordLocation = gl.getAttribLocation(program, \'a_texcoord\');\n\n// ...\n\n// 为纹理坐标创建一个缓冲\nvar buffer = gl.createBuffer();\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\ngl.enableVertexAttribArray(texcoordLocation);\n\n// 以浮点型格式传递纹理坐标\ngl.vertexAttribPointer(texcoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n// 设置纹理坐标\nsetTexcoords(gl);`, `75763353747609900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3,7,10,12-13,15-16}"\n              >\n                <span class="gatsby-code-button-language">js{3,7,10,12-13,15-16}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 找到顶点坐标中的属性</span>\n<span class="token keyword">var</span> positionLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_position\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texcoordLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_texcoord\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// 为纹理坐标创建一个缓冲</span></span><span class="token keyword">var</span> buffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>texcoordLocation<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// 以浮点型格式传递纹理坐标</span></span><span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>texcoordLocation<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// 设置纹理坐标</span></span><span class="gatsby-highlight-code-line"><span class="token function">setTexcoords</span><span class="token punctuation">(</span>gl<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="f"><a href="#f" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>F</h2>\n<p>如你所见，我们将图像映射到 F 中的每个矩形面上。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40260745130070430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 为 F 设置纹理坐标缓冲\nfunction setTexcoords(gl) {\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array([\n      // 正面左竖\n      0,\n      0,\n      0,\n      1,\n      1,\n      0,\n      0,\n      1,\n      1,\n      1,\n      1,\n      0,\n\n      // 正面上横\n      0,\n      0,\n      0,\n      1,\n      1,\n      0,\n      0,\n      1,\n      1,\n      1,\n      1,\n      0\n\n      //  ...\n    ]),\n    gl.STATIC_DRAW\n  );\n}`, `40260745130070430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 为 F 设置纹理坐标缓冲</span>\n<span class="token keyword">function</span> <span class="token function">setTexcoords</span><span class="token punctuation">(</span><span class="token parameter">gl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>\n    gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n      <span class="token comment">// 正面左竖</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n\n      <span class="token comment">// 正面上横</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">0</span>\n\n      <span class="token comment">//  ...</span>\n    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>事实上使用一个带有 F 的图像能够在结果中清楚的分辨出纹理的方向。</p>\n<p>我们还需要一个纹理，我们可以从头做一个但在这个例子中就直接加载一个图像，因为那可能是常用的做法。</p>\n<p>这是我们将要使用的图像</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-06-11-32-56-600ddd9b9ef854cd730f661916b4f758-34a30.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 256px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAADQElEQVQ4y53Se0wURxwH8O/svVzUAy14R9SkcmrLcXCXAzGBayGmxEeMQhFJjQWixpjYCmo0PojhIbZqaGurRCMhZ1R8lNaYaP/w0dqcxEj/qFUBQcWGcjlB5OEDFXfn5+yKxkTSGJNPJjs7v+9OfjMLmoD3Bl44RPlKUnVcw94ytKqVrRqKgK7o/gG1gm69g9uga6C/tRQecgwQ7j/FyTpvXc0np/1JZ/yeC/74gN9ZfyBWEA9/+l3n/J7f/Ikn/KkHq71tITwlLYjjHL8SavowL3bdEpTvlL78GTMvIvkqnK2YLFxD7EUk/oKMSrZoJYq9WFt8HqcIxxQgiyObMKcfSxJydyP7rDHhpmTvY7JiYCSa0nFY7iHqLxZXi/n5WJByFjmETBEO42wkMXO/tDp+9jmktEn2AZhpFOpt+GIaClJRkIwCLxZ7pM89coYnKtYdbW7QImEqE591M3KjP77MldYKxyPJolghXuz2GdDuNJAHihuqkAA1XvMsTpuSjqmlEm1F/+YfXGk9+ECxMGUqo1zULpatgeXj76yJbimMbimy3yiKbl49pqWIKeWMl70kdm5k1IIHDftcMwYxgkeAp4LW4skh8736mO7Lju46R3epozPHMRg3adeUj9EVkMSt8kZQE9DL2UNCR1+1M0OFkUeCfwbaAvod9AD0GHQJ9C2ez2I0GjUjrWgOGh4TelT0iaM8xNkR7a72xcwchEXsrPpAG3C9UiopjtpWZqv42laRZStPslfaIzPtH6HqLjtKIoXDIpzOWTohvXeXbW4vrKqFPRc952PP7Ah8eMXg6oSrA54gkoKYHkRKCGkKtHqdycTNRoLcWxGx8BYmDECcNqNkVLvHwtQ5KoxkmcsjSLaQbCaLiUxvgA/8U1CSsWdD+NLz8P4L2wBMFI6asWOcCKaDfFB8Wiuv0Wv4kalVoG9M3UXh6/cjM4DEO5hITK5ltk0stJeRKPiJ8WGhHTwEumrsmmPdmIO8EsyohusPjCuFLYBgF0gU/AcalvhvOwihZ6xtq1SyAsvWYekm5G1Bbgnye9BEuKsXBIcl4tt1OwjfESr1Ufhet+PV6vBE2CFwOFR95No0RuDa6Ph/LwDyagrEe1kcagAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 06 11 32 56" title="" data-src="/static/2022-07-06-11-32-56-600ddd9b9ef854cd730f661916b4f758-34a30.png" data-srcset="/static/2022-07-06-11-32-56-600ddd9b9ef854cd730f661916b4f758-b25ce.png 200w,\n/static/2022-07-06-11-32-56-600ddd9b9ef854cd730f661916b4f758-34a30.png 256w" data-sizes="(max-width: 256px) 100vw, 256px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>加载图像的过程是异步的，我们请求图像资源后浏览器需要一段时间去下载。通常有两种处理方法，一种是等纹理下载完成后再开始绘制，另一种是在图像加载前使用生成的纹理，这种方式可以立即启动渲染，一旦图像下载完成就拷贝到纹理。我们将使用下方的方法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91239473052395960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个纹理\nvar texture = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, texture);\n\n// 用 1x1 个蓝色像素填充纹理\ngl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));\n\n// 异步加载图像\nvar image = new Image();\nimage.src = \'resources/f-texture.png\';\nimage.addEventListener(\'load\', function () {\n  // 现在图像加载完成，拷贝到纹理中\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n  gl.generateMipmap(gl.TEXTURE_2D);\n});`, `91239473052395960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个纹理</span>\n<span class="token keyword">var</span> texture <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 用 1x1 个蓝色像素填充纹理</span>\ngl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 异步加载图像</span>\n<span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nimage<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">\'resources/f-texture.png\'</span><span class="token punctuation">;</span>\nimage<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'load\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 现在图像加载完成，拷贝到纹理中</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">generateMipmap</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7x6dzh?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果我只想使用一部分图像覆盖 ‘F’ 的正面怎么办，纹理是通过“纹理坐标”来引用的，纹理坐标 0.0 到 1.0 对应纹理从左到右，0.0 到 1.0 对应第一个像素所在行到最后一行。注意我没有使用上或者下，上下在纹理坐标空间中是没有意义的，因为绘制一些东西后再重定向后，是没有上下的概念的，主要是依据传递给 WebGL 的纹理数据，纹理数据的开头对应纹理坐标 0, 0，结尾对应纹理坐标 1, 1</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-17-11-32-0465f57589514b2252f951d56b875d50-be424.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 169px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 88.75739644970415%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAADRElEQVQ4y62UW2gTWRjH/yexChOtJm13G9uZxCZN1azbFratTRHXW1KKwqK++CK+KAMiKroWEW8v4u1BxSo+7KoLgosgqFApiOKtKlrWG6Gt1VrFS0UURbrNZHI+v5mpaVwEZfHAL+dkzv/8ON/hzEDTNFhNVbXCgKYW43+2g66hgaqqdq+parBUC0auAK4NI+DZ4oay+RvgnGeVG3mWY5ubf4LBoC1sKA0VYNrY/HZULnqG2v6XqOt+gZqe5/jli1hzL1DXxbn+G6JqheX4gHoXAoGALZzury3Er8i/iUPLCZfoPc7SIC5QGleGuJpDO6Vwkd6hlYjnbos/tlqONM678ekM6/2N49AIpUU80FsF0WlBqb/wymzBXfMA7pkHxD/MbZsW0WEeFn3mKUGDbZw9JPo2Wo42kCsrLCuOe91zoVQiqU8FUQyULsRKyVME5HGfz4xmxtnPxmCJrAcZDFWhZ5O9qVxhcSjunQsoqErqiHElDVzZ+GYpeLEoWSNF7L0UNb1S1D5l+iTqXktMlQbnCNWOkMfDQn9DwptgoTjSrYvLHLrOwkXrnR0u2y7RTRncYG4xHcxV5hwZ/IzEsT5HeC1XmJjmCLtO6oLuk6CuNNYtdoShiBTxeVLMSEgxp4l3Ol2KozuloKQhqJNE7xlHSJ05JccrvPOskpOzddB8Ai1M4/ewI4yNlGjm81vhkVjN/dJREq1TJGcM0ALCw/iQcMGwMBD3e0uRUNSk0EOsCxPSY9fBFnp35Mkwjc5MIE+mLMvITJkJg3Ok9QhbyOuGhTUJvxdoVLZ3QT/Gob9Z2LTeEf62BfIEIfNnCvJIZgiyMThHux87wuO5wjkzLWFCud8udL7VJN8g9fAmzHPHYfZ2wOT/ptHPvPqMFA2Aum8J+x7SvznCeLUlbFI612I57ePLtYPZyxxk9jA7mV3/wcrsBz1qFvab8nar25199RonFOejYJbnTjkWD0zGWyOKx4OT8GRgIp5YfSr6RXrTUbx5EMFKe4f02ddG86llAd9PcOVNhE+rQMFX4VxpBEXl5SOKfCWR4Ch2KNnvGYtjXP7P1rioutz3Y2W48Gv8wDl/NKSVRMNjeH0Fr5+SPcPv1T4C4QLCt2tV1fcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 17 11 32" title="" data-src="/static/2022-07-26-17-11-32-0465f57589514b2252f951d56b875d50-be424.png" data-srcset="/static/2022-07-26-17-11-32-0465f57589514b2252f951d56b875d50-be424.png 169w" data-sizes="(max-width: 169px) 100vw, 169px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我将纹理载入到 Photoshop 中得到一些点的坐标。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-17-11-52-1b8b012c6d34e7dd8f80243c6e75a081-bb96f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAEAUlEQVQ4y23Qe1DUVRQH8O/97RsWFldheaXJAjLswqoQMrDApkhaTaOTr15YODWaaCJYKJqCj1EmynQ0dYGspIepM9Y/MiO6QxBlQQ5lSGAgj+FlsaAor989XbBsxpr5zJn5nd/5zr33oGmmosqi7p4h1VnVw8GgIPCgifoQLn4FoDFcWRGhvhmqbAhXNoUp8fNGxdkcrWutsjzXY3C9gjIlOVPimewhoknrWfXr6rJMXUWm6kKW5odsFXgd6CdUl8BdBWoBbwIJzZP1geZ/NOFeHSqLQbUTMChjhFDfjJITMedLHRec8ZeL59aciP621FJ1MrJa+NBS44xyOeeUO+O+KnV8cCjG9T1GCQMycJrjHOHjASyJ3LLU9PyrtoTCgIS8xMizfmGtCL2B0EptRHbsrG1zY3OmL1ydtGCOct1Ol/Q14YtxYCnHs4TFbmRErTygSf10WsjFKUZntPK3aYwAYURizR6qeq3PGc/g3eGzVmlSE8rZMsIzIuzBmScx9YCUFbXoMpJuSoEyNMMGlCTjhXl4OQGvxGFtFDIsihUW/eORPknLtbpaSU+S/g4DuI2RDQNRBdaURoTcVqjHDBCNI/EKtEUqaDbGbZCjRUtzK2LePv+4PN/p54Nji/zjTgaDyfkS7YE776A15Q9MHdew8XBGq1CWrjN881pwy+bAxjcCGzcJpus5Ya7n5n3pUHZs09zZrh7aIU6+xqgRA1eOW+ePQst9wBNB2bh3St1bHdL3nbnvtLkv39y9zDxsCTlsDkX3ZUY3wH8FNQD9nN0mtLuLLakylHwaeCrobdAl0CDoLqgGtB9jixh5oURvxPUexRCJFNxim6c4+4xQ6j5uThuFRpws20G5+KVI2rXdd1+Bae8G096lpt2x/u/4+67wD5KONuJzwikZZSLs4MxBcPQfND3dD4OsYWPizatxZPEUPHpVYe2BtQOzO1lsO2JuG+0XZz31CRKJJcsQKZWKq5UEXf9en+XNCL4Lzbg3ozgU26ZC1aP3IJ1O1mlIp+V2+2Z78oszzR/FxK17LH6DQjkMO3gyKFb1Z67PmgrMaYXpLlRkQKnRGIlOB8iOMfvEU8ae8K5bqP9xgee1hV61aV5X7RjBISYfFRtR3drk86YTSyoR04JHxE3KJL9cqeMYIzFwmHHhfZBwaLIKooM28C5QvbL3ScPW5UjfifnFsFbArwBBNejtZtQq8TZG7fgf4OggdI2w3/dIu9ZizRZkbMVLe5D+liGtIVCs1c1ZlxggdP6XiB+YVEh4l1DEUUR4b0hRdCVgoytkZac2vyYoq817hxjgf0/+S4TNAodZvl9ZiPhs8g44ZtOfC/U7E24sTFFdmjGVECYz8/3hB/4CR7P9mOI83k8AAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 17 11 52" title="" data-src="/static/2022-07-26-17-11-52-1b8b012c6d34e7dd8f80243c6e75a081-bb96f.png" data-srcset="/static/2022-07-26-17-11-52-1b8b012c6d34e7dd8f80243c6e75a081-7728b.png 200w,\n/static/2022-07-26-17-11-52-1b8b012c6d34e7dd8f80243c6e75a081-23f96.png 400w,\n/static/2022-07-26-17-11-52-1b8b012c6d34e7dd8f80243c6e75a081-bb96f.png 512w" data-sizes="(max-width: 512px) 100vw, 512px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>可以像这样将像素坐标转换到纹理坐标</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12883915035139394000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`texcoordX = pixelCoordX / (width - 1);\ntexcoordY = pixelCoordY / (height - 1);`, `12883915035139394000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">texcoordX <span class="token operator">=</span> pixelCoordX <span class="token operator">/</span> <span class="token punctuation">(</span>width <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ntexcoordY <span class="token operator">=</span> pixelCoordY <span class="token operator">/</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>这是正面的纹理坐标</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99844106822190940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 正面左竖\n 38 / 255,  44 / 255,\n 38 / 255, 223 / 255,\n113 / 255,  44 / 255,\n 38 / 255, 223 / 255,\n113 / 255, 223 / 255,\n113 / 255,  44 / 255,\n\n// 正面上横\n113 / 255, 44 / 255,\n113 / 255, 85 / 255,\n218 / 255, 44 / 255,\n113 / 255, 85 / 255,\n218 / 255, 85 / 255,\n218 / 255, 44 / 255,\n\n// 正面中横\n113 / 255, 112 / 255,\n113 / 255, 151 / 255,\n203 / 255, 112 / 255,\n113 / 255, 151 / 255,\n203 / 255, 151 / 255,\n203 / 255, 112 / 255,`, `99844106822190940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">// 正面左竖\n 38 / 255,  44 / 255,\n 38 / 255, 223 / 255,\n113 / 255,  44 / 255,\n 38 / 255, 223 / 255,\n113 / 255, 223 / 255,\n113 / 255,  44 / 255,\n\n// 正面上横\n113 / 255, 44 / 255,\n113 / 255, 85 / 255,\n218 / 255, 44 / 255,\n113 / 255, 85 / 255,\n218 / 255, 85 / 255,\n218 / 255, 44 / 255,\n\n// 正面中横\n113 / 255, 112 / 255,\n113 / 255, 151 / 255,\n203 / 255, 112 / 255,\n113 / 255, 151 / 255,\n203 / 255, 151 / 255,\n203 / 255, 112 / 255,</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>对背面也使用相同的纹理坐标，得到这样的结果。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/x9ilbj?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>并不是非常好看，但是希望这样能展示出纹理坐标的用法。如果你使用代码生成几何体（立方体，球体，等等），通常情况下计算期望的纹理坐标也是比较容易的。另一方面如果通过软件例如 Blender, Maya, 3D Studio Max 制作几何体，那么你的美术（或者你自己）就会用软件调整纹理坐标。</p>\n<p>如果纹理坐标再 0.0 到 1.0 之外会怎样？WebGL 默认会重复纹理，0.0 到 1.0 是一份纹理的“拷贝”，1.0 到 2.0 是另外一份拷贝，-4.0 到 -3.0 也是另外一份拷贝。让我们在一个平面上使用这些纹理坐标。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79401565596822100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-3, -1,\n 2, -1,\n-3,  4,\n-3,  4,\n 2, -1,\n 2,  4,`, `79401565596822100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">-3, -1,\n 2, -1,\n-3,  4,\n-3,  4,\n 2, -1,\n 2,  4,</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是结果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/2mkgm4?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>你可以使用 <code class="language-text">CLAMP_TO_EDGE</code> 告诉 WebGL 再某个方向不需要重复，例如</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38318631865130690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);`, `38318631865130690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>点击上方示例中的按钮，观察结果。</p>\n<p>你可能注意到在加载纹理时调用了 <code class="language-text">gl.generateMipmap</code>，那是干什么的？</p>\n<p>假设我们有这样一个 16×16 像素的纹理。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-18-15-32-2473614d25fdc3c00c8f3d474452a38d-34a30.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 256px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAADTUlEQVQ4y3WU+0tUQRTHz8zdu66Vrpar677cNE1XdOlmhNRCBUXlriK2a1KJZY8fymLdXr4ipOw/iIh+jR4U9UNmkKVmtb1cAy2NQP1BMvxJix6ud+40s3fNNenw5TBnhg9n5nDOAGXmdlMAGh/PPQBBmPlQRt6a1jumtvbezEIWfktIVE9/IQ3zL7UmsDYAVRQ6NES9Xn6m1VKEVPidLTev5WZ624PeLCcLw6LI/AwIFMG9paucadVgOQWUEJ48GKQ+H+cxVuG3ttzsphvpF6PwLNsHRDF0LFu5wbgHbM3YEgBOhsPcDwxQh4PGxZHI9RicEwPLGMuA3i9JKTZWg7VJtNSD5WQEZibL3E9PU6eTILQYnsGacSFhudkP1jMCy8nIeZgZe/zv33RykmzaxOFVzpxzt9mbn2RJvEI6s8V4WGvxIxVTpSwy+dNn6vO+WZKyuuVGWlt7X2b+c5TqMB9CWReQrQFZTyJrQPUxmVUjkQL2dodOt+S23sq8dK9utXebtgLSL2DjeUhtBkMDGM5G/bNXI/N6zdXdM/R68OvVnlFT7bXM5vs5e8+sc1duKfW53D6Xp9Ll2R1RlcuzByD2Dea5SpjqIf1EfIHfHrgeDBXSKZAnMf0CdOKvBPo1ESCpLqrEoxBXC/pjsKIONMdFx5HNd3aMfDTQSax8B/oD6DTQb3+F6XcddHQNR/V0qKPzA1s87Bx48mL8yqvnGzu2Bt5KJafKXGVVJZXl270VMdq13Vv5n4L1hQYvn17/oCSvs7xK2lYE+2FFK9I3gr4pRo0wO0sWiJCZsTFaVf3OCMWP3AU9ZQNrkx4je7atFtsDmoz6OfH1wsyRPiM7d7Cu6JeMxe07C7pLn0lpLOyKt4hmP+vnBU0S7a5wmN93aopIkqzlA9Sfv1yFg1IKC38KmlGNPtlUxxjRXD8Pk3BYYfzwMHG52FSrg/EPTDCSAXfprJLxABsp0eKPwIRwMhRSamoUhrF5xmgxLGOkAN+/q8suSt0H1sbISLLbTkwoBw/yhDodFQQi8r+ivzAlChfxN8tsUxBmBJF9BtcTHHbzkblrezw8p8FA9XomkpxEdcv611s53FUadGVQcanMNiOnYX0yTYh7qbezb+gPwJ4w/p3YzUQAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 18 15 32" title="" data-src="/static/2022-07-26-18-15-32-2473614d25fdc3c00c8f3d474452a38d-34a30.png" data-srcset="/static/2022-07-26-18-15-32-2473614d25fdc3c00c8f3d474452a38d-b25ce.png 200w,\n/static/2022-07-26-18-15-32-2473614d25fdc3c00c8f3d474452a38d-34a30.png 256w" data-sizes="(max-width: 256px) 100vw, 256px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>假设我们要将它绘制在屏幕的 2×2 个像素上，那么这 4 个像素应该使用什么颜色？这里有 256 个像素可以选择，如果在 Photoshop 中将 16×16 的图像缩放到 2×2，它会将每个角 8×8 的像素的平均值赋给这四个像素。不幸的是绘制 64 个像素再求平均在 GPU 中是非常慢的。假设你有一个 2048x2048 像素的纹理想要绘制成 2x2 个像素，就需要对 1024x1024 或 100 万个像素求平均 4 次，这需要很多运算同时速度要快。</p>\n<p>事实上 GPU 使用的是一个纹理贴图（mipmap），纹理贴图是一个逐渐缩小的图像集合，每一个是前一个的四分之一大小，16×16 纹理的纹理贴图看起来像这样。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-18-24-47-826b55e46e30d1e7b02a1f268afb3011-49396.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 526px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.80988593155894%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACn0lEQVQoz32SXUiTURjHn83Nz5E6szWnbUPHJuJHaBATyq/U/EpjbmpCCs2PFG3imuW80MrEJKJQUltptnKZoLeKFwm7y4sgJMIisunKRtb7vr4zt/dpm4gE4e/m/A+c8+M8/A+8n57ecAgEW+sA5DYAVVdUT2mLGyjCk3+ygFyGgK00scax1Ndv+xYldA6kZJHveBH0hRDlj4etPV/GTuSQtcfzVnvPV+2o5PGvwUEQW7i4iMj1RwRAnUaPzWq9L++wOZjPL0eWtG3704ePm4TpGT5QqtAgL8Zw6SXn40GLy9zZikVZuSu9ZWUNueJoEax9tZHogZ5fYJAFTFNBA6NXtzIeIZMp1DAgMWKQuJE29Ew6up+8wZq+DlfLrWy8YkgnLPWVYzNJIrOan6iDPVx/SAp3YdA6j8a2O1hUYMQsKEfg9zMQbESI0NNLb1d+2SzTOFqnwPb0DIxK1JIAAtGe525pCUcpOsaC0tohqqLpOarrx5nqlheYUP0Iawcaccoch5ZxBTM1IUOTKZleHRm20QmxtKlASCzzw5zqwFw7SGvivLJzMYV+3hVvFgKUXByk1I1mVGlNTLl2CvPuN+PIQiy+fKrAVxMy98ykHMdGZd81AIprAOKckxKpiQfSexwQwxElxytKC4r0vbI7OhRgm/69P/KiFW8PncVKnRJPQ6Vn1BtuCO1CONS+Dv4SLvyPsPx/9+u2NZ/QOTfnKYKLHS3x2NOZ4ms5+6jKDZIu5EY32cNDDvO85zPj49jDPDarihvDAn6GzyEKku0LNwiCQqsV3YEB3maxqzMNDddTfUKa7ec+E1mBINLZ5QAhvguhmXAgn2dnKadAgJueb+KVXG1LQn17Mro82QngXmUHY2pEmR2El4N3hacO9P0FBBFJz5t90QUAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 18 24 47" title="" data-src="/static/2022-07-26-18-24-47-826b55e46e30d1e7b02a1f268afb3011-49396.png" data-srcset="/static/2022-07-26-18-24-47-826b55e46e30d1e7b02a1f268afb3011-68c83.png 200w,\n/static/2022-07-26-18-24-47-826b55e46e30d1e7b02a1f268afb3011-d339c.png 400w,\n/static/2022-07-26-18-24-47-826b55e46e30d1e7b02a1f268afb3011-49396.png 526w" data-sizes="(max-width: 526px) 100vw, 526px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>通常每个子图都是前一级的双线性插值，这就是 <code class="language-text">gl.generateMipmap</code> 做的事情，它根据原始图像创建所有的缩小级别，你也可以自己提供缩小级别的图像。</p>\n<p>现在如果你想将 16x16 像素的纹理绘制到屏幕的 2×2 个像素上，WebGL 会从创建的贴图中找到从之前级别贴图插值出的 2×2 贴图来使用。</p>\n<p>你可以为纹理选择不同的贴图筛选条件来控制 WebGL 的插值，一共有这 6 种模式</p>\n<ol>\n<li><code class="language-text">NEAREST</code> 从最大的贴图中选择 1 个像素</li>\n<li><code class="language-text">LINEAR</code> 从最大的贴图中选择 4 个像素然后混合</li>\n<li><code class="language-text">NEAREST_MIPMAP_NEAREST</code> 选择最合适的贴图，然后从上面找到一个像素</li>\n<li><code class="language-text">LINEAR_MIPMAP_NEAREST</code> 选择最合适的贴图，然后取出 4 个像素进行混合</li>\n<li><code class="language-text">NEAREST_MIPMAP_LINEAR</code> 选择最合适的两个贴图，从每个上面选择 1 个像素然后混合</li>\n<li><code class="language-text">LINEAR_MIPMAP_LINEAR</code> 选择最合适的两个贴图，从每个上选择 4 个像素然后混合</li>\n</ol>\n<p>你可以通过这两个例子看到贴图的重要性，第一个显示的是使用 NEAREST 或 LINEAR，只从最大的贴图上选择像素，当物体运动时就会出现抖动。由于每个像素都从最大的图上选择，随着位置和大小的改变，可能会在不同的时间选择不同的像素，从而出现抖动。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/vqm8in?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>观察发现左边和中间的抖动会多于右边。由于右边的使用多级贴图并且混合颜色，绘制的越小 WebGL 挑选的像素离原图关系越远。相反的中间的小图虽然使用了 LINEAR 混合 4 个像素的颜色，但这 4 个像素是从大图中选出来，不同的选择会有较大的差别，所以还是抖动明显。右下角的图保持颜色一致是从右中图中挑选的像素。</p>\n<p>第二个例子显示了一些深入屏幕中的多边形。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/b83r9o?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>6 个深入屏幕的横梁使用的是之前 6 种不同的筛选模式。</p>\n<ol>\n<li>左上使用的是 NEAREST，你会感受到明显的块状感；</li>\n<li>中上使用的是 LINEAR 也没有好到哪里去；</li>\n<li>右上使用的是 <code class="language-text">NEAREST_MIPMAP_NEAREST</code>，点击图像切换纹理，每个贴图都是不同的颜色，就可以清除的看出它使用的是哪个贴图；</li>\n<li>左下使用的是 <code class="language-text">LINEAR_MIPMAP_NEAREST</code>，意思是挑选最合适贴图种的 4 个像素进行混合，你会发现贴图切换的部分非常突兀；</li>\n<li>中下使用的是 <code class="language-text">NEAREST_MIPMAP_LINEAR</code>，也就是找到最合适的两个贴图各取一点进行混合，如果仔细看会发现仍然有块状感，尤其是水平方向；</li>\n<li>右下使用的是 <code class="language-text">LINEAR_MIPMAP_LINEAR</code>，也就是选出最合适的两个贴图各取 4 个点进行混合。</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-26-18-34-03-78ccf98aed0504f340a65ea221cc4dd2-d1477.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 536px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.50746268656717%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACFUlEQVQoz4WSTWgTURDHZ5MaSbWpIcSPNiD21IOiN0HwKl71IlUPHnsQFRJIsKtN05Ztg/TkwQoieBJEPTR4KV68BtQe1IOIXqLJpjRhs++9TTb7xpmsQaRCZ3nM7ts3v/nPzAMTPGmCcu+CEqUxJdq2El1fCSGU6/ueqtV27GRyxwbwVC4rXcSubNpOqw7wo/fwiWvjp1rTzirzfWnt9svKBSgB4gKteVorY4i9Dv5j29tKAPBCzOeHu12/U9nwsbSAztUb1Z+YvYSzsA/YGFY0tL4PWlsJrVVba0Stgz57xHZLdPJ54eRylHRe98uriNZyV35BXPOuz6z/ArjCHKTn8fOnUWBlDDPJL49SbneoIgR6PUmapeT3chmRlQIEkhhx+GP9Z2dHLuNk+MFlsjKGPTiG6NRCKCv1ybcastNsug1KICyr7xBMxeO9xrnz745y/CacjIYKAexYDIB7xsEMYRhDGU5JglVKtnRINdYLm8erX1+nbs6+OZJIVA5nMhvp02dWIgyambw2EPY2nQZrepoL+FseQxlmhm0IiuTnQNVPwecY/McymRe7NxkUDiAcCJfPPS1GdLBIf+9FVb1w4uNBPlu4+C1iGFtGKvXBmJp6NIifmHi1Gzg0Lp97yoNidUsMjHj2nfGtA3x2bqQNe5rneVJK5fJl5ku9OK4ElSlImUuwHkG+30pWRwcK99f35P0GGKax+c9h9fsAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 26 18 34 03" title="" data-src="/static/2022-07-26-18-34-03-78ccf98aed0504f340a65ea221cc4dd2-d1477.png" data-srcset="/static/2022-07-26-18-34-03-78ccf98aed0504f340a65ea221cc4dd2-bb263.png 200w,\n/static/2022-07-26-18-34-03-78ccf98aed0504f340a65ea221cc4dd2-9a78f.png 400w,\n/static/2022-07-26-18-34-03-78ccf98aed0504f340a65ea221cc4dd2-d1477.png 536w" data-sizes="(max-width: 536px) 100vw, 536px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>你可能会想既然理论上 <code class="language-text">LINEAR_MIPMAP_LINEAR</code> 是最好的选择为什么还要有其他选择</p>\n<ol>\n<li><code class="language-text">LINEAR_MIPMAP_LINEAR</code> 是最慢的，读 8 个像素比读 1 个像素慢一些，在现代的 GPU 上如果一次使用一个贴图可能没什么问题，但是现在的游戏可能一次就需要 2 到 4 个贴图，4 贴图 * 8 像素每贴图 = 绘制每个像素需要读取 32 个像素，那就会慢很多了。</li>\n<li>如果想实现特定的效果，比如做一些复古的东西可能就需要使用 NEAREST。贴图也占用内存，事实上它占用额外 33% 的内存，那是非常多的内存，尤其是使用很大的纹理例如想要在游戏的标题屏幕上绘制的东西。如果你不会绘制比最大的贴图要小的东西，为什么要把内存浪费在贴图上，直接使用 NEAREST 或 LINEAR 就只使用第一个贴图。</li>\n</ol>\n<p>设置筛选器可以调用 <code class="language-text">gl.texParameter</code></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51939562656872210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);`, `51939562656872210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR_MIPMAP_LINEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<ul>\n<li><code class="language-text">TEXTURE_MIN_FILTER</code> 是当绘制的比最大贴图小的时候。</li>\n<li><code class="language-text">TEXTURE_MAG_FILTER</code> 是绘制的比最大的贴图大的时候。</li>\n<li>对于 <code class="language-text">TEXTURE_MAG_FILTER</code> 只有 NEAREST 和 LINEAR 两个可选设置。</li>\n</ul>\n<p>假设我们想使用这个纹理。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-27-11-18-57-ed68bb1d941ff88c000e39ce803fc505-4493b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 320px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAADaElEQVQozxVRaVcaZxh9Z4CZgRlmnMyArLLIolhlcaWIrFG2pmg8LohoNcegLUEhCG5piFZjBRPSaM7pMamk1Hh6mn7ol35p+9v6+u2e5973Pve5L5jPLLQRouiDqYNiDgCQ3cxHImEIdvaf7ZWfCgDoUClkUpIUIo3z08ZJdcSinot4cysLj772AwxFRJi4XN65P+yCb8IhX4ec5Rjm5vbTeGCsTYK/u77qULSTmPDXm98yi2moMXcaWFJCCgUgExpZnYq1Xh+HB3rMGoWckeIIMur1335qsXcLUWefjUKB3d77379/93VbxAAkJ+N6jQaDNlaeGtLLN9eWW9WN76L9xWn/esJ98WK79fal26ZzdpvUfBuGgIXUXPP6ZxGKihFA4xgpQDmGAl2WTmgxu7j8/VYWuiqlhFUm7Tdpa9WdP2qljdhAZT5UmA3evv2h+eY46LIE3E6LXsNT4k6TARjVMlpCnp+9DPbbWEqSLz7RtvMIAPXG68rWt9BXw9JWFdejUx6Vc//8cpp7MFya8RZmRo/zd/eDPufgq+eVexiqU8mXlmYVDGnU6//6fON22CgRmoiNKzkWysqlfO3kEAWAE+MqKdGlkYH7zq7dx5n97KIEw2CFKApZEInFmxd1lhDJadJu62JwISMhrq/eraZmIe3zeDzuMQLGS/sc1cdz5/n5vRnPk6Tnm5jHY7ee7G7t57MoglASEpYEizUZjJ9bzcE+OwFAPBqfmpqHnQHIcYyUI0Rzk9HfX6wtjdk2k6NXh9uXexu5+GA6NJjwDnQbtF9Fwh8uGpREiqOIRIhSQgGNCcD0w0mrTg0jZNezhZUUzEwTRHsbbVIqUrHwn2elymyoMO1/f1z6+OZkOTISG7Y5u4xGrYqjpcDvHZVRBHdPdn54MNZrpnHhRDBk0evgbYHx+M3HJs/yuEDEs5zL7kj4hurF1avt9MFStDgXBgIUFQIwOPTlWWmdF4sULJNKrXS0y+CdpUrl6NkBCpAOtcrpcIkxHOYqlJ4eVZ+zDNdrNYNgr1krl2WS8dXkBOQoAZBRJIsLeY6/uLxMzy/Aodfr3zuswf1SSvqqcZ5O3Q1JTATWJjw7D/2NR4ndaV+gR+fqtalVSvi9JrP1p/qPX/Q4oK6NZnm5EgKtwVirn3q8PoiDwcD/9JnJ+bKL33UAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 27 11 18 57" title="" data-src="/static/2022-07-27-11-18-57-ed68bb1d941ff88c000e39ce803fc505-4493b.png" data-srcset="/static/2022-07-27-11-18-57-ed68bb1d941ff88c000e39ce803fc505-102e5.png 200w,\n/static/2022-07-27-11-18-57-ed68bb1d941ff88c000e39ce803fc505-4493b.png 320w" data-sizes="(max-width: 320px) 100vw, 320px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这是结果。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ibn1oh?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>为什么键盘的纹理没有出现？那是因为 WebGL 限制了纹理的维度必须是 2 的整数次幂，2 的幂有 <code class="language-text">1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048</code> 等等。<code class="language-text">F</code> 纹理是 256 × 256，256 是 2 的幂。键盘纹理是 320x240，都不是 2 的幂，所以显示纹理失败，在着色器中当 texture2D 被调用的时候由于纹理没有正确设置，就会使用颜色 <code class="language-text">(0, 0, 0, 1)</code> 也就是黑色。如果打开 JavaScript 控制台或者浏览器控制台，根据浏览器不同可能会显示不同的错误信息，像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64061182923910990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`WebGL: INVALID_OPERATION: generateMipmap: level 0 not power of 2\n   or not all the same size\nWebGL: drawArrays: texture bound to texture unit 0 is not renderable.\n   It maybe non-power-of-2 and have incompatible texture filtering or\n   is not \'texture complete\'.`, `64061182923910990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">WebGL: INVALID_OPERATION: generateMipmap: level 0 not power of 2\n   or not all the same size\nWebGL: drawArrays: texture bound to texture unit 0 is not renderable.\n   It maybe non-power-of-2 and have incompatible texture filtering or\n   is not &#39;texture complete&#39;.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>解决这个问题只需要将包裹模式设置为 <code class="language-text">CLAMP_TO_EDGE</code> 并且通过设置过滤器为 <code class="language-text">LINEAR or NEAREST</code> 来关闭贴图映射。</p>\n<p>让我们来更新图像加载的代码解决这个问题，首先需要一个方法判断一个数是不是 2 的幂。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98745607029603200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function isPowerOf2(value) {\n  return (value & (value - 1)) == 0;\n}`, `98745607029603200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">isPowerOf2</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;</span> <span class="token punctuation">(</span>value <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>我不准备深入讲解二进制运算，以及它的的原理。有了它后，就可以这样使用。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/g387je?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="6-个面"><a href="#6-%E4%B8%AA%E9%9D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6 个面</h2>\n<p>一个常见的问题是 <code class="language-text">如何为立方体的每个面设置不同的图像？</code>，假设我们有 6 个这样的图片。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-27-11-25-05-5de944cbd03733d24939020a6120f6c2-ad3a8.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 396px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.1919191919192%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAEAElEQVQ4yxWRW0yTBwCF/2SOxagM5pQoq4CuoKiASpGGu2i5CBStglWGXIWyf4AKAwq0Ugad0mq1SFELTDaYiAoIiJepRLwEAph5QUFFnXFuS3zcEh+Wb+zhPJ7z5Zwj3Ou289hezHitivGqBO5q4xipFxnvsDB4UMPtGjW/95bx4bmdkZOlTDXtZ/LKj1w5+wONubuwqRQcVcdi1Ru42N2HMKZXMpi4iAn9Jh6IMkZS3BkI+oTB8h10ZocyVhDAr21h3GyR87SpmOEDCdxpKKF9exTtG32xBHmhXelK8jwH4uVyhFuaMM6XyjAX+VO1YwUm5UrawhdyIyOIF7Xx/NmZT59xI816OW+v1THRUkjH7khGNdFM/HSU232HqS+Oo3XzGso8XBCGxGC0qR4klXmSJa4gJ0aKNlxKz4zpb1sM7wYqmbxu4fFlM6+GTjFYl8aZzE3c3elPty6NoR4LHSXJNKx3x+K/DOFO6UYqIpeQlezN5q0eJKu8SVi3BL06lOFvQxipSpypupdHnbX8UpdKof9C2tKjGFP50BDogTklHnOEDIPLHMok8/8PjKRZ9jHNKg9EuROqtXPx83XimCGLXrUv9oBZjCY6ciHSGeua2RySzWXEpmPgayX1rg7YAlw4KHWkxPEjWjRpCP+8HOX9tWZedegZPVrE/RYzr4cHeHzjEk9OmnjbcYRpewW/2St5d/YwTxu/Z6znHNMvJpjobefRaRM3G0zc6+/h/t0bCMYaA9k5uewTRcpLSygoKmKbajv2Bgvvb7by7PRBnvx8hKk+Oy8Hz/HH8/uMDvbxorWRWzYr79+9Zur2df6aGmegqREhyFOCsyAgmZHcxRl1iA+m6ly6WowY4mZmSFnKXs1aNCpfCn0W0Kz0o8tawfgZC5NNBbxp2sn0CTUP6tO5pEtBSFntzWonR9YucsZ38WzyYlaxWyEnY3ssplOp5FTFUKJVkhYhJ0HqSrtGybNbfUwcT+ZDayRXLeHsS/VCFyXBmr8eoeWraJQL5pC0QcbVRh3D3SL9x9U0GTPp70rncus3bF7tScSihWwLkmKIl9JZlMW0LZZH1cHUZIURHPwloQFuKDZ4Izw0ZjBWoeZencjDNhun87cwad1B/7E8KgoisFWq0WZuIXyxK6KPhPLFs+gqzuB1r40hwx6M+4PJF/3ISfKiukCGcKE2j39H7LxpFLmYF4lJ5oLVx5G63Qq0M8TqdV9glrlR7Sehevmn6NwdqN+TjH7XVmrVCvap/SjZ4kqbKOV8gR/C8qXuhKxww56toCw+kANxq9ArZs5Iiua7wGXols3D6Ps5hS4OlPtLuFSTi+2QDrf5n5EZ6IU5I4zK9FBO7FpHdsgq/gPV0ZSNWhnZqgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 27 11 25 05" title="" data-src="/static/2022-07-27-11-25-05-5de944cbd03733d24939020a6120f6c2-ad3a8.png" data-srcset="/static/2022-07-27-11-25-05-5de944cbd03733d24939020a6120f6c2-2a85e.png 200w,\n/static/2022-07-27-11-25-05-5de944cbd03733d24939020a6120f6c2-ad3a8.png 396w" data-sizes="(max-width: 396px) 100vw, 396px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>脑中出现了 3 个答案</p>\n<ol>\n<li>\n<p>制作一个复杂的着色器，引用 6 个纹理，传入一些额外的顶点信息表明使用的纹理是什么。不要这样做！稍微一想就知道你要写一大堆不同的着色器应用于不同面数量的图形之类。</p>\n</li>\n<li>\n<p>绘制 6 个面代替立方体，这是常用的解决办法，不错但是只能用在简单的图形例如立方体。如果有一个包含 1000 个方形的图形就要绘制 1000 个面，会非常慢。</p>\n</li>\n<li>\n<p>我敢说，最好的方法就是将图像放在一个纹理中，然后利用纹理坐标映射不同的图像到每个面，这是很多高性能应用（读作游戏）使用的技术。例如我们将所有的图像放入这样一个纹理中</p>\n</li>\n</ol>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-27-11-25-42-8e1dad0514f14feaa56c6d74c490f512-bb96f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACFElEQVQoz2PYWJN+uCP33saOqysaV1QkzosyO9vh8PZk6rm5WRd7I7aXOczJNplZ4Lgs32drTxEfHw8DAwMjIyMDBJyam/l5jdemVv0JiSrTMnT2FJvdnO6+vEPyyvLcU93BNRXmmY12SZFWoepiC7J8hISFUDRfmOR3qdMiI87Q1FLG21b0dr/l0911J9bVPjo6eXW156wJDjO6Yu2kZcPMFNp8tbhZWEGaGWBga2fx0tLoiky1+lS5GbkK27JUz9Y53FyQs7nUpdpGuDJEoz/RIdVEPV+Zp0SCkR2sBaHZ0VCvyM+0JFxrSprehGj9eQG6a/1EN/oKzLAXnuKu2uag2mEh02Yi0emgOifDm4eLA+xsmOZ19RH78yzOlVvsSdaak+Jgpy5rLCkYYKgc6WqanxyyoKmo21GvVkO4xMWmqaGRg4MDxc+HkhS3l2quzNFdGyS2wYnbUZxPnotdW5i1IMQiO8pjSZD56eashZXBjZZyYZKCLMzMDMhgTbxicrFMfKZMjofSdHflJlOZcAOl5V35R1amzCtz2OyvfGBS4bal9fOD9FtVBdH9vDpCrNRHLjpc3sdd2kNf+EJ/4ruVVUc7cxdGm2/Js1rvrTjdXGpCqGOTLHeZkhgXBzuK5hNNvpuipCf7ixe7KpZn+yX4Wa2tDp2XbN3vKl7lorR6Yt1KP6OZlhKdtgbL2qt5eVESCQBl2rROD+pDJwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 27 11 25 42" title="" data-src="/static/2022-07-27-11-25-42-8e1dad0514f14feaa56c6d74c490f512-bb96f.png" data-srcset="/static/2022-07-27-11-25-42-8e1dad0514f14feaa56c6d74c490f512-7728b.png 200w,\n/static/2022-07-27-11-25-42-8e1dad0514f14feaa56c6d74c490f512-23f96.png 400w,\n/static/2022-07-27-11-25-42-8e1dad0514f14feaa56c6d74c490f512-bb96f.png 512w" data-sizes="(max-width: 512px) 100vw, 512px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然后为立方体的每个面设置不同的纹理坐标。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23603249807189420000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 选择左下图\n0   , 0  ,\n0   , 0.5,\n0.25, 0  ,\n0   , 0.5,\n0.25, 0.5,\n0.25, 0  ,\n// 选择中下图\n0.25, 0  ,\n0.5 , 0  ,\n0.25, 0.5,\n0.25, 0.5,\n0.5 , 0  ,\n0.5 , 0.5,\n// 选择中右图\n0.5 , 0  ,\n0.5 , 0.5,\n0.75, 0  ,\n0.5 , 0.5,\n0.75, 0.5,\n0.75, 0  ,\n// 选择左上图\n0   , 0.5,\n0.25, 0.5,\n0   , 1  ,\n0   , 1  ,\n0.25, 0.5,\n0.25, 1  ,\n// 选择中上图\n0.25, 0.5,\n0.25, 1  ,\n0.5 , 0.5,\n0.25, 1  ,\n0.5 , 1  ,\n0.5 , 0.5,\n// 选择右上图\n0.5 , 0.5,\n0.75, 0.5,\n0.5 , 1  ,\n0.5 , 1  ,\n0.75, 0.5,\n0.75, 1  ,`, `23603249807189420000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">// 选择左下图\n0   , 0  ,\n0   , 0.5,\n0.25, 0  ,\n0   , 0.5,\n0.25, 0.5,\n0.25, 0  ,\n// 选择中下图\n0.25, 0  ,\n0.5 , 0  ,\n0.25, 0.5,\n0.25, 0.5,\n0.5 , 0  ,\n0.5 , 0.5,\n// 选择中右图\n0.5 , 0  ,\n0.5 , 0.5,\n0.75, 0  ,\n0.5 , 0.5,\n0.75, 0.5,\n0.75, 0  ,\n// 选择左上图\n0   , 0.5,\n0.25, 0.5,\n0   , 1  ,\n0   , 1  ,\n0.25, 0.5,\n0.25, 1  ,\n// 选择中上图\n0.25, 0.5,\n0.25, 1  ,\n0.5 , 0.5,\n0.25, 1  ,\n0.5 , 1  ,\n0.5 , 0.5,\n// 选择右上图\n0.5 , 0.5,\n0.75, 0.5,\n0.5 , 1  ,\n0.5 , 1  ,\n0.75, 0.5,\n0.75, 1  ,</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7he08e?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>这种将多个图像通过一个纹理提供的方法通常被叫做纹理图集，它是最好的方式，因为只需要加载一个贴图，着色器也会因为只用一个贴图而保持简单，不同于多个平面需要多次调用绘制，这样只需要调用一次绘制。</p>\n<h2 id="uvs-vs-纹理坐标"><a href="#uvs-vs-%E7%BA%B9%E7%90%86%E5%9D%90%E6%A0%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UVs vs. 纹理坐标</h2>\n<p>纹理坐标经常被简写为 <code class="language-text">texture coords</code>，<code class="language-text">texcoords</code> 或 UVs(发音为 Ew-Vees)，我不知道术语 UVs 是从哪来的，除了一点那就是顶点位置使用 <code class="language-text">x, y, z, w</code>，所以对于纹理坐标他们决定使用 <code class="language-text">s, t, u, v</code>，好让你清楚使用的两个类型的区别。有了这些你可能会想它应该读作 Es-Tees，因为纹理包裹的设置被叫做 <code class="language-text">TEXTURE_WRAP_S</code> 和 <code class="language-text">TEXTURE_WRAP_T</code>，但是出于某些原因我的图形相关的同事都叫它 Ew-Vees。</p>\n<p>所以现在你就知道了如果有人说 UVs 其实就是再说纹理坐标。</p>\n<h1 id="webgl-数据纹理"><a href="#webgl-%E6%95%B0%E6%8D%AE%E7%BA%B9%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 数据纹理</h1>\n<p>上节中讲到了纹理的工作原理以及如何使用，我们用下载的图像创建纹理，在这篇文章中我们将直接用 JavaScript 创建数据。</p>\n<p>用 JavaScript 为纹理创建数据是比较直接的，默认情况下 WebGL1 只支持少量数据类型的纹理</p>\n<table>\n<thead>\n<tr>\n<th align="left">格式</th>\n<th align="left">数据类型</th>\n<th align="left">通道数</th>\n<th align="left">单像素字节数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="left">RGBA</td>\n<td align="left">UNSIGNED_BYTE</td>\n<td align="left">4</td>\n<td align="left">4</td>\n</tr>\n<tr>\n<td align="left">RGB</td>\n<td align="left">UNSIGNED_BYTE</td>\n<td align="left">3</td>\n<td align="left">3</td>\n</tr>\n<tr>\n<td align="left">RGBA</td>\n<td align="left"><code class="language-text">UNSIGNED_SHORT_4_4_4_4</code></td>\n<td align="left">4</td>\n<td align="left">2</td>\n</tr>\n<tr>\n<td align="left">RGBA</td>\n<td align="left"><code class="language-text">UNSIGNED_SHORT_5_5_5_1</code></td>\n<td align="left">4</td>\n<td align="left">2</td>\n</tr>\n<tr>\n<td align="left">RGB</td>\n<td align="left"><code class="language-text">UNSIGNED_SHORT_5_6_5</code></td>\n<td align="left">3</td>\n<td align="left">2</td>\n</tr>\n<tr>\n<td align="left">LUMINANCE_ALPHA</td>\n<td align="left">UNSIGNED_BYTE</td>\n<td align="left">2</td>\n<td align="left">2</td>\n</tr>\n<tr>\n<td align="left">LUMINANCE</td>\n<td align="left">UNSIGNED_BYTE</td>\n<td align="left">1</td>\n<td align="left">1</td>\n</tr>\n<tr>\n<td align="left">ALPHA</td>\n<td align="left">UNSIGNED_BYTE</td>\n<td align="left">1</td>\n<td align="left">1</td>\n</tr>\n</tbody>\n</table>\n<p>让我们创建一个 3×2 像素的 LUMINANCE（亮度/黑白）纹理，由于它是 LUMINANCE 纹理，所以每个像素只有一个值，在 R，G，B 通道是相同的。</p>\n<p>我们继续使用上篇文章中的例子，首先修改纹理坐标，每个面使用整个纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30759095572856410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 填充立方体纹理坐标的缓冲\nfunction setTexcoords(gl) {\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array([\n      // 正面\n      0,\n      0,\n      0,\n      1,\n      1,\n      0,\n      1,\n      0,\n      0,\n      1,\n      1,\n      1\n      // ...\n    ])\n  );\n}`, `30759095572856410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 填充立方体纹理坐标的缓冲</span>\n<span class="token keyword">function</span> <span class="token function">setTexcoords</span><span class="token punctuation">(</span><span class="token parameter">gl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>\n    gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n      <span class="token comment">// 正面</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span><span class="token punctuation">,</span>\n      <span class="token number">1</span>\n      <span class="token comment">// ...</span>\n    <span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后修改代码创建一个纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77519043409132110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个纹理\nvar texture = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, texture);\n\n// // 用 1x1 的蓝色像素填充纹理\n// gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n//               new Uint8Array([0, 0, 255, 255]));\n\n// 用 3x2 的像素填充纹理\nconst level = 0;\nconst internalFormat = gl.LUMINANCE;\nconst width = 3;\nconst height = 2;\nconst border = 0;\nconst format = gl.LUMINANCE;\nconst type = gl.UNSIGNED_BYTE;\nconst data = new Uint8Array([128, 64, 128, 0, 192, 0]);\ngl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, format, type, data);\n\n// 设置筛选器，我们不需要使用贴图所以就不用筛选器了\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n// // 异步加载图像\n// ...`, `77519043409132110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个纹理</span>\n<span class="token keyword">var</span> texture <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// // 用 1x1 的蓝色像素填充纹理</span>\n<span class="token comment">// gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,</span>\n<span class="token comment">//               new Uint8Array([0, 0, 255, 255]));</span>\n\n<span class="token comment">// 用 3x2 的像素填充纹理</span>\n<span class="token keyword">const</span> level <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> internalFormat <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> height <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> border <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> format <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> type <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">192</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> level<span class="token punctuation">,</span> internalFormat<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> border<span class="token punctuation">,</span> format<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 设置筛选器，我们不需要使用贴图所以就不用筛选器了</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// // 异步加载图像</span>\n<span class="token comment">// ...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/h9ssxi?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>发现不生效，查看 JavaScript 控制台看到这样的错误信息</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64109382879471075000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`WebGL: INVALID_OPERATION: texImage2D: ArrayBufferView not big enough for request`, `64109382879471075000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">WebGL: INVALID_OPERATION: texImage2D: ArrayBufferView not big enough for request</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>结果是 WebGL 中有一种首次创建 OpenGL 后的模糊设定，计算机有时在数据为某些特定大小时速度会快一些，例如一次拷贝 2，4 或 8 个字节比一次拷贝 1 个字节要快，WebGL 默认使用 4 字节长度，所以它期望每一行数据是多个 4 字节数据（最后一行除外）。</p>\n<p>我们之前的数据每行只有 3 个字节，总共为 6 字节，但是 WebGL 试图在第一行获取 4 个字节，第二行获取 3 个字节，总共 7 个字节，所以会出现这样的报错。</p>\n<p>我们可以告诉 WebGL 一次处理 1 个字节</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="43462770627683440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const alignment = 1;\ngl.pixelStorei(gl.UNPACK_ALIGNMENT, alignment);`, `43462770627683440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> alignment <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">pixelStorei</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">UNPACK_ALIGNMENT</span><span class="token punctuation">,</span> alignment<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>有效参数为 1，2，4 和 8</p>\n<p>我觉得你可能无法计算出对齐数据和非对齐数据的速度区别，所以希望默认值是 1 而不是 4，这样这个问题就不会困扰新手，但是为了适配 OpenGL，所以要保留相同的默认设置，这样移植应用就不用改变行数，然后可以为新的应用在需要的地方设置属性为 1。</p>\n<p>有了这个设置后就能正常运行了</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/25tn1o?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h1 id="webgl-渲染到纹理"><a href="#webgl-%E6%B8%B2%E6%9F%93%E5%88%B0%E7%BA%B9%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 渲染到纹理</h1>\n<p>上篇讲到如何利用 JavaScript 向纹理提供数据，这篇文章我们会使用 WebGL 渲染内容到纹理上，这个话题在图像处理中简单讲到过，但这里将详细介绍。</p>\n<p>渲染到纹理非常简单，创建一个确定大小的纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4126385100515639300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建渲染对象\nconst targetTextureWidth = 256;\nconst targetTextureHeight = 256;\nconst targetTexture = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, targetTexture);\n\n{\n  // 定义 0 级的大小和格式\n  const level = 0;\n  const internalFormat = gl.RGBA;\n  const border = 0;\n  const format = gl.RGBA;\n  const type = gl.UNSIGNED_BYTE;\n  const data = null;\n  gl.texImage2D(\n    gl.TEXTURE_2D,\n    level,\n    internalFormat,\n    targetTextureWidth,\n    targetTextureHeight,\n    border,\n    format,\n    type,\n    data\n  );\n\n  // 设置筛选器，不需要使用贴图\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n}`, `4126385100515639300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建渲染对象</span>\n<span class="token keyword">const</span> targetTextureWidth <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> targetTextureHeight <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> targetTexture <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> targetTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token punctuation">{</span>\n  <span class="token comment">// 定义 0 级的大小和格式</span>\n  <span class="token keyword">const</span> level <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> internalFormat <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> border <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> format <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> type <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>\n    gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span>\n    level<span class="token punctuation">,</span>\n    internalFormat<span class="token punctuation">,</span>\n    targetTextureWidth<span class="token punctuation">,</span>\n    targetTextureHeight<span class="token punctuation">,</span>\n    border<span class="token punctuation">,</span>\n    format<span class="token punctuation">,</span>\n    type<span class="token punctuation">,</span>\n    data\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置筛选器，不需要使用贴图</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>注意 data 是 null，我们不需要提供数据，只需要让 WebGL 分配一个纹理。</p>\n<p>接下来创建一个帧缓冲（framebuffer），帧缓冲只是一个附件集，附件是纹理或者 renderbuffers，我们之前讲过纹理，Renderbuffers 和纹理很像但是支持纹理不支持的格式和可选项，同时不能像纹理那样直接将 renderbuffer 提供给着色器。</p>\n<p>让我们来创建一个帧缓冲并和纹理绑定</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13857228125344356000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建并绑定帧缓冲\nconst fb = gl.createFramebuffer();\ngl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n\n// 附加纹理为第一个颜色附件\nconst attachmentPoint = gl.COLOR_ATTACHMENT0;\ngl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, targetTexture, level);`, `13857228125344356000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建并绑定帧缓冲</span>\n<span class="token keyword">const</span> fb <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createFramebuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindFramebuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">,</span> fb<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 附加纹理为第一个颜色附件</span>\n<span class="token keyword">const</span> attachmentPoint <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">COLOR_ATTACHMENT0</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">framebufferTexture2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">,</span> attachmentPoint<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> targetTexture<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>与纹理和缓冲相似，在创建完帧缓冲后我们需要将它绑定到 FRAMEBUFFER 绑定点，那样所有的方法都会作用到绑定的帧缓冲，无论是哪个帧缓冲。</p>\n<p>绑定帧缓冲后，每次调用 <code class="language-text">gl.clear</code>, <code class="language-text">gl.drawArrays</code> 或 <code class="language-text">gl.drawElements</code> WebGL 都会渲染到纹理上而不是画布上。</p>\n<p>将原来的渲染代码构造成一个方法，就可以调用两次，一次渲染到纹理，一次渲染到画布。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78559203003595540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function drawCube(aspect) {\n  // 告诉它使用的程序（着色器对）\n  gl.useProgram(program);\n\n  // 启用位置属性\n  gl.enableVertexAttribArray(positionLocation);\n\n  // 绑定到位置缓冲\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n  // 告诉位置属性如何从 positionBuffer (ARRAY_BUFFER) 中读取数据\n  var size = 3; // 每次迭代需要三个单位数据\n  var type = gl.FLOAT; // 单位数据类型为 32 位浮点型\n  var normalize = false; // 不需要单位化\n  var stride = 0; // 每次迭代移动的距离\n  var offset = 0; // 从缓冲起始处开始\n  gl.vertexAttribPointer(positionLocation, size, type, normalize, stride, offset);\n\n  // 启用纹理坐标属性\n  gl.enableVertexAttribArray(texcoordLocation);\n\n  // 绑定纹理坐标缓冲\n  gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n\n  // 告诉纹理坐标属性如何从 texcoordBuffer 读取数据\n  var size = 2; // 每次迭代两个单位数据\n  var type = gl.FLOAT; // 单位数据类型是 32 位浮点型\n  var normalize = false; // 不需要单位化数据\n  var stride = 0; // 每次迭代移动的数据\n  var offset = 0; // 从缓冲起始处开始\n  gl.vertexAttribPointer(texcoordLocation, size, type, normalize, stride, offset);\n\n  // 计算投影矩阵\n\n  // var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n  var projectionMatrix = m4.perspective(fieldOfViewRadians, aspect, 1, 2000);\n\n  var cameraPosition = [0, 0, 2];\n  var up = [0, 1, 0];\n  var target = [0, 0, 0];\n\n  // 计算相机矩阵\n  var cameraMatrix = m4.lookAt(cameraPosition, target, up);\n\n  // 根据相机矩阵计算视图矩阵\n  var viewMatrix = m4.inverse(cameraMatrix);\n\n  var viewProjectionMatrix = m4.multiply(projectionMatrix, viewMatrix);\n\n  var matrix = m4.xRotate(viewProjectionMatrix, modelXRotationRadians);\n  matrix = m4.yRotate(matrix, modelYRotationRadians);\n\n  // 设置矩阵\n  gl.uniformMatrix4fv(matrixLocation, false, matrix);\n\n  // 使用纹理单元 0\n  gl.uniform1i(textureLocation, 0);\n\n  // 绘制几何体\n  gl.drawArrays(gl.TRIANGLES, 0, 6 * 6);\n}`, `78559203003595540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">drawCube</span><span class="token punctuation">(</span><span class="token parameter">aspect</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 告诉它使用的程序（着色器对）</span>\n  gl<span class="token punctuation">.</span><span class="token function">useProgram</span><span class="token punctuation">(</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 启用位置属性</span>\n  gl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>positionLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绑定到位置缓冲</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> positionBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉位置属性如何从 positionBuffer (ARRAY_BUFFER) 中读取数据</span>\n  <span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代需要三个单位数据</span>\n  <span class="token keyword">var</span> type <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">;</span> <span class="token comment">// 单位数据类型为 32 位浮点型</span>\n  <span class="token keyword">var</span> normalize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 不需要单位化</span>\n  <span class="token keyword">var</span> stride <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代移动的距离</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 从缓冲起始处开始</span>\n  gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>positionLocation<span class="token punctuation">,</span> size<span class="token punctuation">,</span> type<span class="token punctuation">,</span> normalize<span class="token punctuation">,</span> stride<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 启用纹理坐标属性</span>\n  gl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>texcoordLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绑定纹理坐标缓冲</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> texcoordBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉纹理坐标属性如何从 texcoordBuffer 读取数据</span>\n  <span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代两个单位数据</span>\n  <span class="token keyword">var</span> type <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">;</span> <span class="token comment">// 单位数据类型是 32 位浮点型</span>\n  <span class="token keyword">var</span> normalize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 不需要单位化数据</span>\n  <span class="token keyword">var</span> stride <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代移动的数据</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 从缓冲起始处开始</span>\n  gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>texcoordLocation<span class="token punctuation">,</span> size<span class="token punctuation">,</span> type<span class="token punctuation">,</span> normalize<span class="token punctuation">,</span> stride<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 计算投影矩阵</span>\n\n  <span class="token comment">// var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;</span>\n  <span class="token keyword">var</span> projectionMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">perspective</span><span class="token punctuation">(</span>fieldOfViewRadians<span class="token punctuation">,</span> aspect<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> cameraPosition <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> up <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 计算相机矩阵</span>\n  <span class="token keyword">var</span> cameraMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>cameraPosition<span class="token punctuation">,</span> target<span class="token punctuation">,</span> up<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 根据相机矩阵计算视图矩阵</span>\n  <span class="token keyword">var</span> viewMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>cameraMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> viewProjectionMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>projectionMatrix<span class="token punctuation">,</span> viewMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">xRotate</span><span class="token punctuation">(</span>viewProjectionMatrix<span class="token punctuation">,</span> modelXRotationRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">yRotate</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> modelYRotationRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置矩阵</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>matrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 使用纹理单元 0</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>textureLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制几何体</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>注意到我们需要传入 aspect 计算投影矩阵，因为目标纹理的比例和画布不同。</p>\n<p>然后这样调用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8460290137394110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 绘制场景\nfunction drawScene(time) {\n  // ...\n\n  {\n    // 通过绑定帧缓冲绘制到纹理\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n\n    // 使用 3×2 的纹理渲染立方体\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // 告诉 WebGL 如何从裁剪空间映射到像素空间\n    gl.viewport(0, 0, targetTextureWidth, targetTextureHeight);\n\n    // 清空画布和深度缓冲\n    gl.clearColor(0, 0, 1, 1); // clear to blue\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    const aspect = targetTextureWidth / targetTextureHeight;\n    drawCube(aspect);\n  }\n\n  {\n    // 渲染到画布\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    // 立方体使用刚才渲染的纹理\n    gl.bindTexture(gl.TEXTURE_2D, targetTexture);\n\n    // 告诉 WebGL 如何从裁剪空间映射到像素空间\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n    // 清空画布和深度缓冲\n    gl.clearColor(1, 1, 1, 1); // clear to white\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n    drawCube(aspect);\n  }\n\n  requestAnimationFrame(drawScene);\n}`, `8460290137394110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token punctuation">{</span>\n    <span class="token comment">// 通过绑定帧缓冲绘制到纹理</span>\n    gl<span class="token punctuation">.</span><span class="token function">bindFramebuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">,</span> fb<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 使用 3×2 的纹理渲染立方体</span>\n    gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 告诉 WebGL 如何从裁剪空间映射到像素空间</span>\n    gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> targetTextureWidth<span class="token punctuation">,</span> targetTextureHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 清空画布和深度缓冲</span>\n    gl<span class="token punctuation">.</span><span class="token function">clearColor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// clear to blue</span>\n    gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span> <span class="token operator">|</span> gl<span class="token punctuation">.</span><span class="token constant">DEPTH_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> aspect <span class="token operator">=</span> targetTextureWidth <span class="token operator">/</span> targetTextureHeight<span class="token punctuation">;</span>\n    <span class="token function">drawCube</span><span class="token punctuation">(</span>aspect<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token punctuation">{</span>\n    <span class="token comment">// 渲染到画布</span>\n    gl<span class="token punctuation">.</span><span class="token function">bindFramebuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 立方体使用刚才渲染的纹理</span>\n    gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> targetTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 告诉 WebGL 如何从裁剪空间映射到像素空间</span>\n    gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 清空画布和深度缓冲</span>\n    gl<span class="token punctuation">.</span><span class="token function">clearColor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// clear to white</span>\n    gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span> <span class="token operator">|</span> gl<span class="token punctuation">.</span><span class="token constant">DEPTH_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> aspect <span class="token operator">=</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>\n    <span class="token function">drawCube</span><span class="token punctuation">(</span>aspect<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>drawScene<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/r4pvwu?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>十分重要的是要记得调用 gl.viewport 设置要绘制的对象的大小，在这个例子中第一次渲染到纹理，所以设置视图大小覆盖纹理，第二次渲染到画布所以设置视图大小覆盖画布。</p>\n<p>同样的当我们计算投影矩阵的时候需要使用正确的比例，我花了无数个小时调试，寻找出现搞笑的渲染结果的原因，最后发现是少调用了一个 gl.viewport 或者都忘了，并使用正确的比例，由于在代码中很少直接调用 gl.bindFramebuffer 所以就容易忘掉这些。所以我把这个方法调用放在一个方法里，像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44470869516023920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function bindFrambufferAndSetViewport(fb, width, height) {\n  gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n  gl.viewport(0, 0, width, height);\n}`, `44470869516023920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">bindFrambufferAndSetViewport</span><span class="token punctuation">(</span><span class="token parameter">fb<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindFramebuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">,</span> fb<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后使用这个方法改变渲染对象，就不容易忘记了。</p>\n<p>还有一个需要注意的事情是我们的帧缓冲没有深度缓冲，只有纹理。这意味着没有深度检测，所以三维就不能正常体现，如果我们绘制三个立方体就会看到这样。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ybyek1?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果仔细看中间的立方体，会看到 3 个垂直绘制的立方体，一个在后面，一个在中间另一个在前面，但是我们绘制的三个立方体是相同深度的，观察画布上水平方向的 3 个立方体就会发现他们是正确相交的。那是因为在帧缓冲中没有深度缓冲，但是画布有。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-eb890.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.25568942436412%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVQoz2P4DwP//iExwZwfn95e29h0Y/eUR0cX/vn97cfvD2C5v//+Q5UygPhg1suf/6NPfJ1w8MHLb/9//fn5/uPHT99f3Dg2886VXd8/PV6wYW7hLOkHHzYDVYP1/4Vq/gvS/Tfr+n+G6XcZcpWl1rYErJ5g0WgTs5LbM5bHo083cEeFwGRhy4kM5WsYdt/N+fXnK8SBDH9AOv9te/GHYe1/FotglnwGhgYGqQleignmUhYMQCAW6iQ7OY1fncEghUnTn9kplWH6cd1nH09BbX78/a/isf8MvQuYHPkZvaWAGthbtNiiPEUi+IWTeC2zZZI2a9pWMuilMZhFMLk7sCRVM5y5tRaqefa1TwyFS5h74piStBkT1RmUdTWXz9dbFyAcyi0YK2C2yKxis3TdVgYVGyYGBpa4OIarl7L//gbq+8MAcvXv38v27RacOIlBmZep3IFh0S255Uu4W/UYMmUZFBk4u9z0Z0XFNzAULGLyjGaoqVb/8/ctJEogAQYy4eHb9x693QwTDvhc/L/t0vGmWRN67+/on1fRf3bbjmdXN+ztnrRLrX0j4/37O8E6/0CdDXLB378QU+Y9+PPw2z9IrP95fuvNmbXfr+78/fwWyH1/fjz/eBkcydB4BgDHYVtYhhduXQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 28 14 10 24" title="" data-src="/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-fee1c.png" data-srcset="/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-a67b7.png 200w,\n/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-0b187.png 400w,\n/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-fee1c.png 800w,\n/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-b1a91.png 1200w,\n/static/2022-07-28-14-10-24-07df0c129841d7423b721ecba2eaf018-eb890.png 1494w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>想要加深度缓冲就需要创建一个，然后附加到帧缓冲中</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59903130119309615000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个深度缓冲\nconst depthBuffer = gl.createRenderbuffer();\ngl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer);\n\n// 设置深度缓冲的大小和 targetTexture 相同\ngl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, targetTextureWidth, targetTextureHeight);\ngl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuffer);`, `59903130119309615000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个深度缓冲</span>\n<span class="token keyword">const</span> depthBuffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createRenderbuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindRenderbuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">RENDERBUFFER</span><span class="token punctuation">,</span> depthBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 设置深度缓冲的大小和 targetTexture 相同</span>\ngl<span class="token punctuation">.</span><span class="token function">renderbufferStorage</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">RENDERBUFFER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">DEPTH_COMPONENT16</span><span class="token punctuation">,</span> targetTextureWidth<span class="token punctuation">,</span> targetTextureHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">framebufferRenderbuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">DEPTH_ATTACHMENT</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RENDERBUFFER</span><span class="token punctuation">,</span> depthBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有了这个以后的结果。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/6lvkt6?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>现在帧缓冲附加了深度缓冲以后内部的立方体也能正确相交了。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-eb890.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.18875502008032%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQoz2P4DwZ//oEAmPnvz///P398u7ip69KGput7pt/cPeXMmvpTy0o/3j0Lkv739z8MMECof/9BOq/ev1+1ZYfZni/n3v/6/P7Ww9tHr53c8fTRpQ/vnz2+sefi9Un33h9/8/Ua0C64ZpCNSx58celsY01OZMhyYVi8U235WlUXMY9sYb8gDqMm5+gdLc5Z8mbVDBHLGCpXcD58cR7iBJDNP/7+U9/+j6G5kinXgCVdn8HYRnPrUgFTNeVIRt0oBkEve60lobqVDJlLmRK6WESkGM6fXwrU9ffvb4a/IPf+ib/2n6F2DYsaD+McfQY1BnYXD46CLuF0Dp4UIetUwdJNnLWbGJzSGKVVWQLCGGZMKwBr/sPwG6T5X8+D/wxTX7DriTBHMjFU2YtPrdVcEiYcxy+YIuGwzNxvk6tuGYNaJKNHI5u7F0NBqSHY2f8Y/oA173v9n2HFN4aieIbIBIakFMUlZby9NrxZ4oqeLAz5hvwzA7njGQyzGFXcGH2LGOYfdP/z9ycowCDx8+n3/+Irf2LXbfHsSOzZsHrniztTTuyatH7OhPldMy4caD2+WK2BuXWn3K4bua9/nfj//x9KVEHjCxgH4Nj++/Hdp/MbPl3Z/v7K1v93j90/NHvP9vjP726hxTMAHENVlUPBr4gAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 28 14 11 01" title="" data-src="/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-fee1c.png" data-srcset="/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-a67b7.png 200w,\n/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-0b187.png 400w,\n/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-fee1c.png 800w,\n/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-b1a91.png 1200w,\n/static/2022-07-28-14-11-01-de07cce6dec3e423b4321a8a4721ba21-eb890.png 1494w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>需要特别注意的是 WebGL 只允许三种附件组合形式。根据 <a href="https://registry.khronos.org/webgl/specs/latest/1.0/#FBO_ATTACHMENTS" target="_blank" rel="nofollow noreferrer noopener">规范</a> 一定能正确运行的附件组合是：</p>\n<ul>\n<li><code class="language-text">COLOR_ATTACHMENT0</code> = <code class="language-text">RGBA/UNSIGNED_BYTE</code> texture</li>\n<li><code class="language-text">COLOR_ATTACHMENT0</code> = <code class="language-text">RGBA/UNSIGNED_BYTE</code> texture + <code class="language-text">DEPTH_ATTACHMENT</code> = <code class="language-text">DEPTH_COMPONENT16</code> renderbuffer</li>\n<li><code class="language-text">COLOR_ATTACHMENT0</code> = <code class="language-text">RGBA/UNSIGNED_BYTE</code> texture + <code class="language-text">DEPTH_STENCIL_ATTACHMENT</code> = <code class="language-text">DEPTH_STENCIL</code> renderbuffer</li>\n</ul>\n<p>对于其他的组合就需要检查用户系统/gpu/驱动/浏览器的支持情况。要检查的话需要创建帧缓冲，附加附件，然后调用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70009749224033350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);`, `70009749224033350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> status <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">checkFramebufferStatus</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">FRAMEBUFFER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果状态是 <code class="language-text">FRAMEBUFFER_COMPLETE</code> 那这种组合就能使用，反之不能使用。你就需要告诉用户他们不走运或者撤销一些方法。</p>\n<blockquote>\n<p><strong>其实 Canvas 本身就是一个纹理</strong></p>\n<p>只是一点小事，浏览器使用上方的技术实现的画布，在背后它们创建了一个颜色纹理，一个深度缓冲，一个帧缓冲，然后绑定到当前的帧缓冲，当你调用你的渲染方法时就会绘制到那个纹理上，然后再用那个纹理将画布渲染到网页中。</p>\n</blockquote>\n<h1 id="webgl-使用多个纹理"><a href="#webgl-%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E7%BA%B9%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 使用多个纹理</h1>\n<p>现在可能是一个合适的时机去回答“如何使用 2 个或多个纹理？”。</p>\n<p>非常简单，回到几节之前绘制一个图像的着色器，将它升级到使用两个纹理。</p>\n<p>首先改变代码加载两个图像，这其实不是 WebGL 的事情，是 HTML5 和 JavaScript 的事情，但是我也会涉及到。图像加载是异步的，可能需要适应一下。</p>\n<p>基本上有两种方式来处理图像的加载，一种是重构代码，让它在没有纹理的时候运行，当图像加载后，再更新程序。我们会在以后的文章中用到这个方法。</p>\n<p>这个例子中就等两个图像都加载完成后再开始绘制。</p>\n<p>首先修改加载单个图像的方法，非常简单，先创建一个新的 Image 对象，设置加载的 url，然后设置回调函数在图像加载完成后调用。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34587576921436990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function loadImage(url, callback) {\n  var image = new Image();\n  image.src = url;\n  image.onload = callback;\n  return image;\n}`, `34587576921436990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>\n  image<span class="token punctuation">.</span>onload <span class="token operator">=</span> callback<span class="token punctuation">;</span>\n  <span class="token keyword">return</span> image<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在来创建一个方法加载一个 URL 序列，并且创建一个图像序列。首先设置 imagesToLoad 为加载图像的个数，然后为每个图像调用 loadImage，当 imagesToLoad 递减到 0 的时候说明所有图像加载完成，调用回调函数。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32603190089183556000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function loadImages(urls, callback) {\n  var images = [];\n  var imagesToLoad = urls.length;\n\n  // 每个图像加载完成后调用一次\n  var onImageLoad = function () {\n    --imagesToLoad;\n    // 如果所有图像都加载完成就调用回调函数\n    if (imagesToLoad == 0) {\n      callback(images);\n    }\n  };\n\n  for (var ii = 0; ii < imagesToLoad; ++ii) {\n    var image = loadImage(urls[ii], onImageLoad);\n    images.push(image);\n  }\n}`, `32603190089183556000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">loadImages</span><span class="token punctuation">(</span><span class="token parameter">urls<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> images <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> imagesToLoad <span class="token operator">=</span> urls<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n\n  <span class="token comment">// 每个图像加载完成后调用一次</span>\n  <span class="token keyword">var</span> <span class="token function-variable function">onImageLoad</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token operator">--</span>imagesToLoad<span class="token punctuation">;</span>\n    <span class="token comment">// 如果所有图像都加载完成就调用回调函数</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>imagesToLoad <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">callback</span><span class="token punctuation">(</span>images<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ii <span class="token operator">&lt;</span> imagesToLoad<span class="token punctuation">;</span> <span class="token operator">++</span>ii<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token function">loadImage</span><span class="token punctuation">(</span>urls<span class="token punctuation">[</span>ii<span class="token punctuation">]</span><span class="token punctuation">,</span> onImageLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    images<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后就可以像这样调用 loadImages</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74561629778733480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function main() {\n  loadImages([\'resources/leaves.jpg\', \'resources/star.jpg\'], render);\n}`, `74561629778733480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">loadImages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'resources/leaves.jpg\'</span><span class="token punctuation">,</span> <span class="token string">\'resources/star.jpg\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> render<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>接下来修改着色器使用两个纹理，在这个例子中我们将两个纹理相乘。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79540766968236600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;fragment-shader-2d&quot; type=&quot;x-shader/x-fragment&quot;>\n  precision mediump float;\n\n  // 纹理\n  uniform sampler2D u_image0;\n  uniform sampler2D u_image1;\n\n  // 从顶点着色器传入的 texCoords\n  varying vec2 v_texCoord;\n\n  void main() {\n     vec4 color0 = texture2D(u_image0, v_texCoord);\n     vec4 color1 = texture2D(u_image1, v_texCoord);\n     gl_FragColor = color0 * color1;\n  }\n</script>`, `79540766968236600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fragment-shader-2d<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>x-shader/x-fragment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  precision mediump float<span class="token punctuation">;</span>\n\n  <span class="token comment">// 纹理</span>\n  uniform sampler2D u_image0<span class="token punctuation">;</span>\n  uniform sampler2D u_image1<span class="token punctuation">;</span>\n\n  <span class="token comment">// 从顶点着色器传入的 texCoords</span>\n  varying vec2 v_texCoord<span class="token punctuation">;</span>\n\n  <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     vec4 color0 <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_image0<span class="token punctuation">,</span> v_texCoord<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     vec4 color1 <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_image1<span class="token punctuation">,</span> v_texCoord<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     gl_FragColor <span class="token operator">=</span> color0 <span class="token operator">*</span> color1<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>需要创建两个 WebGL 纹理对象。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68468539647200140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建两个纹理\nvar textures = [];\nfor (var ii = 0; ii < 2; ++ii) {\n  var texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  // 设置参数以便使用任意尺的影像\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n  // 上传图像到纹理\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, images[ii]);\n\n  // 将纹理添加到纹理序列\n  textures.push(texture);\n}`, `68468539647200140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建两个纹理</span>\n<span class="token keyword">var</span> textures <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ii <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token operator">++</span>ii<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> texture <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置参数以便使用任意尺的影像</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 上传图像到纹理</span>\n  gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> images<span class="token punctuation">[</span>ii<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 将纹理添加到纹理序列</span>\n  textures<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>WebGL 有一个叫做 <code class="language-text">texture units</code> 的对象，你可以把它看成是一个纹理引用的序列，你需要告诉着色器每个 sampler（取样器）使用哪一个 <code class="language-text">texture unit</code>（纹理单元）。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89557552346771280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 寻找取样器的位置\nvar u_image0Location = gl.getUniformLocation(program, \'u_image0\');\nvar u_image1Location = gl.getUniformLocation(program, \'u_image1\');\n\n// ...\n\n// 设置使用的纹理单元\ngl.uniform1i(u_image0Location, 0); // 纹理单元 0\ngl.uniform1i(u_image1Location, 1); // 纹理单元 1`, `89557552346771280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 寻找取样器的位置</span>\n<span class="token keyword">var</span> u_image0Location <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_image0\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> u_image1Location <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_image1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 设置使用的纹理单元</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>u_image0Location<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 纹理单元 0</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>u_image1Location<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 纹理单元 1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后将每个纹理单元绑定纹理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="212844418010549300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 设置每个纹理单元对应一个纹理\ngl.activeTexture(gl.TEXTURE0);\ngl.bindTexture(gl.TEXTURE_2D, textures[0]);\n\ngl.activeTexture(gl.TEXTURE1);\ngl.bindTexture(gl.TEXTURE_2D, textures[1]);`, `212844418010549300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 设置每个纹理单元对应一个纹理</span>\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>使用的两个图像像这样</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-07-29-11-32-39-4cd92f77f03080b59a4d157d2f8e633c-32662.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 490px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 37.55102040816327%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQozz2RW0gTYACFf9OpKfpgm/O2Oed9q00b3uclzcrExCsmkjMvyRLFttIHK6NRa0mahUXQxQTLii6KBblqEZJGECUmgdVLkvZUEASRfA2DHg6cp3O+wxGXimsZPmhn0mzhbVkJ41mpXC+q4GKNiWullYzUJtPfVky4KpZgmZTw8DCk8mDilSqWGwzQkAD1GjAlQtNGxGR8NK8KtTjL0pgtSuNNeTG3GqxMVDRxs7qGvj2ZHDaVss7HDyHEf7V3dHGkJ43PZLC4msPizyw+fjciXiaoeJocxnS+jLnaBBYsJm50tXK5wl1i7uDRuQsMnurDw9OToKAgjDlG7MdOMuwaRZT4oegOQ+XSo1gxEEUuYkItw6UJ5YvFwLf9aSzUZXGlNoOePG9Gs6OZaS7k9IEqN5WEuNgYvq4s09vdg78mArHkQPTtQyiCER/cnquI+1IfJlMULOQreZcbwfsCNU+yYxjLi+dOeQGuNjPnre1I1v+bvLVwG/0O+5r3fAhedRbEoXuIF7jpVhHjO9WcrY7AqQxgWrOBuY5Upus2M5App3OXlAlzLkOtu/HyD1gLkctDcE49pn5vC5K4IYR3EbJNn5C5fwnV/UI8KAzhxI5ARhK8eaaTsXS7lBWbEUe6L43bfRks8GOgMgUh+UcYqYzE+dyJxWTFEdhLukcKYyEzzKv+8Fr9AzFVX8Bdaw7jlkxm2/KZt23BZTMz2NXM8UY3XUsyZzqr0OoNqKNUJOn0xGkT0coiWU0aYFVv47fuKOjskGznL0nUUudy5vVDAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 07 29 11 32 39" title="" data-src="/static/2022-07-29-11-32-39-4cd92f77f03080b59a4d157d2f8e633c-32662.png" data-srcset="/static/2022-07-29-11-32-39-4cd92f77f03080b59a4d157d2f8e633c-ee8ca.png 200w,\n/static/2022-07-29-11-32-39-4cd92f77f03080b59a4d157d2f8e633c-15948.png 400w,\n/static/2022-07-29-11-32-39-4cd92f77f03080b59a4d157d2f8e633c-32662.png 490w" data-sizes="(max-width: 490px) 100vw, 490px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这就是使用 WebGL 将它们相乘的结果。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/plcqlr?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>有些需要回顾的部分。</p>\n<p>理解纹理单元的简单方式是：所有的纹理方法可以在 <code class="language-text">激活的纹理单元</code> 上使用，<code class="language-text">激活的纹理单元</code> 就是一个全局变量指向你想使用的所有纹理单元，每个纹理单元有两个目标对象，<code class="language-text">TEXTURE_2D</code> 目标和 <code class="language-text">TEXTURE_CUBE_MAP</code> 目标。每个纹理方法针对激活纹理单元上的一个目标，如果用 JavaScript 表示 WebGL 方法可能像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54869050700171580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var getContext = function() {\n  var textureUnits = [\n    { TEXTURE_2D: ??, TEXTURE_CUBE_MAP: ?? },\n    { TEXTURE_2D: ??, TEXTURE_CUBE_MAP: ?? },\n    { TEXTURE_2D: ??, TEXTURE_CUBE_MAP: ?? },\n    { TEXTURE_2D: ??, TEXTURE_CUBE_MAP: ?? },\n    { TEXTURE_2D: ??, TEXTURE_CUBE_MAP: ?? },\n    // ...\n   ];\n  var activeTextureUnit = 0;\n\n  var activeTexture = function(unit) {\n    // 将纹理单元枚举转换成索引\n    var index = unit - gl.TEXTURE0;\n    // 设置激活纹理单元\n    activeTextureUnit = index;\n  };\n\n  var bindTexture = function(target, texture) {\n    // 设置激活纹理单元的目标对象纹理\n    textureUnits[activeTextureUnit][target] = texture;\n  };\n\n  var texImage2D = function(target, ... args ...) {\n    // 绑定对应纹理单元调用相应的方法\n    var texture = textureUnits[activeTextureUnit][target];\n    texture.image2D(...args...);\n  };\n\n  // 返回 WebGL API\n  return {\n    activeTexture: activeTexture,\n    bindTexture: bindTexture,\n    texImage2D: texImage2D,\n  }\n};`, `54869050700171580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">getContext</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> textureUnits <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span> <span class="token constant">TEXTURE_2D</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token constant">TEXTURE_CUBE_MAP</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> <span class="token constant">TEXTURE_2D</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token constant">TEXTURE_CUBE_MAP</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> <span class="token constant">TEXTURE_2D</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token constant">TEXTURE_CUBE_MAP</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> <span class="token constant">TEXTURE_2D</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token constant">TEXTURE_CUBE_MAP</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">{</span> <span class="token constant">TEXTURE_2D</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token constant">TEXTURE_CUBE_MAP</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token comment">// ...</span>\n   <span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> activeTextureUnit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> <span class="token function-variable function">activeTexture</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">unit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 将纹理单元枚举转换成索引</span>\n    <span class="token keyword">var</span> index <span class="token operator">=</span> unit <span class="token operator">-</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span><span class="token punctuation">;</span>\n    <span class="token comment">// 设置激活纹理单元</span>\n    activeTextureUnit <span class="token operator">=</span> index<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> <span class="token function-variable function">bindTexture</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> texture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 设置激活纹理单元的目标对象纹理</span>\n    textureUnits<span class="token punctuation">[</span>activeTextureUnit<span class="token punctuation">]</span><span class="token punctuation">[</span>target<span class="token punctuation">]</span> <span class="token operator">=</span> texture<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> <span class="token function-variable function">texImage2D</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> <span class="token operator">...</span> args <span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 绑定对应纹理单元调用相应的方法</span>\n    <span class="token keyword">var</span> texture <span class="token operator">=</span> textureUnits<span class="token punctuation">[</span>activeTextureUnit<span class="token punctuation">]</span><span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    texture<span class="token punctuation">.</span><span class="token function">image2D</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 返回 WebGL API</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    activeTexture<span class="token punctuation">:</span> activeTexture<span class="token punctuation">,</span>\n    bindTexture<span class="token punctuation">:</span> bindTexture<span class="token punctuation">,</span>\n    texImage2D<span class="token punctuation">:</span> texImage2D<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>着色器获得纹理单元</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70622764418165730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl.uniform1i(u_image0Location, 0); // 纹理单元 0\ngl.uniform1i(u_image1Location, 1); // 纹理单元 1`, `70622764418165730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>u_image0Location<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 纹理单元 0</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>u_image1Location<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 纹理单元 1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>需要注意的是，设置全局变量的时候使用索引代替纹理单元，但是调用 <code class="language-text">gl.activeTexture</code> 的时候你需要传递特殊的常量 <code class="language-text">gl.TEXTURE0</code>, <code class="language-text">gl.TEXTURE1</code> 之类。幸运的是这些常量是连续的，所以这些代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80541886877451260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl.activeTexture(gl.TEXTURE0);\ngl.bindTexture(gl.TEXTURE_2D, textures[0]);\n\ngl.activeTexture(gl.TEXTURE1);\ngl.bindTexture(gl.TEXTURE_2D, textures[1]);`, `80541886877451260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以写成这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36527827088240940000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl.activeTexture(gl.TEXTURE0 + 0);\ngl.bindTexture(gl.TEXTURE_2D, textures[0]);\n\ngl.activeTexture(gl.TEXTURE0 + 1);\ngl.bindTexture(gl.TEXTURE_2D, textures[1]);`, `36527827088240940000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>或这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58779716176148050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`for (var ii = 0; ii < 2; ++ii) {\n  gl.activeTexture(gl.TEXTURE0 + ii);\n  gl.bindTexture(gl.TEXTURE_2D, textures[ii]);\n}`, `58779716176148050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ii <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token operator">++</span>ii<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> ii<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textures<span class="token punctuation">[</span>ii<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>希望这样能够帮助你理解 WebGL 单次绘制中如何使用多个纹理。</p>\n<h1 id="webgl-纹理映射的透视纠正"><a href="#webgl-%E7%BA%B9%E7%90%86%E6%98%A0%E5%B0%84%E7%9A%84%E9%80%8F%E8%A7%86%E7%BA%A0%E6%AD%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 纹理映射的透视纠正</h1>\n<p>这篇文章讲纹理映射的透视纠正，要理解它你可能需要先看看透视投影和纹理，你也需要知道可变量以及它的用处，但是我还会简短的介绍一下。</p>\n<p>在工作原理中我们讲过了可变量的工作原理，顶点着色器可以声明可变量并给它赋值，一旦顶点着色器被引用 3 次就会画一个三角形。绘制这个三角形的每个像素都会调用片断着色器获得像素颜色，在三个顶点之间的点会得到差之后的可变量。</p>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/zi15x?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [fragment-shader-anim](embedded-codesandbox://webgl-fundamental-base-concept/fragment-shader-anim?view=preview) -->\n<h2 id="矩形"><a href="#%E7%9F%A9%E5%BD%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>矩形</h2>\n<p>回到我们的第一篇文章，在裁剪空间中绘制一个三角形，没有数学运算，只是传入裁剪空间坐标到一个简单的顶点着色器，像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27396762848307143000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 属性从缓冲中获取数据\nattribute vec4 a_position;\n\n// 所有的着色器都有一个 main 函数\nvoid main() {\n\n   // gl_Position 是着色器需要设置的一个特殊的变量\n   gl_Position = a_position;\n}`, `27396762848307143000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 属性从缓冲中获取数据</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n\n<span class="token comment">// 所有的着色器都有一个 main 函数</span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\n   <span class="token comment">// gl_Position 是着色器需要设置的一个特殊的变量</span>\n   gl_Position <span class="token operator">=</span> a_position<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>还有一个简单的片断着色器提供固定的颜色</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6839556666939694000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 片断着色器没有默认的精度，\n// 中等精度是个不错的默认值\nprecision mediump float;\n\nvoid main() {\n   // gl_FragColor 是片断着色器需要设置的一个特殊变量\n   gl_FragColor = vec4(1, 0, 0.5, 1); // 返回红紫色\n}`, `6839556666939694000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 片断着色器没有默认的精度，</span>\n<span class="token comment">// 中等精度是个不错的默认值</span>\n<span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token comment">// gl_FragColor 是片断着色器需要设置的一个特殊变量</span>\n   gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回红紫色</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>让我们在裁剪空间绘制两个矩形，为每个顶点传递 X, Y, Z 和 W。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84830056971836030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var positions = [\n  // 第一个矩形的第一个三角形\n  -0.8,\n  -0.8,\n  0,\n  1,\n  0.8,\n  -0.8,\n  0,\n  1,\n  -0.8,\n  -0.2,\n  0,\n  1,\n\n  // 第一个矩形的第二个三角形\n  -0.8,\n  -0.2,\n  0,\n  1,\n  0.8,\n  -0.8,\n  0,\n  1,\n  0.8,\n  -0.2,\n  0,\n  1,\n\n  // 第二个矩形的第一个三角形\n  -0.8,\n  0.2,\n  0,\n  1,\n  0.8,\n  0.2,\n  0,\n  1,\n  -0.8,\n  0.8,\n  0,\n  1,\n\n  // 第二个矩形的第二个三角形\n  -0.8,\n  0.8,\n  0,\n  1,\n  0.8,\n  0.2,\n  0,\n  1,\n  0.8,\n  0.8,\n  0,\n  1\n];`, `84830056971836030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> positions <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token comment">// 第一个矩形的第一个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第一个矩形的第二个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第二个矩形的第一个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第二个矩形的第二个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是结果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/oqzsfs?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>再添加一个浮点型可变量，并把它从顶点着色器直接传递到片断着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17068494635091081000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\nattribute float a_brightness;\n\nvarying float v_brightness;\n\nvoid main() {\n   gl_Position = a_position;\n\n   // 直接传递亮度到片断着色器\n   v_brightness = a_brightness;\n}`, `17068494635091081000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{2,4,9-10}"\n              >\n                <span class="gatsby-code-button-language">glsl{2,4,9-10}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">attribute</span> <span class="token keyword">float</span> a_brightness<span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">varying</span> <span class="token keyword">float</span> v_brightness<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_Position <span class="token operator">=</span> a_position<span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">   <span class="token comment">// 直接传递亮度到片断着色器</span></span><span class="gatsby-highlight-code-line">   v_brightness <span class="token operator">=</span> a_brightness<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在片断着色器中使用可变量设置颜色</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30257701699265892000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 顶点着色器的值插值后传入这里\nvarying float v_brightness;\n\nvoid main() {\n   gl_FragColor = vec4(v_brightness, 0, 0, 1);  // 红色\n}`, `30257701699265892000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{3-4,7}"\n              >\n                <span class="gatsby-code-button-language">glsl{3-4,7}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// 顶点着色器的值插值后传入这里</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">varying</span> <span class="token keyword">float</span> v_brightness<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">   gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>v_brightness<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 红色</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们需要给可变量提供数据，创建一个缓冲放入一些数据，每个顶点一个值，我们将设置左边亮度为 0，右边亮度为 1。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12900565684510611000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建缓冲并放入 12 个亮度值\nvar brightnessBuffer = gl.createBuffer();\n\n// 绑定到 ARRAY_BUFFER\ngl.bindBuffer(gl.ARRAY_BUFFER, brightnessBuffer);\n\nvar brightness = [\n  // 第一个矩形的第一个三角形\n  0,\n  1,\n  0,\n\n  // 第一个矩形的第二个三角形\n  0,\n  1,\n  1,\n\n  // 第二个矩形的第一个三角形\n  0,\n  1,\n  0,\n\n  // 第二个矩形的第二个三角形\n  0,\n  1,\n  1\n];\n\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array(brightness), gl.STATIC_DRAW);`, `12900565684510611000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建缓冲并放入 12 个亮度值</span>\n<span class="token keyword">var</span> brightnessBuffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 绑定到 ARRAY_BUFFER</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> brightnessBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> brightness <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token comment">// 第一个矩形的第一个三角形</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第一个矩形的第二个三角形</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第二个矩形的第一个三角形</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第二个矩形的第二个三角形</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">1</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\ngl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>brightness<span class="token punctuation">)</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>还需要在初始化阶段找到 <code class="language-text">a_brightness</code> 的位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35607653226173985000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 找到顶点数据的输入位置\nvar positionAttributeLocation = gl.getAttribLocation(program, \'a_position\');\nvar brightnessAttributeLocation = gl.getAttribLocation(program, \'a_brightness\');`, `35607653226173985000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3}"\n              >\n                <span class="gatsby-code-button-language">js{3}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 找到顶点数据的输入位置</span>\n<span class="token keyword">var</span> positionAttributeLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_position\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> brightnessAttributeLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getAttribLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'a_brightness\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后在渲染阶段设置属性</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97294112874525840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 启用属性\ngl.enableVertexAttribArray(brightnessAttributeLocation);\n\n// 绑定位置缓冲\ngl.bindBuffer(gl.ARRAY_BUFFER, brightnessBuffer);\n\n// 告诉属性如何从缓冲中读取数据\nvar size = 1; // 每次迭代读取一个单位数据\nvar type = gl.FLOAT; // 数据类型是 32 位浮点型\nvar normalize = false; // 不用单位化\nvar stride = 0; // 每次迭代需要移动的距离\nvar offset = 0; // 从缓冲的起始处开始\ngl.vertexAttribPointer(brightnessAttributeLocation, size, type, normalize, stride, offset);`, `97294112874525840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 启用属性</span>\ngl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>brightnessAttributeLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 绑定位置缓冲</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> brightnessBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 告诉属性如何从缓冲中读取数据</span>\n<span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代读取一个单位数据</span>\n<span class="token keyword">var</span> type <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">;</span> <span class="token comment">// 数据类型是 32 位浮点型</span>\n<span class="token keyword">var</span> normalize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 不用单位化</span>\n<span class="token keyword">var</span> stride <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代需要移动的距离</span>\n<span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 从缓冲的起始处开始</span>\ngl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>brightnessAttributeLocation<span class="token punctuation">,</span> size<span class="token punctuation">,</span> type<span class="token punctuation">,</span> normalize<span class="token punctuation">,</span> stride<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在渲染后得到会得到两个矩形，左边 brightness 是 0 右边是 1，中间的部分是插值（或可变量）。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/cfvjcf?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>在透视投影的文章中我们知道 WebGL 会将放入 <code class="language-text">gl_Position</code> 的值除以 <code class="language-text">gl_Position.w</code>。</p>\n<p>在上方的顶点中我们提供的 W 值为 1，但是我们知道 WebGL 会除以 W，所以做如下修改应该结果不变。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36181112853803700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var mult = 20;\nvar positions = [\n  // 第一个矩形的第一个三角形\n  -0.8,\n  0.8,\n  0,\n  1,\n  0.8,\n  0.8,\n  0,\n  1,\n  -0.8,\n  0.2,\n  0,\n  1,\n\n  // 第一个矩形的第二个三角形\n  -0.8,\n  0.2,\n  0,\n  1,\n  0.8,\n  0.8,\n  0,\n  1,\n  0.8,\n  0.2,\n  0,\n  1,\n\n  // 第二个矩形的第一个三角形\n  -0.8,\n  -0.2,\n  0,\n  1,\n  0.8 * mult,\n  -0.2 * mult,\n  0,\n  mult,\n  -0.8,\n  -0.8,\n  0,\n  1,\n\n  // 第二个矩形的第二个三角形\n  -0.8,\n  -0.8,\n  0,\n  1,\n  0.8 * mult,\n  -0.2 * mult,\n  0,\n  mult,\n  0.8 * mult,\n  -0.8 * mult,\n  0,\n  mult\n];`, `36181112853803700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> mult <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> positions <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token comment">// 第一个矩形的第一个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第一个矩形的第二个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第二个矩形的第一个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span> <span class="token operator">*</span> mult<span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.2</span> <span class="token operator">*</span> mult<span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  mult<span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n\n  <span class="token comment">// 第二个矩形的第二个三角形</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span>\n  <span class="token number">0.8</span> <span class="token operator">*</span> mult<span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.2</span> <span class="token operator">*</span> mult<span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  mult<span class="token punctuation">,</span>\n  <span class="token number">0.8</span> <span class="token operator">*</span> mult<span class="token punctuation">,</span>\n  <span class="token operator">-</span><span class="token number">0.8</span> <span class="token operator">*</span> mult<span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span>\n  mult\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如上所示我们将第二个矩形右边的点的 X 和 Y 都乘以 mult，同时设置 W 为 mult。由于 WebGL 会除以 W 所以我们应该得到相同的结果对么？</p>\n<p>这是结果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/51qz0x?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>注意两个矩形和上一个例子位置相同，事实是 <code class="language-text">X * MULT / MULT(W)</code> 还是 X，Y 也一样，但颜色却不同，为什么？</p>\n<p>事实是 WebGL 使用 W 实现纹理映射或者可变量插值的透视投影。</p>\n<p>如果将片断着色器改成这样就更容易看出效果</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52392666348361750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gl_FragColor = vec4(fract(v_brightness * 10), 0, 0, 1); // 红色`, `52392666348361750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">gl_FragColor <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token function">fract</span><span class="token punctuation">(</span>v_brightness <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 红色</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>将 <code class="language-text">v_brightness</code> 乘以 10 就会是值的范围为 0 到 10，fract 会保留小数部分所以结果还是 0 到 1 之间，但是总共是 10 次 0 到 1 了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/yiilg8?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>现在应该更容易看出透视效果。</p>\n<p>线性插值应该是这样的公式</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52150603172777440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`result = (1 - t) * a + t * b;`, `52150603172777440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> a <span class="token operator">+</span> t <span class="token operator">*</span> b<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>t 的范围是 0 到 1，表示 a 到 b 之间的位置，0 表示在 a 点，1 表示在 b 点。</p>\n<p>可变量经过 WebGL 的插值时使用这个公式</p>\n<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi><mo>=</mo><mfrac><mrow><mo>(</mo><mn>1</mn><mo>−</mo><mi>t</mi><mo>)</mo><mo>∗</mo><mi>a</mi><mi mathvariant="normal">/</mi><mi>a</mi><mi>W</mi><mo>+</mo><mi>t</mi><mo>∗</mo><mi>b</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>W</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>−</mo><mi>t</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>a</mi><mi>W</mi><mo>+</mo><mi>t</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>W</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">result=\\frac{(1 - t) * a / aW + t * b / bW}{(1 - t) / aW + t / bW}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.53em;vertical-align:-0.52em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">t</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathit mtight">t</span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span><span class="mbin mtight">+</span><span class="mord mathit mtight">t</span><span class="mord mtight">/</span><span class="mord mathit mtight">b</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathit mtight">t</span><span class="mclose mtight">)</span><span class="mbin mtight">∗</span><span class="mord mathit mtight">a</span><span class="mord mtight">/</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span><span class="mbin mtight">+</span><span class="mord mathit mtight">t</span><span class="mbin mtight">∗</span><span class="mord mathit mtight">b</span><span class="mord mtight">/</span><span class="mord mathit mtight">b</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>\n<p>aW 表示 a 点的 W 值，也就是 <code class="language-text">gl_Position.w</code> 的值，而不一定等于缓冲中的值， 同理 bW 是设置在 b 点的 <code class="language-text">gl_Position.w</code>。</p>\n<h2 id="正方体"><a href="#%E6%AD%A3%E6%96%B9%E4%BD%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>正方体</h2>\n<p>为什么这个很重要？这有一个简单的纹理，使用纹理文章的例子，并调整了 UV，每个面使用整张纹理，是一个 4×4 像素的纹理。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7rjd5e?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>现在将例子中的顶点着色器做一些修改，手工除以 W，只增加了一行代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93683088615747800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n  // 将位置和矩阵相乘\n  gl_Position = u_matrix * a_position;\n\n  // 手工除以 W\n  gl_Position /= gl_Position.w;\n\n  // 将纹理坐标传到片断着色器\n  v_texcoord = a_texcoord;\n}`, `93683088615747800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec2</span> a_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_matrix<span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 将位置和矩阵相乘</span>\n  gl_Position <span class="token operator">=</span> u_matrix <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n\n  <span class="token comment">// 手工除以 W</span>\n  gl_Position <span class="token operator">/</span><span class="token operator">=</span> gl_Position<span class="token punctuation">.</span>w<span class="token punctuation">;</span>\n\n  <span class="token comment">// 将纹理坐标传到片断着色器</span>\n  v_texcoord <span class="token operator">=</span> a_texcoord<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>除以 W 意味值 <code class="language-text">gl_Position.w</code> 始终为 1，X, Y 和 Z 不会有什么影响，因为 WebGL 也会默认做除法，这是结果。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/mneucd?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>我们还是得到了一个立方体，但是纹理变得扭曲了，这是因为没有传入 W WebGL 就不能正确的实现纹理的透视纠正，或者更准确地说，WebGL 就不能正确的对可变量的插值实现透视。</p>\n<p>如果你还记得的话 W 就是透视矩阵中的 Z，当 W 始终为 1 时 WebGL 做的就是一个简单的线性插值，事实上如果你拿着上述的等式</p>\n<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi><mo>=</mo><mfrac><mrow><mo>(</mo><mn>1</mn><mo>−</mo><mi>t</mi><mo>)</mo><mo>∗</mo><mi>a</mi><mi mathvariant="normal">/</mi><mi>a</mi><mi>W</mi><mo>+</mo><mi>t</mi><mo>∗</mo><mi>b</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>W</mi></mrow><mrow><mo>(</mo><mn>1</mn><mo>−</mo><mi>t</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>a</mi><mi>W</mi><mo>+</mo><mi>t</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>W</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">result=\\frac{(1 - t) * a / aW + t * b / bW}{(1 - t) / aW + t / bW}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.53em;vertical-align:-0.52em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">t</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathit mtight">t</span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span><span class="mbin mtight">+</span><span class="mord mathit mtight">t</span><span class="mord mtight">/</span><span class="mord mathit mtight">b</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span></span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.2em;"><svg width=\'400em\' height=\'0.2em\' viewBox=\'0 0 400000 200\' preserveAspectRatio=\'xMinYMin slice\'><path d=\'M0 80H400000 v40H0z M0 80H400000 v40H0z\'/></svg></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathit mtight">t</span><span class="mclose mtight">)</span><span class="mbin mtight">∗</span><span class="mord mathit mtight">a</span><span class="mord mtight">/</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span><span class="mbin mtight">+</span><span class="mord mathit mtight">t</span><span class="mbin mtight">∗</span><span class="mord mathit mtight">b</span><span class="mord mtight">/</span><span class="mord mathit mtight">b</span><span class="mord mathit mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>\n<p>设置所有的 W 为 1 就会得到</p>\n<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi><mo>=</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>t</mi><mo>)</mo><mo>∗</mo><mi>a</mi><mo>+</mo><mi>t</mi><mo>∗</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">result=(1 - t) * a + t * b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">t</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mord rule" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">a</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">t</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mord rule" style="margin-right:0.2222222222222222em;"></span><span class="mord mathit">b</span></span></span></span></p>\n<p>就和上方提到的线性插值一样了。</p>\n<p>现在就清楚为什么 WebGL 要使用 4x4 的矩阵和包含 X, Y, Z 和 W 四个值的向量了吧。X 和 Y 除以 W 得到裁剪空间坐标，Z 除以 W 也得到裁剪空间的 Z 坐标，W 同时还为纹理映射的透视纠正提供了帮助。</p>\n<blockquote>\n<p><strong>二十世纪中叶的游戏机</strong></p>\n<p>一点小事，Playstation 1 和其他同一时代的游戏机都没有做纹理映射的透视纠正，根据以上的信息你就能看出为什么路面是这样的了。</p>\n</blockquote>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-02-16-00-44-e432e6738c9bdb1d77bd4eb24a4de0a2-0208c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 493px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 82.55578093306288%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAECElEQVQ4y0WUSW8jdRTE23Ziu+Ml7d2O7fbSdmzH2bwmjuNxPFkmq5NRxmEmZGOYRYwEDswiEAcQQkLihOAwFyQkrtw4cIYPwYkP8+O1DZpDqdWt7vpX1avXSq3oYtGYJuVTRlg0ggxqBudpjeNGho9aPt6s5znJRjlIBki6FSJTCiGngvYf/AKPwCdQjrZ0+ls17lRzJDSFZtbH60qe14UIrxo5dotTfH+9ye3pPg/bDbIhO0u5CLN6iLJdYUm1kVOtdBzm1YKyszrPdnuB1YUUlUKUaszBpe5lkNF4mtMoRxVenRZ576RHS96tlvzs92psrlfZNsKcVEp05wt8ttVjzYiidMXe4PgulVKMTFwlE7KSDljQ/QpG2Eo+YuFhw009aSOkKqQllohLIeAQqy4LvikrEbeVgNeGf0oU3uTj9Gaj9KIqA7+dOSFKBy0YgqwgHVDYm1c5WvQQEMK410JQrAWdllGOQSEOyvOY20JSs6IclBK0CzEOmwXOagWykmM2NCYzkZIDqqJuvzxFfNpCQmAqDYuaoAwn5rHS1J1UEg4Mvw2lnw3xMCm5COl8MTwiMIkywXekOTmgk3eM7ZoTFsKgqJsNTVKK2kfqImLfL8NROksp1kpieTnFnUp6VB1DcjRJDIEulqPTCnPxSfIJjZDbRjlmZz3v5HzFw2nVRS5g486sk/s1D4qujfsX88rJErapzBxIWO5nhKgyY2MjM8lKysFGNStNiLBZcrEza6ehT7CSsfOo4+dBS+NUoCT9kol8nA/a6Oh20nK/ELHxxZqXn3Z9vGx52MxOsr/g5ajsFCIHW6Jmu6iykXPQNSbZK6uCKe6VVJRm3M6w7uaPszB/P53h90GYnw8DvGy76QqROdmm4eG6HeJ4XmzWPezPOdktOTleULlohRjUNQ6qbo4XXSh/nmn88yLOb2dBvt2a5nXHw/yMFZ9rvEo5UX57mKSZltyydrYLY5Vdw8njwxWGl9t82m8wzLjZLDpRfvlkk73iBLnwODeTKCr7qks9wjLR4YHOs7th2ukJ9kXVodg7mrPzvL/Mh/0mO2WN82acvzQvn0u2SqNVJz76MVhGJAkpri4F1WRPB6sRfriZo5uZELsq5zU3l00v1ytevrre4HE3wUCsnt5N87aS4+uEKCwbM1JWcwPGW/B/cZeTTn4d1hnuJNiQLHfF6pUQPVvXeL7m4ZubHrf9IsPjDDedJCeSZc8cSjmfYsYzJjTVxUy7ovDHJ4u86etspG30Jfz3ZXAftKa5Wp3msuHixT2D7z4+YO8iS+8kzpNBncMFB0pCs71TJwhJbi+Psnx5P8OabpPMnAyWVM4qLiH1jnDR8PJoWeX2IM/VVpgHbR/na7K+0oJ/AeLI7QPA18vhAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 02 16 00 44" title="" data-src="/static/2022-08-02-16-00-44-e432e6738c9bdb1d77bd4eb24a4de0a2-0208c.png" data-srcset="/static/2022-08-02-16-00-44-e432e6738c9bdb1d77bd4eb24a4de0a2-1777c.png 200w,\n/static/2022-08-02-16-00-44-e432e6738c9bdb1d77bd4eb24a4de0a2-1db89.png 400w,\n/static/2022-08-02-16-00-44-e432e6738c9bdb1d77bd4eb24a4de0a2-0208c.png 493w" data-sizes="(max-width: 493px) 100vw, 493px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-02-16-00-59-4087026cd585b660b2ed880ad936c473-0208c.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 493px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 82.55578093306288%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAEW0lEQVQ4y02T+0/TVxjGv/GnXTKzLTFbpqJGGZVLlYEB5U7LpbRcLNIhYikIvdEbQkEolAoFWgpykYsoUMS5LQY102nUHxxbjJoZY6ZkWzTbD8v2DyzZkv1gPjstuuwkT875vuc8z/u87zlfSdvmQF5vxjsd4Ien9/CHFlDnNqLdW0limpV3dpjoqKzGrsilSr4HeXIqNUfrMLS4OOxyMT5zhkSFBynGxoaddqSBARMObzcdISfhz0e5NNbFlVAdl4LHcTmcvL/XTW2VgRaDHof+CCqVGrPFgm8ogN3QiLNBT+1hF/s+rOKD7U1I88MBFiaHGDjuYGwgxNm5C8xNBAjPjHLlwhjnTozQ3tRKrbkFrU5PeUUFZqsVj3+I/s4e+jwn0Na0sWOznvdENdJksJ9lXy+jTisn3Q58ThsjXe1MBQZYmF1kZXyJa+MznJouoqy6kCxlGQZDA75gkGavF09oEJ3Zj7TdwRsyF9Jlm5Fws5HTRz7lrLaUqTYTg/ZjDLnM+B0GQt42hn3duI8bsbbpMTir0Dc04RseodsfYHhshBpzPxu2NSNttSDlxMUSnprl8e3b3FpY4ML4BGd8HQQ9btGGVvqsevqbG/BbLfRabKICI51WE27Rd7u3l+7gIGWGHjYluzF1LiLtfvMtVnp7+fOP33nx7Clr167x65Mn/LT2jAd37vDt6irXv7rK+cV5wrMTzAX6mDxhI9juYrjfx6nTIxy2DOIdvUpgtAfp3Y0bubi0xF8vX3JvcIhzb7zNpQQ5j8R6tbWNB11d3LVYeTwxyUOBx8th3A4bavGMDNpyjPV6Onq8uD0e1JX5SGIwOzPDP8B3fX6+n55j7foNrqtKWG3v4KI8mRviEm7qDdzt7OJpKIRNrFvcbnw+H9U6HeryLApKs0krVKwLzs3O8rcQvON08XB8kuf37/PlxzK+zszmZlExz1cus7awyKrNzo9T09hMZtKzhEhJKQeUhWSXaUjKLSI2s2BdcElcRmT8LIi/fLPKb89f8Oj8MrcmT/PF/CLz4WVOBkcwWJziAowkF2rYmpzOjvRc9io1QkjJ5kwF8UI0Ktjl6+OzlSv0Tkxj9/mptjpR1DWRpqtFpihhc2omH32yny0pGWwV8870HORKtXh/dupa2jlab8GQkklcvgqpov4YsVlKtqXlRAkx+7KIEQIxKQfYLrBLxOMy84nPKSQhr5gkhRqZcHKw3kRlg5nEgjKy1Ie4uWkLlcn7kfI0pcTnqcQPXhLNGrG9SziIy1CwW4jEC5GE/BIBVfTcbrEfQZWxmTTNIVKLikitrqVfnDElpCDtych5RRKE3PU5giTRm9cCkSTRMwKRORLTmZwUVNegrtWSUapDXnYQmTAkpeTkR4kJEZcRJ3mqKOl1kihexdZdFhOXXUBGhY7GVieJpmJijyrRNNZH96QEkS1SbgT/J//3nb/eDll24XpCgci+TLQjo1xHklqNvFRDuroymuhfJf3i+UrsKnIAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 02 16 00 59" title="" data-src="/static/2022-08-02-16-00-59-4087026cd585b660b2ed880ad936c473-0208c.png" data-srcset="/static/2022-08-02-16-00-59-4087026cd585b660b2ed880ad936c473-1777c.png 200w,\n/static/2022-08-02-16-00-59-4087026cd585b660b2ed880ad936c473-1db89.png 400w,\n/static/2022-08-02-16-00-59-4087026cd585b660b2ed880ad936c473-0208c.png 493w" data-sizes="(max-width: 493px) 100vw, 493px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<h1 id="webgl-平面的和透视的投影映射"><a href="#webgl-%E5%B9%B3%E9%9D%A2%E7%9A%84%E5%92%8C%E9%80%8F%E8%A7%86%E7%9A%84%E6%8A%95%E5%BD%B1%E6%98%A0%E5%B0%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 平面的和透视的投影映射</h1>\n<p>投影映射是投影一张图像的过程，就像一个电影放映机对准一个屏幕，然后将电影投影到屏幕上。电影放映机投影的是一个透视的平面。屏幕离放映机越远，则图像就会越大。如果你将屏幕旋转使其不与电影放映机垂直，那么结果将会是一个梯形或者是任意的四边形。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-03-13-45-50-463bff587cbf7c110a8a0f36ca288c44-b4b51.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 200px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7UlEQVQ4y2M42HiTcVLiEnYGBgZGBmqAdaVH5BflbCsAMjmMlSx5gDQLRQauKNirvLJwfxGIHWweB3IpFxBzAzEnEDOTbODqogOKy/J3FYPYRT4NrEhSLEiGc6Ab3nhzO0PBnvmMRQcWMRTum89SsHcBa8G+BYwMa0sOKy7O3V4KMkBf3oQXagAIs0HDlRlqOCfUAjZBGQm44QV75jGie1lpVeH+QhD7//n/TFBDQDQ71GAuqGEgV7Ixs7KA+By522dxF+5boALSB3RhBdCFrUAXajGsLNynBDQUHIbN4ZNxRQhIHBQcXBx8POCIy94yXRho4L2CvfOTgQb+bbix7T/Q0GiGdQgvs+uhehmEeZAiCOxKbmEBMJ20rJsHaOCfsmPL/xfunf8O6Lp/QAODUFzYEDaBFYcLYeHIDnfh1hnYXQgKw5WwMHzwnxEpIljRwhCMoWHIlbF+Ck/h/oWYYQiJ5R3YYpkDajgs/GCxzC6qLMeEM5aR02GORyUrmjeREzlKhIX2VzDEzGlmAsY20IULgOlwPiQdLi/Yo7yqCJJTEhxy2JBdQlb+Xo+Ul3XljHmhLgPRhkBsBMSmQGwBxLpArA7ExkBsCRXXgaZZBLjU84axI3omO5qXWKFJhgdqOBc0TLmhfH4onxPdgQBTp64v2kzZ0gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 03 13 45 50" title="" data-src="/static/2022-08-03-13-45-50-463bff587cbf7c110a8a0f36ca288c44-b4b51.png" data-srcset="/static/2022-08-03-13-45-50-463bff587cbf7c110a8a0f36ca288c44-b4b51.png 200w" data-sizes="(max-width: 200px) 100vw, 200px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>当然，投影映射并不只能投影到平面。还有圆柱型的投影映射、球形的投影映射，等等。</p>\n<p>我们先来介绍下平面的投影映射。在这种情况下，你需要将电影放映机想象成和屏幕一样大，这样即使屏幕离电影放映机很远，电影的图像也不会变得很大，它会保持原来的尺寸。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-03-15-05-08-9ea73865c9e4099852ba5730c692bdb1-a74f3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 176px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 85.22727272727273%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACWElEQVQ4y62UzWvTcBjHf2nemzbtLJuz2gruoIchKg7Ru2dRbyIbAwWR2SbdVhUviijiScGbuoQ5W7viBAVhrs067XxB8OJlngTBqv+Agi/E75N1NdDFOjDw5fckpJ98n7eyqVOz3P3RZyJb43WlsdCKDceKQrpRtURWztWShcyTY3ie6NISOmNcBHGgBFmK4lSOl6/FTcc+m61accOx6wB+BfAwu2dUN5cMx6Av1c4vcZ2c2e4H7wRMNqvWN0AWAWycezPjGlV7iE3naqlCdi5LX012pcMcxykUB0nRIypOaXjqqgJo4/Srkms61s/x+l0ArUE2bc6ni9kKAaW+9VuVEBeSKA6SlojTySNlAn7O1SZdOPyef14kh4OUcrpkOhlKw3Xdf27K6NM7Mhx9wUnAHwQ0ySEBIQ+4cOFdxxredt+3argqsPynhusSkW6d69BlKaxQl8NHb15UKeU2INJtOcwfuBTC6PzV4b7hQ14W2bkJGcDVU/6vNVx2WCEg15/aKYU4XkAcqNiGbtqq0IkHNzyHbV32zWG0R++NoIZhqlGQZE3VaB6H7Ms0Nh/zL4o0h7/GFwvLc+hPeS0XBlkyaFMcewn6dOZ1GSl7DufJ4Qje0XrjGzU4VH2boTbV2hRZC9O9YFQmYnB4HdA0gG/JKeIj7GH+JW+dfKQTUOQl2gLRB1vZELqXfZJ2HNzf+ocCKAVtgbSgjLZDu6Fd0B5oL7QN6ocGms8HBEnc1PbLmbE6mxx57MURRV95zFMnm41Qm655n1uRFwUhluyhd1hm9hYHdyT2G/U4MUYOT3dVAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 03 15 05 08" title="" data-src="/static/2022-08-03-15-05-08-9ea73865c9e4099852ba5730c692bdb1-a74f3.png" data-srcset="/static/2022-08-03-15-05-08-9ea73865c9e4099852ba5730c692bdb1-a74f3.png 176w" data-sizes="(max-width: 176px) 100vw, 176px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>首先，让我们创建一个场景，该场景会绘制一个平面和一个球体。我们将用一个简单的 8x8 棋盘纹理对它们进行贴图。</p>\n<p>这些着色器和纹理文章中的那些着色器是类似的，只是各个矩阵是分开的，这样我们就不需要在 JavaScript 中把它们乘在一起了。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22468731420579460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 顶点着色器\nattribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_projection;\nuniform mat4 u_view;\nuniform mat4 u_world;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n  gl_Position = u_projection * u_view * u_world * a_position;\n\n  // 把纹理坐标传给片段着色器\n  v_texcoord = a_texcoord;\n}`, `22468731420579460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 顶点着色器</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec2</span> a_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_projection<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_view<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_world<span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl_Position <span class="token operator">=</span> u_projection <span class="token operator">*</span> u_view <span class="token operator">*</span> u_world <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n\n  <span class="token comment">// 把纹理坐标传给片段着色器</span>\n  v_texcoord <span class="token operator">=</span> a_texcoord<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>另外，我还添加了一个 <code class="language-text">u_colorMult</code> uniform 来乘以纹理颜色。这样我们就可以通过制作一个单色纹理（monochrome texture）来改变它的颜色。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57871725573776960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 片段着色器\nprecision mediump float;\n\n// 从顶点着色器传来的\nvarying vec2 v_texcoord;\n\nuniform vec4 u_colorMult;\nuniform sampler2D u_texture;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n}`, `57871725573776960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// 片段着色器</span>\n<span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器传来的</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> u_colorMult<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_texture<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span> <span class="token operator">*</span> u_colorMult<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面是设置程序、球体 buffers 和平面 buffers 的代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62590364860496050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 设置 GLSL 程序\n// 编译着色器、链接程序、查找 locations\nconst textureProgramInfo = webglUtils.createProgramInfo(gl, [\'vertex-shader-3d\', \'fragment-shader-3d\']);\n\nconst sphereBufferInfo = primitives.createSphereBufferInfo(\n  gl,\n  1, // 半径\n  12, // 横轴细分数\n  6 // 纵轴细分数\n);\n\nconst planeBufferInfo = primitives.createPlaneBufferInfo(\n  gl,\n  20, // 宽\n  20, // 高\n  1, // 横轴细分数\n  1 // 纵轴细分数\n);`, `62590364860496050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 设置 GLSL 程序</span>\n<span class="token comment">// 编译着色器、链接程序、查找 locations</span>\n<span class="token keyword">const</span> textureProgramInfo <span class="token operator">=</span> webglUtils<span class="token punctuation">.</span><span class="token function">createProgramInfo</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'vertex-shader-3d\'</span><span class="token punctuation">,</span> <span class="token string">\'fragment-shader-3d\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> sphereBufferInfo <span class="token operator">=</span> primitives<span class="token punctuation">.</span><span class="token function">createSphereBufferInfo</span><span class="token punctuation">(</span>\n  gl<span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 半径</span>\n  <span class="token number">12</span><span class="token punctuation">,</span> <span class="token comment">// 横轴细分数</span>\n  <span class="token number">6</span> <span class="token comment">// 纵轴细分数</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> planeBufferInfo <span class="token operator">=</span> primitives<span class="token punctuation">.</span><span class="token function">createPlaneBufferInfo</span><span class="token punctuation">(</span>\n  gl<span class="token punctuation">,</span>\n  <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 宽</span>\n  <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 高</span>\n  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 横轴细分数</span>\n  <span class="token number">1</span> <span class="token comment">// 纵轴细分数</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>和创建一个 8x8 棋盘纹理的代码，使用了我们在数据纹理文章中介绍过的技术。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89240743422647160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个 8x8 棋盘纹理\nconst checkerboardTexture = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, checkerboardTexture);\ngl.texImage2D(\n  gl.TEXTURE_2D,\n  0, // mip level\n  gl.LUMINANCE, // internal format\n  8, // width\n  8, // height\n  0, // border\n  gl.LUMINANCE, // format\n  gl.UNSIGNED_BYTE, // type\n  new Uint8Array([\n    // data\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff,\n    0xcc,\n    0xff\n  ])\n);\ngl.generateMipmap(gl.TEXTURE_2D);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);`, `89240743422647160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个 8x8 棋盘纹理</span>\n<span class="token keyword">const</span> checkerboardTexture <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> checkerboardTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>\n  gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span>\n  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// mip level</span>\n  gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> <span class="token comment">// internal format</span>\n  <span class="token number">8</span><span class="token punctuation">,</span> <span class="token comment">// width</span>\n  <span class="token number">8</span><span class="token punctuation">,</span> <span class="token comment">// height</span>\n  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// border</span>\n  gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> <span class="token comment">// format</span>\n  gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token comment">// type</span>\n  <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n    <span class="token comment">// data</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span><span class="token punctuation">,</span>\n    <span class="token number">0xcc</span><span class="token punctuation">,</span>\n    <span class="token number">0xff</span>\n  <span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">generateMipmap</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了绘制，我们将会创建一个函数，该函数需要一个投影矩阵和一个相机矩阵作为参数，以便从相机矩阵中计算出视图矩阵，然后绘制球体和立方体</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63064829822080330000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 每个物体的 uniforms\nconst planeUniforms = {\n  u_colorMult: [0.5, 0.5, 1, 1], // 浅蓝色\n  u_texture: checkerboardTexture,\n  u_world: m4.translation(0, 0, 0)\n};\n\nconst sphereUniforms = {\n  u_colorMult: [1, 0.5, 0.5, 1], // 粉红色\n  u_texture: checkerboardTexture,\n  u_world: m4.translation(2, 3, 4)\n};\n\nfunction drawScene(projectionMatrix, cameraMatrix) {\n  // 从相机矩阵中计算出视图矩阵\n  const viewMatrix = m4.inverse(cameraMatrix);\n\n  gl.useProgram(textureProgramInfo.program);\n\n  // 设置球体和平面共享的 uniforms\n  webglUtils.setUniforms(textureProgramInfo, {\n    u_view: viewMatrix,\n    u_projection: projectionMatrix\n  });\n\n  // ------ 绘制球体 --------\n\n  // 设置所有需要的 attributes\n  webglUtils.setBuffersAndAttributes(gl, textureProgramInfo, sphereBufferInfo);\n\n  // 设置球体特有的 uniforms\n  webglUtils.setUniforms(textureProgramInfo, sphereUniforms);\n\n  // 调用 gl.drawArrays 或 gl.drawElements\n  webglUtils.drawBufferInfo(gl, sphereBufferInfo);\n\n  // ------ 绘制平面 --------\n\n  // 设置所有需要的 attributes\n  webglUtils.setBuffersAndAttributes(gl, textureProgramInfo, planeBufferInfo);\n\n  // 设置平面特有的 uniforms\n  webglUtils.setUniforms(textureProgramInfo, planeUniforms);\n\n  // 调用 gl.drawArrays 或 gl.drawElements\n  webglUtils.drawBufferInfo(gl, planeBufferInfo);\n}`, `63064829822080330000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 每个物体的 uniforms</span>\n<span class="token keyword">const</span> planeUniforms <span class="token operator">=</span> <span class="token punctuation">{</span>\n  u_colorMult<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 浅蓝色</span>\n  u_texture<span class="token punctuation">:</span> checkerboardTexture<span class="token punctuation">,</span>\n  u_world<span class="token punctuation">:</span> m4<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> sphereUniforms <span class="token operator">=</span> <span class="token punctuation">{</span>\n  u_colorMult<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 粉红色</span>\n  u_texture<span class="token punctuation">:</span> checkerboardTexture<span class="token punctuation">,</span>\n  u_world<span class="token punctuation">:</span> m4<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token parameter">projectionMatrix<span class="token punctuation">,</span> cameraMatrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 从相机矩阵中计算出视图矩阵</span>\n  <span class="token keyword">const</span> viewMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>cameraMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  gl<span class="token punctuation">.</span><span class="token function">useProgram</span><span class="token punctuation">(</span>textureProgramInfo<span class="token punctuation">.</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置球体和平面共享的 uniforms</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setUniforms</span><span class="token punctuation">(</span>textureProgramInfo<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    u_view<span class="token punctuation">:</span> viewMatrix<span class="token punctuation">,</span>\n    u_projection<span class="token punctuation">:</span> projectionMatrix\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ------ 绘制球体 --------</span>\n\n  <span class="token comment">// 设置所有需要的 attributes</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setBuffersAndAttributes</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> textureProgramInfo<span class="token punctuation">,</span> sphereBufferInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置球体特有的 uniforms</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setUniforms</span><span class="token punctuation">(</span>textureProgramInfo<span class="token punctuation">,</span> sphereUniforms<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 调用 gl.drawArrays 或 gl.drawElements</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">drawBufferInfo</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> sphereBufferInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ------ 绘制平面 --------</span>\n\n  <span class="token comment">// 设置所有需要的 attributes</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setBuffersAndAttributes</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> textureProgramInfo<span class="token punctuation">,</span> planeBufferInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置平面特有的 uniforms</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setUniforms</span><span class="token punctuation">(</span>textureProgramInfo<span class="token punctuation">,</span> planeUniforms<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 调用 gl.drawArrays 或 gl.drawElements</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">drawBufferInfo</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> planeBufferInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们可以在一个 render 函数中使用这份代码，就像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31896083636944093000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const settings = {\n  cameraX: 2.75,\n  cameraY: 5\n};\n\nconst fieldOfViewRadians = degToRad(60);\n\nfunction render() {\n  webglUtils.resizeCanvasToDisplaySize(gl.canvas);\n\n  // 告诉 WebGL 如何从裁剪空间转换为像素\n  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n  gl.enable(gl.CULL_FACE);\n  gl.enable(gl.DEPTH_TEST);\n\n  // 清除 canvas 和深度缓冲区\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n  // 计算投影矩阵\n  const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n  const projectionMatrix = m4.perspective(fieldOfViewRadians, aspect, 1, 2000);\n\n  // 使用 look at 计算相机的矩阵\n  const cameraPosition = [settings.cameraX, settings.cameraY, 7];\n  const target = [0, 0, 0];\n  const up = [0, 1, 0];\n  const cameraMatrix = m4.lookAt(cameraPosition, target, up);\n\n  drawScene(projectionMatrix, cameraMatrix);\n}\n\nrender();`, `31896083636944093000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token punctuation">{</span>\n  cameraX<span class="token punctuation">:</span> <span class="token number">2.75</span><span class="token punctuation">,</span>\n  cameraY<span class="token punctuation">:</span> <span class="token number">5</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> fieldOfViewRadians <span class="token operator">=</span> <span class="token function">degToRad</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">resizeCanvasToDisplaySize</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉 WebGL 如何从裁剪空间转换为像素</span>\n  gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  gl<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">CULL_FACE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">DEPTH_TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 清除 canvas 和深度缓冲区</span>\n  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span> <span class="token operator">|</span> gl<span class="token punctuation">.</span><span class="token constant">DEPTH_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 计算投影矩阵</span>\n  <span class="token keyword">const</span> aspect <span class="token operator">=</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>\n  <span class="token keyword">const</span> projectionMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">perspective</span><span class="token punctuation">(</span>fieldOfViewRadians<span class="token punctuation">,</span> aspect<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 使用 look at 计算相机的矩阵</span>\n  <span class="token keyword">const</span> cameraPosition <span class="token operator">=</span> <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>cameraX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>cameraY<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> up <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> cameraMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>cameraPosition<span class="token punctuation">,</span> target<span class="token punctuation">,</span> up<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">drawScene</span><span class="token punctuation">(</span>projectionMatrix<span class="token punctuation">,</span> cameraMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>所以，现在我们有了一个简单的场景，场景内有一个平面和一个球体。我添加了一对滑块来让你改变相机的位置，以便你理解该场景。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7gmu66?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>现在，让我们使用平面投影的方式将一个纹理投影到该球体和平面上。</p>\n<p>首先要做的是，加载一个纹理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75628087978166530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function loadImageTexture(url) {\n  // 创建一个纹理\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  // 用一个 1x1 蓝色像素填充该纹理\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));\n  // 异步加载一张图片\n  const image = new Image();\n  image.src = url;\n  image.addEventListener(\'load\', function () {\n    // 现在图片加载完了，把它拷贝到纹理中\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    // 假设该纹理的宽高是 2 的整次幂\n    gl.generateMipmap(gl.TEXTURE_2D);\n    render();\n  });\n  return texture;\n}\n\nconst imageTexture = loadImageTexture(\'resources/f-texture.png\');`, `75628087978166530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">loadImageTexture</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 创建一个纹理</span>\n  <span class="token keyword">const</span> texture <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 用一个 1x1 蓝色像素填充该纹理</span>\n  gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 异步加载一张图片</span>\n  <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>\n  image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'load\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 现在图片加载完了，把它拷贝到纹理中</span>\n    gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 假设该纹理的宽高是 2 的整次幂</span>\n    gl<span class="token punctuation">.</span><span class="token function">generateMipmap</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> texture<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> imageTexture <span class="token operator">=</span> <span class="token function">loadImageTexture</span><span class="token punctuation">(</span><span class="token string">\'resources/f-texture.png\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>回想一下可视化相机的文章。我们创建了一个 -1 到 +1 的立方体，然后把它绘制出来表示相机的视椎体。我们的矩阵使得视椎体内的空间表示的是世界空间中一些锥体形状的区域，这些区域从世界空间中被转换到了 -1 到 +1 的裁剪空间。我们可以在这里做类似的事。</p>\n<p>让我们来试试吧。首先，在我们的片段着色器中，我们会在 0.0 到 1.0 之间的纹理坐标上绘制投影的纹理。而在这个范围外的纹理坐标，我们将会使用棋盘纹理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3872590319525093400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 从顶点着色器传来的\nvarying vec2 v_texcoord;\nvarying vec4 v_projectedTexcoord;\n\nuniform vec4 u_colorMult;\nuniform sampler2D u_texture;\nuniform sampler2D u_projectedTexture;\n\nvoid main() {\n  // gl_FragColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n  // 除以 w 得到正确的值，详见透视投影的文章\n  vec3 projectedTexcoord = v_projectedTexcoord.xyz / v_projectedTexcoord.w;\n\n  bool inRange =\n      projectedTexcoord.x >= 0.0 &&\n      projectedTexcoord.x <= 1.0 &&\n      projectedTexcoord.y >= 0.0 &&\n      projectedTexcoord.y <= 1.0;\n\n  vec4 projectedTexColor = texture2D(u_projectedTexture, projectedTexcoord.xy);\n  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n\n  float projectedAmount = inRange ? 1.0 : 0.0;\n  gl_FragColor = mix(texColor, projectedTexColor, projectedAmount);\n}`, `3872590319525093400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{5,9,12-26}"\n              >\n                <span class="gatsby-code-button-language">glsl{5,9,12-26}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器传来的</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">varying</span> <span class="token keyword">vec4</span> v_projectedTexcoord<span class="token punctuation">;</span></span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> u_colorMult<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_texture<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_projectedTexture<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// gl_FragColor = texture2D(u_texture, v_texcoord) * u_colorMult;</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 除以 w 得到正确的值，详见透视投影的文章</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec3</span> projectedTexcoord <span class="token operator">=</span> v_projectedTexcoord<span class="token punctuation">.</span>xyz <span class="token operator">/</span> v_projectedTexcoord<span class="token punctuation">.</span>w<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">bool</span> inRange <span class="token operator">=</span></span><span class="gatsby-highlight-code-line">      projectedTexcoord<span class="token punctuation">.</span>x <span class="token operator">>=</span> <span class="token number">0.0</span> <span class="token operator">&amp;&amp;</span></span><span class="gatsby-highlight-code-line">      projectedTexcoord<span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> <span class="token number">1.0</span> <span class="token operator">&amp;&amp;</span></span><span class="gatsby-highlight-code-line">      projectedTexcoord<span class="token punctuation">.</span>y <span class="token operator">>=</span> <span class="token number">0.0</span> <span class="token operator">&amp;&amp;</span></span><span class="gatsby-highlight-code-line">      projectedTexcoord<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec4</span> projectedTexColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_projectedTexture<span class="token punctuation">,</span> projectedTexcoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec4</span> texColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span> <span class="token operator">*</span> u_colorMult<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">float</span> projectedAmount <span class="token operator">=</span> inRange <span class="token operator">?</span> <span class="token number">1.0</span> <span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  gl_FragColor <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>texColor<span class="token punctuation">,</span> projectedTexColor<span class="token punctuation">,</span> projectedAmount<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了计算投影的纹理坐标，我们会创建一个矩阵，该矩阵表示 3D 空间中一个确切方向的方位和位置，就像可视化相机文章中的相机那样。然后我们会通过那个 3D 空间投影球体顶点和平面顶点的世界坐标。使用我们刚刚写的代码，那些位于 0 到 1 的投影纹理坐标就会显示该投影纹理。</p>\n<p>让我们添加代码到顶点着色器，通过该空间投影球体和平面的世界坐标</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81534678306516160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_projection;\nuniform mat4 u_view;\nuniform mat4 u_world;\nuniform mat4 u_textureMatrix;\n\nvarying vec2 v_texcoord;\nvarying vec4 v_projectedTexcoord;\n\nvoid main() {\n  vec4 worldPosition = u_world * a_position;\n\n  // gl_Position = u_projection * u_view * u_world * a_position;\n  gl_Position = u_projection * u_view * worldPosition;\n\n  // 将纹理坐标传给片段着色器\n  v_texcoord = a_texcoord;\n\n  v_projectedTexcoord = u_textureMatrix * worldPosition;\n}`, `81534678306516160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{7,10,13,15-16,21}"\n              >\n                <span class="gatsby-code-button-language">glsl{7,10,13,15-16,21}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec2</span> a_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_projection<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_view<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_world<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_textureMatrix<span class="token punctuation">;</span></span>\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">varying</span> <span class="token keyword">vec4</span> v_projectedTexcoord<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">  <span class="token keyword">vec4</span> worldPosition <span class="token operator">=</span> u_world <span class="token operator">*</span> a_position<span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// gl_Position = u_projection * u_view * u_world * a_position;</span></span><span class="gatsby-highlight-code-line">  gl_Position <span class="token operator">=</span> u_projection <span class="token operator">*</span> u_view <span class="token operator">*</span> worldPosition<span class="token punctuation">;</span></span>\n  <span class="token comment">// 将纹理坐标传给片段着色器</span>\n  v_texcoord <span class="token operator">=</span> a_texcoord<span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  v_projectedTexcoord <span class="token operator">=</span> u_textureMatrix <span class="token operator">*</span> worldPosition<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在，剩下要做的就是计算定义了该方位空间的矩阵。我们要做的就是计算出一个世界矩阵，就像我们对其他物体做的那样，然后取它的逆矩阵。这样我们就得到了一个矩阵，该矩阵可以让我们将其他物体的世界坐标转换为相对于该空间的坐标。这和相机文章中的视图矩阵做的事情是完全一样的。</p>\n<p>我们会使用创建的 lookAt 函数</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87104406199535200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const settings = {\n  cameraX: 2.75,\n  cameraY: 5,\n  posX: 3.5,\n  posY: 4.4,\n  posZ: 4.7,\n  targetX: 0.8,\n  targetY: 0,\n  targetZ: 4.7\n};\n\nfunction drawScene(projectionMatrix, cameraMatrix) {\n  // 从相机矩阵中创建一个视图矩阵\n  const viewMatrix = m4.inverse(cameraMatrix);\n\n  let textureWorldMatrix = m4.lookAt(\n    [settings.posX, settings.posY, settings.posZ], // position\n    [settings.targetX, settings.targetY, settings.targetZ], // target\n    [0, 1, 0] // up\n  );\n\n  // 使用这个世界矩阵的逆矩阵来创建\n  // 一个矩阵，该矩阵会变换其他世界坐标\n  // 为相对于这个空间的坐标。\n  const textureMatrix = m4.inverse(textureWorldMatrix);\n\n  // 设置对球体和平面都一样的 uniforms\n  webglUtils.setUniforms(textureProgramInfo, {\n    u_view: viewMatrix,\n    u_projection: projectionMatrix,\n    u_textureMatrix: textureMatrix,\n    u_projectedTexture: imageTexture\n  });\n\n  // ...\n}`, `87104406199535200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{4-9,31-32}"\n              >\n                <span class="gatsby-code-button-language">js{4-9,31-32}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token punctuation">{</span>\n  cameraX<span class="token punctuation">:</span> <span class="token number">2.75</span><span class="token punctuation">,</span>\n  cameraY<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n<span class="gatsby-highlight-code-line">  posX<span class="token punctuation">:</span> <span class="token number">3.5</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  posY<span class="token punctuation">:</span> <span class="token number">4.4</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  posZ<span class="token punctuation">:</span> <span class="token number">4.7</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  targetX<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  targetY<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  targetZ<span class="token punctuation">:</span> <span class="token number">4.7</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token parameter">projectionMatrix<span class="token punctuation">,</span> cameraMatrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 从相机矩阵中创建一个视图矩阵</span>\n  <span class="token keyword">const</span> viewMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>cameraMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> textureWorldMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>\n    <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>posX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// position</span>\n    <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>targetX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// target</span>\n    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// up</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 使用这个世界矩阵的逆矩阵来创建</span>\n  <span class="token comment">// 一个矩阵，该矩阵会变换其他世界坐标</span>\n  <span class="token comment">// 为相对于这个空间的坐标。</span>\n  <span class="token keyword">const</span> textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置对球体和平面都一样的 uniforms</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setUniforms</span><span class="token punctuation">(</span>textureProgramInfo<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    u_view<span class="token punctuation">:</span> viewMatrix<span class="token punctuation">,</span>\n    u_projection<span class="token punctuation">:</span> projectionMatrix<span class="token punctuation">,</span>\n<span class="gatsby-highlight-code-line">    u_textureMatrix<span class="token punctuation">:</span> textureMatrix<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    u_projectedTexture<span class="token punctuation">:</span> imageTexture</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>当然，你不一定要用 lookAt。你可以任选一种方法来创建一个世界矩阵，例如使用一个场景图或矩阵栈。</p>\n<p>在我们运行之前，让我们添加一些缩放比例</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61562737356911910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const settings = {\n  cameraX: 2.75,\n  cameraY: 5,\n  posX: 3.5,\n  posY: 4.4,\n  posZ: 4.7,\n  targetX: 0.8,\n  targetY: 0,\n  targetZ: 4.7,\n  projWidth: 2,\n  projHeight: 2\n};\n\nfunction drawScene(projectionMatrix, cameraMatrix) {\n  // 从相机矩阵中创建一个视图矩阵\n  const viewMatrix = m4.inverse(cameraMatrix);\n\n  let textureWorldMatrix = m4.lookAt(\n    [settings.posX, settings.posY, settings.posZ], // position\n    [settings.targetX, settings.targetY, settings.targetZ], // target\n    [0, 1, 0] // up\n  );\n  textureWorldMatrix = m4.scale(textureWorldMatrix, settings.projWidth, settings.projHeight, 1);\n\n  // 使用这个世界矩阵的逆矩阵来创建\n  // 一个矩阵，该矩阵会变换其他世界坐标\n  // 为相对于这个空间的坐标。\n  const textureMatrix = m4.inverse(textureWorldMatrix);\n\n  // ...\n}`, `61562737356911910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{10-11,23}"\n              >\n                <span class="gatsby-code-button-language">js{10-11,23}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token punctuation">{</span>\n  cameraX<span class="token punctuation">:</span> <span class="token number">2.75</span><span class="token punctuation">,</span>\n  cameraY<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n  posX<span class="token punctuation">:</span> <span class="token number">3.5</span><span class="token punctuation">,</span>\n  posY<span class="token punctuation">:</span> <span class="token number">4.4</span><span class="token punctuation">,</span>\n  posZ<span class="token punctuation">:</span> <span class="token number">4.7</span><span class="token punctuation">,</span>\n  targetX<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>\n  targetY<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  targetZ<span class="token punctuation">:</span> <span class="token number">4.7</span><span class="token punctuation">,</span>\n<span class="gatsby-highlight-code-line">  projWidth<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  projHeight<span class="token punctuation">:</span> <span class="token number">2</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token parameter">projectionMatrix<span class="token punctuation">,</span> cameraMatrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 从相机矩阵中创建一个视图矩阵</span>\n  <span class="token keyword">const</span> viewMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>cameraMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> textureWorldMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>\n    <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>posX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// position</span>\n    <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>targetX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// target</span>\n    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// up</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">  textureWorldMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>projWidth<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>projHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// 使用这个世界矩阵的逆矩阵来创建</span>\n  <span class="token comment">// 一个矩阵，该矩阵会变换其他世界坐标</span>\n  <span class="token comment">// 为相对于这个空间的坐标。</span>\n  <span class="token keyword">const</span> textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样我们就得到了一个投影的纹理。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/k0k2q1?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>但我觉得这样很难看到该纹理所处的空间。让我们添加一个线框立方体来帮助可视化。</p>\n<p>首先，我们需要一个单独的着色器集合。这些着色器只能绘制纯色，没有纹理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8831726624021697000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;color-vertex-shader&quot; type=&quot;x-shader/x-vertex&quot;>\n  attribute vec4 a_position;\n\n  uniform mat4 u_projection;\n  uniform mat4 u_view;\n  uniform mat4 u_world;\n\n  void main() {\n    // 将 position 乘以矩阵\n    gl_Position = u_projection * u_view * u_world * a_position;\n  }\n</script>\n\n<script id=&quot;color-fragment-shader&quot; type=&quot;x-shader/x-fragment&quot;>\n  precision mediump float;\n\n  uniform vec4 u_color;\n  void main() {\n    gl_FragColor = u_color;\n  }\n</script>`, `8831726624021697000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="html"\n              >\n                <span class="gatsby-code-button-language">html</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>color-vertex-shader<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>x-shader/x-vertex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  attribute vec4 a_position<span class="token punctuation">;</span>\n\n  uniform mat4 u_projection<span class="token punctuation">;</span>\n  uniform mat4 u_view<span class="token punctuation">;</span>\n  uniform mat4 u_world<span class="token punctuation">;</span>\n\n  <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 将 position 乘以矩阵</span>\n    gl_Position <span class="token operator">=</span> u_projection <span class="token operator">*</span> u_view <span class="token operator">*</span> u_world <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>color-fragment-shader<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>x-shader/x-fragment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  precision mediump float<span class="token punctuation">;</span>\n\n  uniform vec4 u_color<span class="token punctuation">;</span>\n  <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    gl_FragColor <span class="token operator">=</span> u_color<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后我们还需要编译和链接这些着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10894222960038590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 设置 GLSL 程序\nconst textureProgramInfo = webglUtils.createProgramInfo(gl, [\'vertex-shader-3d\', \'fragment-shader-3d\']);\nconst colorProgramInfo = webglUtils.createProgramInfo(gl, [\'color-vertex-shader\', \'color-fragment-shader\']);`, `10894222960038590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3}"\n              >\n                <span class="gatsby-code-button-language">js{3}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 设置 GLSL 程序</span>\n<span class="token keyword">const</span> textureProgramInfo <span class="token operator">=</span> webglUtils<span class="token punctuation">.</span><span class="token function">createProgramInfo</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'vertex-shader-3d\'</span><span class="token punctuation">,</span> <span class="token string">\'fragment-shader-3d\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> colorProgramInfo <span class="token operator">=</span> webglUtils<span class="token punctuation">.</span><span class="token function">createProgramInfo</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">\'color-vertex-shader\'</span><span class="token punctuation">,</span> <span class="token string">\'color-fragment-shader\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后我们需要一些数据来绘制线框立方体</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57485576564647320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const sphereBufferInfo = primitives.createSphereBufferInfo(\n  gl,\n  1, // 半径\n  12, // 横轴细分数\n  6 // 纵轴细分数\n);\n\nconst planeBufferInfo = primitives.createPlaneBufferInfo(\n  gl,\n  20, // 宽度\n  20, // 高度\n  1, // 横轴细分数\n  1 // 纵轴细分数\n);\n\nconst cubeLinesBufferInfo = webglUtils.createBufferInfoFromArrays(gl, {\n  position: [0, 0, -1, 1, 0, -1, 0, 1, -1, 1, 1, -1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1],\n  indices: [0, 1, 1, 3, 3, 2, 2, 0, 4, 5, 5, 7, 7, 6, 6, 4, 0, 4, 1, 5, 3, 7, 2, 6]\n});`, `57485576564647320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{16-19}"\n              >\n                <span class="gatsby-code-button-language">js{16-19}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> sphereBufferInfo <span class="token operator">=</span> primitives<span class="token punctuation">.</span><span class="token function">createSphereBufferInfo</span><span class="token punctuation">(</span>\n  gl<span class="token punctuation">,</span>\n  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 半径</span>\n  <span class="token number">12</span><span class="token punctuation">,</span> <span class="token comment">// 横轴细分数</span>\n  <span class="token number">6</span> <span class="token comment">// 纵轴细分数</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> planeBufferInfo <span class="token operator">=</span> primitives<span class="token punctuation">.</span><span class="token function">createPlaneBufferInfo</span><span class="token punctuation">(</span>\n  gl<span class="token punctuation">,</span>\n  <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 宽度</span>\n  <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 高度</span>\n  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 横轴细分数</span>\n  <span class="token number">1</span> <span class="token comment">// 纵轴细分数</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> cubeLinesBufferInfo <span class="token operator">=</span> webglUtils<span class="token punctuation">.</span><span class="token function">createBufferInfoFromArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  indices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>注意，为了匹配纹理坐标，该立方体在 X 轴和 Y 轴上的范围是 0 到 1。而在 Z 轴上，它的范围是 -1 到 1。这样我们缩放它的时候就能使其在两个方向上都拉伸了。</p>\n<p>要使用该立方体的话，我们只需要使用之前的 textureWorldMatrix 就可以了，因为我们要做的是绘制表示那个空间的立方体。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29319852150314807000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function drawScene(projectionMatrix, cameraMatrix) {\n  //...\n  // ------ 绘制立方体 ------\n\n  gl.useProgram(colorProgramInfo.program);\n\n  // 设置所有需要的 attributes\n  webglUtils.setBuffersAndAttributes(gl, colorProgramInfo, cubeLinesBufferInfo);\n\n  // 在 Z 轴上缩放该立方体，\n  // 以便表示该纹理是被投影到无限远的。\n  const mat = m4.scale(textureWorldMatrix, 1, 1, 1000);\n\n  // 设置我们计算出来的 unifroms\n  webglUtils.setUniforms(colorProgramInfo, {\n    u_color: [0, 0, 0, 1],\n    u_view: viewMatrix,\n    u_projection: projectionMatrix,\n    u_world: mat\n  });\n\n  // 调用 gl.drawArrays 或者 gl.drawElements\n  webglUtils.drawBufferInfo(gl, cubeLinesBufferInfo, gl.LINES);\n}`, `29319852150314807000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token parameter">projectionMatrix<span class="token punctuation">,</span> cameraMatrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  <span class="token comment">// ------ 绘制立方体 ------</span>\n\n  gl<span class="token punctuation">.</span><span class="token function">useProgram</span><span class="token punctuation">(</span>colorProgramInfo<span class="token punctuation">.</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置所有需要的 attributes</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setBuffersAndAttributes</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> colorProgramInfo<span class="token punctuation">,</span> cubeLinesBufferInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 在 Z 轴上缩放该立方体，</span>\n  <span class="token comment">// 以便表示该纹理是被投影到无限远的。</span>\n  <span class="token keyword">const</span> mat <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置我们计算出来的 unifroms</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">setUniforms</span><span class="token punctuation">(</span>colorProgramInfo<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    u_color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    u_view<span class="token punctuation">:</span> viewMatrix<span class="token punctuation">,</span>\n    u_projection<span class="token punctuation">:</span> projectionMatrix<span class="token punctuation">,</span>\n    u_world<span class="token punctuation">:</span> mat\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 调用 gl.drawArrays 或者 gl.drawElements</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">drawBufferInfo</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> cubeLinesBufferInfo<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有了这些，现在我们可以更加容易地看到投影位于哪里了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/7n5fyf?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>有一点需要注意的是，我们并没有真正地投影该纹理。我们在做的是相反的事情。即对被渲染物体的每一个像素，我们判断纹理的哪一部分是被投影到该像素上的，然后再查找该部分纹理上的颜色。</p>\n<p>既然我们在上面提到了电影放映机，那么我们如何模拟一台电影放映机呢？我们只需要简单地使用一个投影矩阵来乘以它（即上面的纹理矩阵）</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45546409288832290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const settings = {\n  cameraX: 2.75,\n  cameraY: 5,\n  posX: 2.5,\n  posY: 4.8,\n  posZ: 4.3,\n  targetX: 2.5,\n  targetY: 0,\n  targetZ: 3.5,\n  projWidth: 1,\n  projHeight: 1,\n  perspective: true,\n  fieldOfView: 45\n};\n\n// ...\n\nfunction drawScene(projectionMatrix, cameraMatrix) {\n  // 从相机矩阵中创建一个视图矩阵\n  const viewMatrix = m4.inverse(cameraMatrix);\n\n  const textureWorldMatrix = m4.lookAt(\n    [settings.posX, settings.posY, settings.posZ], // position\n    [settings.targetX, settings.targetY, settings.targetZ], // target\n    [0, 1, 0] // up\n  );\n  // textureWorldMatrix = m4.scale(textureWorldMatrix, settings.projWidth, settings.projHeight, 1);\n\n  const textureProjectionMatrix = settings.perspective\n    ? m4.perspective(\n        degToRad(settings.fieldOfView),\n        settings.projWidth / settings.projHeight,\n        0.1, // near\n        200\n      ) // far\n    : m4.orthographic(\n        -settings.projWidth / 2, // left\n        settings.projWidth / 2, // right\n        -settings.projHeight / 2, // bottom\n        settings.projHeight / 2, // top\n        0.1, // near\n        200\n      ); // far\n\n  // 使用这个世界矩阵的逆矩阵来创建\n  // 一个矩阵，该矩阵会变换其他世界坐标\n  // 为相对于这个空间的坐标。\n  // const textureMatrix = m4.inverse(textureWorldMatrix);\n  const textureMatrix = m4.multiply(textureProjectionMatrix, m4.inverse(textureWorldMatrix));\n}`, `45546409288832290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{12-13,27,29-43,48-49}"\n              >\n                <span class="gatsby-code-button-language">js{12-13,27,29-43,48-49}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token punctuation">{</span>\n  cameraX<span class="token punctuation">:</span> <span class="token number">2.75</span><span class="token punctuation">,</span>\n  cameraY<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n  posX<span class="token punctuation">:</span> <span class="token number">2.5</span><span class="token punctuation">,</span>\n  posY<span class="token punctuation">:</span> <span class="token number">4.8</span><span class="token punctuation">,</span>\n  posZ<span class="token punctuation">:</span> <span class="token number">4.3</span><span class="token punctuation">,</span>\n  targetX<span class="token punctuation">:</span> <span class="token number">2.5</span><span class="token punctuation">,</span>\n  targetY<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  targetZ<span class="token punctuation">:</span> <span class="token number">3.5</span><span class="token punctuation">,</span>\n  projWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n  projHeight<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n<span class="gatsby-highlight-code-line">  perspective<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  fieldOfView<span class="token punctuation">:</span> <span class="token number">45</span></span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token parameter">projectionMatrix<span class="token punctuation">,</span> cameraMatrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 从相机矩阵中创建一个视图矩阵</span>\n  <span class="token keyword">const</span> viewMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>cameraMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> textureWorldMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>\n    <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>posX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// position</span>\n    <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>targetX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// target</span>\n    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// up</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// textureWorldMatrix = m4.scale(textureWorldMatrix, settings.projWidth, settings.projHeight, 1);</span></span>\n<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> textureProjectionMatrix <span class="token operator">=</span> settings<span class="token punctuation">.</span>perspective</span><span class="gatsby-highlight-code-line">    <span class="token operator">?</span> m4<span class="token punctuation">.</span><span class="token function">perspective</span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">        <span class="token function">degToRad</span><span class="token punctuation">(</span>settings<span class="token punctuation">.</span>fieldOfView<span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        settings<span class="token punctuation">.</span>projWidth <span class="token operator">/</span> settings<span class="token punctuation">.</span>projHeight<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token comment">// near</span></span><span class="gatsby-highlight-code-line">        <span class="token number">200</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">)</span> <span class="token comment">// far</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">:</span> m4<span class="token punctuation">.</span><span class="token function">orthographic</span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">        <span class="token operator">-</span>settings<span class="token punctuation">.</span>projWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// left</span></span><span class="gatsby-highlight-code-line">        settings<span class="token punctuation">.</span>projWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// right</span></span><span class="gatsby-highlight-code-line">        <span class="token operator">-</span>settings<span class="token punctuation">.</span>projHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// bottom</span></span><span class="gatsby-highlight-code-line">        settings<span class="token punctuation">.</span>projHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// top</span></span><span class="gatsby-highlight-code-line">        <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token comment">// near</span></span><span class="gatsby-highlight-code-line">        <span class="token number">200</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// far</span></span>\n  <span class="token comment">// 使用这个世界矩阵的逆矩阵来创建</span>\n  <span class="token comment">// 一个矩阵，该矩阵会变换其他世界坐标</span>\n  <span class="token comment">// 为相对于这个空间的坐标。</span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// const textureMatrix = m4.inverse(textureWorldMatrix);</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>textureProjectionMatrix<span class="token punctuation">,</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>注意，我添加了一个选项，可以选择是使用透视投影矩阵还是使用正交投影矩阵。</p>\n<p>在绘制线框的时候我们也需要使用那个投影矩阵</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52265484306842590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ------ 绘制立方体 ------\n\n// ...\n\n// // 在 Z 轴上缩放该立方体，\n// // 以便表示该纹理是被投影到无限远的。\n// const mat = m4.scale(textureWorldMatrix, 1, 1, 1000);\n\n// 调整立方体使其匹配该投影\nconst mat = m4.multiply(textureWorldMatrix, m4.inverse(textureProjectionMatrix));`, `52265484306842590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ------ 绘制立方体 ------</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token comment">// // 在 Z 轴上缩放该立方体，</span>\n<span class="token comment">// // 以便表示该纹理是被投影到无限远的。</span>\n<span class="token comment">// const mat = m4.scale(textureWorldMatrix, 1, 1, 1000);</span>\n\n<span class="token comment">// 调整立方体使其匹配该投影</span>\n<span class="token keyword">const</span> mat <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">,</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>textureProjectionMatrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>有了这些，我们就得到了</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1co2ct?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>它已经正常工作了，但我们的投影和我们的线框立方体都只是使用了 0 到 1 的空间，所以它只使用到了投影视椎体的 1/4。</p>\n<p>要修复这个问题，首先让我们的立方体在所有方向上都是 -1 到 +1</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64740198143504560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const cubeLinesBufferInfo = webglUtils.createBufferInfoFromArrays(gl, {\n  position: [\n    //   0,  0, -1,\n    //   1,  0, -1,\n    //   0,  1, -1,\n    //   1,  1, -1,\n    //   0,  0,  1,\n    //   1,  0,  1,\n    //   0,  1,  1,\n    //   1,  1,  1,\n    -1,\n    -1,\n    -1,\n    1,\n    -1,\n    -1,\n    -1,\n    1,\n    -1,\n    1,\n    1,\n    -1,\n    -1,\n    -1,\n    1,\n    1,\n    -1,\n    1,\n    -1,\n    1,\n    1,\n    1,\n    1,\n    1\n  ],\n  indices: [0, 1, 1, 3, 3, 2, 2, 0, 4, 5, 5, 7, 7, 6, 6, 4, 0, 4, 1, 5, 3, 7, 2, 6]\n});`, `64740198143504560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3-34}"\n              >\n                <span class="gatsby-code-button-language">js{3-34}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> cubeLinesBufferInfo <span class="token operator">=</span> webglUtils<span class="token punctuation">.</span><span class="token function">createBufferInfoFromArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  position<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n<span class="gatsby-highlight-code-line">    <span class="token comment">//   0,  0, -1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   1,  0, -1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   0,  1, -1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   1,  1, -1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   0,  0,  1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   1,  0,  1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   0,  1,  1,</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">//   1,  1,  1,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token number">1</span></span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  indices<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后当将其用于纹理矩阵时，我们需要使视椎体内的空间范围是 0 到 1。这可以通过使空间偏移 0.5 然后将其缩放 0.5 倍来实现。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48686103337748095000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const textureWorldMatrix = m4.lookAt(\n  [settings.posX, settings.posY, settings.posZ], // position\n  [settings.targetX, settings.targetY, settings.targetZ], // target\n  [0, 1, 0] // up\n);\n\nconst textureProjectionMatrix = settings.perspective\n  ? m4.perspective(\n      degToRad(settings.fieldOfView),\n      settings.projWidth / settings.projHeight,\n      0.1, // near\n      200\n    ) // far\n  : m4.orthographic(\n      -settings.projWidth / 2, // left\n      settings.projWidth / 2, // right\n      -settings.projHeight / 2, // bottom\n      settings.projHeight / 2, // top\n      0.1, // near\n      200\n    ); // far\n\n// // 使用这个世界矩阵的逆矩阵来创建\n// // 一个矩阵，该矩阵会变换其他世界坐标\n// // 为相对于这个空间的坐标。\n// const textureMatrix = m4.multiply(textureProjectionMatrix, m4.inverse(textureWorldMatrix));\n\nlet textureMatrix = m4.identity();\ntextureMatrix = m4.translate(textureMatrix, 0.5, 0.5, 0.5);\ntextureMatrix = m4.scale(textureMatrix, 0.5, 0.5, 0.5);\ntextureMatrix = m4.multiply(textureMatrix, textureProjectionMatrix);\n// 使用这个世界矩阵的逆矩阵来创建\n// 一个矩阵，该矩阵会变换其他世界坐标\n// 为相对于这个空间的坐标。\ntextureMatrix = m4.multiply(textureMatrix, m4.inverse(textureWorldMatrix));`, `48686103337748095000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{23-26,28-35}"\n              >\n                <span class="gatsby-code-button-language">js{23-26,28-35}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> textureWorldMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>\n  <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>posX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>posZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// position</span>\n  <span class="token punctuation">[</span>settings<span class="token punctuation">.</span>targetX<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetY<span class="token punctuation">,</span> settings<span class="token punctuation">.</span>targetZ<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// target</span>\n  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// up</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> textureProjectionMatrix <span class="token operator">=</span> settings<span class="token punctuation">.</span>perspective\n  <span class="token operator">?</span> m4<span class="token punctuation">.</span><span class="token function">perspective</span><span class="token punctuation">(</span>\n      <span class="token function">degToRad</span><span class="token punctuation">(</span>settings<span class="token punctuation">.</span>fieldOfView<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      settings<span class="token punctuation">.</span>projWidth <span class="token operator">/</span> settings<span class="token punctuation">.</span>projHeight<span class="token punctuation">,</span>\n      <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token comment">// near</span>\n      <span class="token number">200</span>\n    <span class="token punctuation">)</span> <span class="token comment">// far</span>\n  <span class="token punctuation">:</span> m4<span class="token punctuation">.</span><span class="token function">orthographic</span><span class="token punctuation">(</span>\n      <span class="token operator">-</span>settings<span class="token punctuation">.</span>projWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// left</span>\n      settings<span class="token punctuation">.</span>projWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// right</span>\n      <span class="token operator">-</span>settings<span class="token punctuation">.</span>projHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// bottom</span>\n      settings<span class="token punctuation">.</span>projHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// top</span>\n      <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token comment">// near</span>\n      <span class="token number">200</span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// far</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// // 使用这个世界矩阵的逆矩阵来创建</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// // 一个矩阵，该矩阵会变换其他世界坐标</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// // 为相对于这个空间的坐标。</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// const textureMatrix = m4.multiply(textureProjectionMatrix, m4.inverse(textureWorldMatrix));</span></span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">let</span> textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>textureMatrix<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>textureMatrix<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>textureMatrix<span class="token punctuation">,</span> textureProjectionMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// 使用这个世界矩阵的逆矩阵来创建</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// 一个矩阵，该矩阵会变换其他世界坐标</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// 为相对于这个空间的坐标。</span></span><span class="gatsby-highlight-code-line">textureMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>textureMatrix<span class="token punctuation">,</span> m4<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>textureWorldMatrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在，它看起来可以正常工作了</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/1b2dir?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>那么，平面投影一个纹理有什么作用呢？</p>\n<ol>\n<li>\n<p>因为你想要这么做，大多数 3D 建模软件都提供了一种将一个纹理进行平面投影的方法。</p>\n</li>\n<li>\n<p>另一个作用是贴花（decal）。贴花是一种在物体表面上放置溅射的油漆或爆炸痕迹的方式。要实现贴花，通常不会使用上面着色器的那种做法。相反，你需要写一些函数来遍历需要应用贴花的模型的几何。对于每一个三角形，你需要检查该三角形是否位于该贴花的范围内，这与 JavaScript 的着色器例子中的 inRange 检查一样。对于在贴花范围内的每个三角形，你把该三角形和投影的纹理坐标添加到某个新的几何中。然后你把该贴花添加到你的绘制列表中。</p>\n<p>为贴花生成几何是对的，否则你就需要为 2 个贴花、3 个贴、4 个贴花等等提供不同的着色器，然后你的着色器很快就会变得很复杂，并达到 GPUs 着色器的纹理限制。</p>\n</li>\n<li>\n<p>还有另一个作用是模拟真实世界的投影映射。你对一个物体进行了 3D 建模，你将会把视频投影到该模型上，你使用了类似上面那样的代码来实现投影，除了你的纹理是视频外。然后你可以编辑并完善该视频，使其匹配该模型，而不用在实际现场中使用一个真正的投影仪。</p>\n</li>\n<li>\n<p>这种投影的另一个用处就是用阴影映射来计算阴影。</p>\n</li>\n</ol>\n<h2 id="在条件语句内的纹理引用"><a href="#%E5%9C%A8%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E5%86%85%E7%9A%84%E7%BA%B9%E7%90%86%E5%BC%95%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在条件语句内的纹理引用</h2>\n<p>在上面的片段着色器中，在所有的情况下我们都对两个纹理进行了读取</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48188475762961920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`  vec4 projectedTexColor = texture2D(u_projectedTexture, projectedTexcoord.xy);\n  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n\n  float projectedAmount = inRange ? 1.0 : 0.0;\n  gl_FragColor = mix(texColor, projectedTexColor, projectedAmount);`, `48188475762961920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl">  <span class="token keyword">vec4</span> projectedTexColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_projectedTexture<span class="token punctuation">,</span> projectedTexcoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">vec4</span> texColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span> <span class="token operator">*</span> u_colorMult<span class="token punctuation">;</span>\n\n  <span class="token keyword">float</span> projectedAmount <span class="token operator">=</span> inRange <span class="token operator">?</span> <span class="token number">1.0</span> <span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">;</span>\n  gl_FragColor <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>texColor<span class="token punctuation">,</span> projectedTexColor<span class="token punctuation">,</span> projectedAmount<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为什么我们不像下面这样做呢？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2643644456852789000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`if (inRange) {\n   gl_FragColor = texture2D(u_projectedTexture, projectedTexcoord.xy);\n} else {\n   gl_FragColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n}`, `2643644456852789000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">if</span> <span class="token punctuation">(</span>inRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_projectedTexture<span class="token punctuation">,</span> projectedTexcoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n   gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span> <span class="token operator">*</span> u_colorMult<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>摘自 <a href="https://www.khronos.org/files/opengles_shading_language.pdf" target="_blank" rel="nofollow noreferrer noopener">GLSL ES 1.0 spec Appendix A, Section 6</a></p>\n<p>Texture Accesses</p>\n<p>Accessing mip-mapped textures within the body of a non-uniform conditional block gives an undefined value. A non-uniform conditional block is a block whose execution cannot be determined at compile time.</p>\n<p>换句话说，如果我们要使用 mip-mapped 的纹理，那我们就必须确保总是能够访问到它们。我们可以在条件语句内使用访问纹理的结果。例如我们可以写成这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17941788211153930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`vec4 projectedTexColor = texture2D(u_projectedTexture, projectedTexcoord.xy);\nvec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n\nif (inRange) {\n   gl_FragColor = projectedTexColor;\n} else {\n   gl_FragColor = texColor;\n}`, `17941788211153930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">vec4</span> projectedTexColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_projectedTexture<span class="token punctuation">,</span> projectedTexcoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">vec4</span> texColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span> <span class="token operator">*</span> u_colorMult<span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>inRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_FragColor <span class="token operator">=</span> projectedTexColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n   gl_FragColor <span class="token operator">=</span> texColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>或者这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56644228898390516000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`vec4 projectedTexColor = texture2D(u_projectedTexture, projectedTexcoord.xy);\nvec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;\n\ngl_FragColor = inRange ? projectedTexColor : texColor;`, `56644228898390516000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">vec4</span> projectedTexColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_projectedTexture<span class="token punctuation">,</span> projectedTexcoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">vec4</span> texColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span> <span class="token operator">*</span> u_colorMult<span class="token punctuation">;</span>\n\ngl_FragColor <span class="token operator">=</span> inRange <span class="token operator">?</span> projectedTexColor <span class="token punctuation">:</span> texColor<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>但是我们不能在条件语句内访问 mip-mapped 的纹理本身。这样做在你的 GPU 上可能是可行的，但并不是在所有的 GPUs 上都能行。注意，规范没有说明能否在条件语句内访问 non-mipmapped 的纹理，所以，如果你确定你的纹理是 non-mipmapped 的，那就没什么问题。</p>\n<p>无论如何，重要的是你要知道有这么个东西</p>\n<p>至于我为什么使用 mix 而不使用基于 inRange 的三元运算符，则只是一个个人喜好。mix 更加灵活，所以我通常这样写。</p>\n<h1 id="webgl-渐变纹理"><a href="#webgl-%E6%B8%90%E5%8F%98%E7%BA%B9%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 渐变纹理</h1>\n<p>WebGL 中的一个重要认识是纹理不仅仅是直接应用于三角形的东西，正如我们在纹理文章中所介绍的那样。纹理是随机访问数据的数组，通常是二维数据数组。因此，使用随机访问数据数组的任何解决方案都是我们可以使用纹理的地方。</p>\n<p>在关于定向光的文章中，我们介绍了如何使用点积来计算 2 个向量之间的角度。在那里 ​ 我们计算了光的方向与模型表面法线的点积，这提供了 2 个向量之间角度的余弦值。余弦是从 -1 到 +1 的值，我们将其用作颜色的直接乘数。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40212094595221840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`float light = dot(normal, u_reverseLightDirection);\n\ngl_FragColor = u_color;\ngl_FragColor.rgb *= light;`, `40212094595221840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">float</span> light <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> u_reverseLightDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ngl_FragColor <span class="token operator">=</span> u_color<span class="token punctuation">;</span>\ngl_FragColor<span class="token punctuation">.</span>rgb <span class="token operator">*</span><span class="token operator">=</span> light<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这会使颜色变暗，使其远离光线。</p>\n<p>如果我们不直接使用该点积，而是使用它从一维纹理中查找值，该怎么办？</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84538757393247620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 从顶点着色器传入\nvarying vec3 v_normal;\n\nuniform vec3 u_reverseLightDirection;\nuniform vec4 u_color;\nuniform sampler2D u_ramp;\n\nvoid main() {\n  // 因为 v_normal 是一个变量，所以它是插值的\n  // 所以它不会是单位向量。规范化它\n  // 将再次使其成为单位向量\n  vec3 normal = normalize(v_normal);\n\n  // float light = dot(normal, u_reverseLightDirection);\n  float cosAngle = dot(normal, u_reverseLightDirection);\n\n  // 从 -1 <-> 1 转换为 0 <-> 1\n  float u = cosAngle * 0.5 + 0.5;\n\n  // 创建一个纹理坐标\n  vec2 uv = vec2(u, 0.5);\n\n  // 从一维纹理中查找一个值\n  vec4 rampColor = texture2D(u_ramp, uv);\n\n  gl_FragColor = u_color;\n  // gl_FragColor.rgb *= light;\n  gl_FragColor *= rampColor;\n}`, `84538757393247620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{8,16-26,29-30}"\n              >\n                <span class="gatsby-code-button-language">glsl{8,16-26,29-30}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器传入</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec3</span> v_normal<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_reverseLightDirection<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> u_color<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_ramp<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 因为 v_normal 是一个变量，所以它是插值的</span>\n  <span class="token comment">// 所以它不会是单位向量。规范化它</span>\n  <span class="token comment">// 将再次使其成为单位向量</span>\n  <span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>v_normal<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// float light = dot(normal, u_reverseLightDirection);</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">float</span> cosAngle <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> u_reverseLightDirection<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 从 -1 &lt;-> 1 转换为 0 &lt;-> 1</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">float</span> u <span class="token operator">=</span> cosAngle <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 创建一个纹理坐标</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec2</span> uv <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 从一维纹理中查找一个值</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec4</span> rampColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_ramp<span class="token punctuation">,</span> uv<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  gl_FragColor <span class="token operator">=</span> u_color<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// gl_FragColor.rgb *= light;</span></span><span class="gatsby-highlight-code-line">  gl_FragColor <span class="token operator">*</span><span class="token operator">=</span> rampColor<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们需要制作纹理，让我们从 2x1 纹理开始，我们将使用 LUMINANCE 为我们提供单色纹理的格式，每个纹理像素仅使用 1 个字节。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45147323430128750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var tex = gl.createTexture();\ngl.bindTexture(gl.TEXTURE_2D, tex);\ngl.texImage2D(\n  gl.TEXTURE_2D, // 目标\n  0, // mip 级别\n  gl.LUMINANCE, // 内部格式\n  2, // 宽度\n  1, // 高度\n  0, // 边界\n  gl.LUMINANCE, // 格式\n  gl.UNSIGNED_BYTE, // 类型\n  new Uint8Array([90, 255])\n);\n\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);`, `45147323430128750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> tex <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>\n  gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token comment">// 目标</span>\n  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// mip 级别</span>\n  gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> <span class="token comment">// 内部格式</span>\n  <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 宽度</span>\n  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 高度</span>\n  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 边界</span>\n  gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> <span class="token comment">// 格式</span>\n  gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token comment">// 类型</span>\n  <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面 2 个像素的颜色是深灰色（90）和白色（255）。我们还设置了纹理参数，因此不会有过滤。</p>\n<p>修改新纹理的样本，我们需要查找 <code class="language-text">u_ramp</code> 变量</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46803344228567220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var worldViewProjectionLocation = gl.getUniformLocation(program, \'u_worldViewProjection\');\nvar worldInverseTransposeLocation = gl.getUniformLocation(program, \'u_worldInverseTranspose\');\nvar colorLocation = gl.getUniformLocation(program, \'u_color\');\nvar rampLocation = gl.getUniformLocation(program, \'u_ramp\');\nvar reverseLightDirectionLocation = gl.getUniformLocation(program, \'u_reverseLightDirection\');`, `46803344228567220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{4}"\n              >\n                <span class="gatsby-code-button-language">js{4}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> worldViewProjectionLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_worldViewProjection\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> worldInverseTransposeLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_worldInverseTranspose\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> colorLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_color\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> rampLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_ramp\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token keyword">var</span> reverseLightDirectionLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_reverseLightDirection\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们需要在渲染时设置纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3411756914245267500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 将纹理绑定到活动纹理单元 0\ngl.activeTexture(gl.TEXTURE0 + 0);\ngl.bindTexture(gl.TEXTURE_2D, tex);\n// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理\ngl.uniform1i(rampLocation, 0);`, `3411756914245267500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 将纹理绑定到活动纹理单元 0</span>\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>rampLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我将 3D 的 F 数据换成了低多边形头部的数据。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/kcp967?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>如果您旋转模型，您会看到它看起来类似于卡通着色</p>\n<p>在上面的示例中，我们设置了纹理过滤，NEAREST 这意味着我们只需从纹理中选择最近的纹理元作为我们的颜色。只有 2 个纹理元，所以如果表面背对光，我们得到第一种颜色（深灰色），如果表面朝向光，我们得到第二种颜色（白色），那种颜色乘以以前的 <code class="language-text">gl_FragColor</code> 颜色 light。</p>\n<p>考虑一下，如果我们切换到 LINEAR 过滤，我们应该得到与使用纹理之前相同的结果。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65455125101140560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);`, `65455125101140560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);</span>\n<span class="token comment">// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/l4glzu?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>这看起来很相似，但如果我们真的将它们并排比较…</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-04-11-29-57-756c6fb89441c612727e6bfb485f5329-21746.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 449px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.3652561247216%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADcElEQVQ4yz2TbUxVdRzH//dyAas1e2CjOcJSdwkUMpgujFByrcf1wmq2dMu5NdeiFwk2s5W90OGkgSQ0lhuXHA8ijMTMsEnYCzdbY6GbiVvjIYHLlXPvOefec+7zvZ9+97K1nbPz5rfP+X6/v+9PWXoISw/yRbiTkuQe3OH3+GDuSxa0RaKhCAE9gGEY6IaOruuk9DjD+hhVs3tx//kmL/y6m/F/rpMKJ2RWR90zFnk1dhCVqkKlt6GsatSkG/foK0zMTGIH7Sw0M2wZIY6FulD3t6D+LkeNl6HOFpHb/DTfj3cTEQGq3T4voM24ki/hTO/AYdSQN7EVdeYxPhxqIGUnWNY1bN3irjlNnrUD5d1Czu2tOK6Wk3u2FHW0gLUNFfh8PtRJu0fUyUCyTr7bUXYNzglRe6qQfd31xKwomu4nrNvcMu+Sbwpw4XlxUYka24SjtwT1eSHrPqpg9t9ZVL91RUBiNSGwaC3qr0pcQxtRLY/z1UgTRNMsB5YJSc5zxjzF3rdkphzHmFg+V0LesadQnz5K1aFabNNCjYSuoZI1K8CMwtGNuG5KRleLafq5FWJkgUHdZMFcwr30LuqPMhz3qnEOlZLbJEBPEdVHXyYWiqJ+CV0XYO3Ki2T4UxmuS5m/r6Fl5DTEBehfxhSgz7jPJm0PanYzDsnbebGM/MYi1DeF1B1+fQU4ad4hP7lTFL6YBeb0lOA6vhbVuoaesXOkYim0gPb/luu0jyXDZ3HGtuMceIYH3ilAfbKavcf3kwjHUZlcVideE7tiO1aLc0Ts9LpxnCxm9MYV4pE4/oA/u5i0dHCXfhjlqyBnTiyf2cCqQ0+i6h/mYNtnpKJJVFjq8Ea0MbtpV6wO55RU5sf1rGurxru4iBkMZgudAaaMOO3agJS3HNctqc1wKXmt61EHHuHC+EUS0YQA/RY3jJs4M0uJC2xK6nCqAM/vvcStmNj1Zy8lU25/QK5G09k2tx91e4MApdgNq9jdvI+wHIDm1+QwIjbI40le4gl28dCdGo6Mn4CENCYWxTTNrMKgKA1HI9klTdnTPDf9Pg9ermRn59t4l7yk02kiEbmUgYEB2k5/y7XLv9HYfIQTP7TQ391Lx3cdeDwe5ufnsW2bmZkZOjs7ae9oZ2ToAueHBznwdT1Dg4P09/XT1dVFX18f/wGu7dCA/AoUogAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 04 11 29 57" title="" data-src="/static/2022-08-04-11-29-57-756c6fb89441c612727e6bfb485f5329-21746.png" data-srcset="/static/2022-08-04-11-29-57-756c6fb89441c612727e6bfb485f5329-17e1d.png 200w,\n/static/2022-08-04-11-29-57-756c6fb89441c612727e6bfb485f5329-f4f9f.png 400w,\n/static/2022-08-04-11-29-57-756c6fb89441c612727e6bfb485f5329-21746.png 449w" data-sizes="(max-width: 449px) 100vw, 449px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>我们可以看到它们并不相同。这是怎么回事？</p>\n<p>LINEAR 过滤像素之间的混合。如果我们使用线性过滤放大 2 像素纹理，我们会看到问题</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-08-04-11-30-56-2f5398c85f07c1d54a1bd7430a5751c3-cf56a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 353px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 141.07648725212462%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsSAAALEgHS3X78AAAEXklEQVRIx8WVW09cVRTHz1xgZpgWixUo2ktCorVGihELRTncivpgoqZFX/XVFBvtgw9+AjXR+uA3MJJoGG5P3goMkaS0TaXFBpgpDENhDsNw51z22eec+bvOmTMMIiZGE92T3+y19+z93ytrrT1buH37Fn67NwmYpkN8ehq3xsdxf5LmqGUNA5MTE7hzbwLcMpClT2w2jl8n7zpY9hr6TiTn8MuNmxBUTYOGQuPENsH2zDm26uwsLGL7FpE/hs4hGIoCtW8ALNIHLdIP1jsAlWyd5uyxTuz092Nwawg9bAQRdRh9LIoeeQi92ohDRM3Nr+tb5GFiHoYgAETWhbu95c5vEn7pOQioh8BfIC8IVufa5yCY1Ot1uCNPQdCSCzCCj9DGIOALI+stgUHYfdZXQvMl2Dp8CEfTTSTYDh9vhddsg5dRb7TCZ9uEh7fgrhIjD23BosO0sZi8CjoYQmDXBtlb4RIcSb9Igq20sZk8aiGPqDdc24aLOUHtT4IBVzDwzwTV/0LQ/NeCblKyByYltCcpbW5SCNbiJMVJEI09ej4p84WyyWP8Zdmcy5WK6ZaNXT6mWzacykaZpqQsL0NtexV6UztYcweYeAEKwcUOBzRewHZ7B17JvIfz1hWIrAvN7H2I8mWIymU0q10QtS7HjqtJOoQxaLE49PiDXeSpaew8mMFGMoZMKo4lKQZpMYbUyizm1+cws53AlJxAnC0grj/MQbbKtVwMtVCZEzfuPwSDUHwhJKuCGGsI47uLZfi86xg++OQUOr8+jZqhWvhn6uHdbIafte3iU1sLdWj6wxQrv5NRO9uGUASpsgg364PovVSKa1fKcfWzE+jsfhLPjtbAk6C4qZQkUyQo0xbBmzChzLhZLi7NlY0n5JQK9wSQOlaM8YYSRC4dIcFKEjyJt7qfQk30LLxzDRBkER6jxSFfRgfWoV0+Otk5wZArWIGrn+4VpD8JuSlXh0ahDgse7rvLBwl++L8JOn8OgVInIVlvyImj7g0iVRXA+PkwIp1l+NKJ4Sm83X0aZ6O18O3GsDUH3ZRCDOeTdHeD7i3xEV7KsgfSUQ/G64rQ82YYX3Q9SmXzOC5+U40z0WcgJJ6njY3k2Us5LII3uh4uLkI7Xg2j/Dh45UkYhFz+BBbOVOHGyyfQ9041vvroaXx8rRbvflsPMSqiIt6BxzZfQyV7w6HCRn0d95VZCgHnYKkUuLRMSNBTErSlFFhagrIiYWdtGRtrKaxtSFjbSSMtpyGxDJbYClJ6BhJfdbBtxhl5TE+nhT+2BTpgeXUV3LTA6CVTNQZVZdAZh8lNbGTWsTj/EPubaZgQsll6aS1rF9BYkWWo9BpyXYeuMzBmozm2znUoqoIdWmO/0VbWKkD7hby6Lby3/7tt//qch/vE7N4+zR7ml9ve2WN7XiePdfLetvPr8wgHnZZZSeP7H35EX/8AoqOjGB6JYnBwAD/9fB3Xh4YxNjaGfvptdi7hrM8L2+13fHsuGmkZGUcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 08 04 11 30 56" title="" data-src="/static/2022-08-04-11-30-56-2f5398c85f07c1d54a1bd7430a5751c3-cf56a.png" data-srcset="/static/2022-08-04-11-30-56-2f5398c85f07c1d54a1bd7430a5751c3-da624.png 200w,\n/static/2022-08-04-11-30-56-2f5398c85f07c1d54a1bd7430a5751c3-cf56a.png 353w" data-sizes="(max-width: 353px) 100vw, 353px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>每边有半个像素，没有插值。想象一下，如果纹理设置 <code class="language-text">TEXTURE_WRAP_S</code> 为 REPEAT，然后我们期望红色像素的最左半部分线性地向绿色混合，就好像绿色向左重复一样。但是左边的颜色更红，因为我们使用的是 <code class="language-text">CLAMP_TO_EDGE</code></p>\n<p>要真正获得渐变，我们只想从该中心范围中选择值。我们可以通过着色器中的一些数学运算来做到这一点</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8650713833844037000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 从顶点着色器传入\nvarying vec3 v_normal;\n\nuniform vec3 u_reverseLightDirection;\nuniform vec4 u_color;\nuniform sampler2D u_ramp;\nuniform vec2 u_rampSize;\n\nvoid main() {\n  // 因为 v_normal 是一个变量，所以它是插值的\n  // 所以它不会是单位向量。规范化它\n  // 将再次使其成为单位向量\n  vec3 normal = normalize(v_normal);\n\n  float cosAngle = dot(normal, u_reverseLightDirection);\n\n  // 从 -1 <-> 1 转换为 0 <-> 1\n  float u = cosAngle * 0.5 + 0.5;\n\n  // 制作纹理坐标\n  vec2 uv = vec2(u, 0.5);\n\n  // 缩放到渐变的大小\n  vec2 texelRange = uv * (u_rampSize - 1.0);\n\n  // 偏移半个纹理元并转换为纹理坐标\n  vec2 rampUV = (texelRange + 0.5) / u_rampSize;\n\n  // vec4 rampColor = texture2D(u_ramp, uv);\n  vec4 rampColor = texture2D(u_ramp, rampUV);\n\n  gl_FragColor = u_color;\n  gl_FragColor *= rampColor;\n}`, `8650713833844037000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{9,25-29,31-32}"\n              >\n                <span class="gatsby-code-button-language">glsl{9,25-29,31-32}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器传入</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec3</span> v_normal<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_reverseLightDirection<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> u_color<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_ramp<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_rampSize<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 因为 v_normal 是一个变量，所以它是插值的</span>\n  <span class="token comment">// 所以它不会是单位向量。规范化它</span>\n  <span class="token comment">// 将再次使其成为单位向量</span>\n  <span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>v_normal<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">float</span> cosAngle <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> u_reverseLightDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 从 -1 &lt;-> 1 转换为 0 &lt;-> 1</span>\n  <span class="token keyword">float</span> u <span class="token operator">=</span> cosAngle <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 制作纹理坐标</span>\n  <span class="token keyword">vec2</span> uv <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 缩放到渐变的大小</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec2</span> texelRange <span class="token operator">=</span> uv <span class="token operator">*</span> <span class="token punctuation">(</span>u_rampSize <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 偏移半个纹理元并转换为纹理坐标</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec2</span> rampUV <span class="token operator">=</span> <span class="token punctuation">(</span>texelRange <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> u_rampSize<span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// vec4 rampColor = texture2D(u_ramp, uv);</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec4</span> rampColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_ramp<span class="token punctuation">,</span> rampUV<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  gl_FragColor <span class="token operator">=</span> u_color<span class="token punctuation">;</span>\n  gl_FragColor <span class="token operator">*</span><span class="token operator">=</span> rampColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>上面我们基本上是在缩放我们的 uv 坐标，所以它从 0 到 1 比纹理的宽度小 1。然后添加半个像素并转换回标准化纹理坐标。</p>\n<p>我们需要查找位置 <code class="language-text">u_rampSize</code></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28088472324334866000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var colorLocation = gl.getUniformLocation(program, \'u_color\');\nvar rampLocation = gl.getUniformLocation(program, \'u_ramp\');\nvar rampSizeLocation = gl.getUniformLocation(program, \'u_rampSize\');`, `28088472324334866000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> colorLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_color\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> rampLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_ramp\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> rampSizeLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_rampSize\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>我们需要在渲染时设置它</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79214109129193910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 将纹理绑定到活动纹理单元 0\ngl.activeTexture(gl.TEXTURE0 + 0);\ngl.bindTexture(gl.TEXTURE_2D, tex);\n// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理\ngl.uniform1i(rampLocation, 0);\ngl.uniform2fv(rampSizeLocation, [2, 1]);`, `79214109129193910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 将纹理绑定到活动纹理单元 0</span>\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>rampLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>rampSizeLocation<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在我们运行它之前，让我们添加一个标志，以便我们可以比较有无渐变纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99899464904451100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 从顶点着色器传入\nvarying vec3 v_normal;\n\nuniform vec3 u_reverseLightDirection;\nuniform vec4 u_color;\nuniform sampler2D u_ramp;\nuniform vec2 u_rampSize;\nuniform bool u_useRampTexture;\n\nvoid main() {\n  // 因为 v_normal 是一个变量，所以它是插值的\n  // 所以它不会是单位向量。规范化它\n  // 将再次使其成为单位向量\n  vec3 normal = normalize(v_normal);\n\n  float cosAngle = dot(normal, u_reverseLightDirection);\n\n  // 从 -1 <-> 1 转换为 0 <-> 1\n  float u = cosAngle * 0.5 + 0.5;\n\n  // 制作纹理坐标\n  vec2 uv = vec2(u, 0.5);\n\n  // 缩放到渐变的大小\n  vec2 texelRange = uv * (u_rampSize - 1.0);\n\n  // 偏移半个纹理元并转换为纹理坐标\n  vec2 rampUV = (texelRange + 0.5) / u_rampSize;\n\n  vec4 rampColor = texture2D(u_ramp, rampUV);\n\n  if (!u_useRampTexture) {\n    rampColor = vec4(u, u, u, 1);\n  }\n\n  gl_FragColor = u_color;\n  gl_FragColor *= rampColor;\n}`, `99899464904451100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{10,34-36}"\n              >\n                <span class="gatsby-code-button-language">glsl{10,34-36}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器传入</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec3</span> v_normal<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_reverseLightDirection<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> u_color<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_ramp<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_rampSize<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">bool</span> u_useRampTexture<span class="token punctuation">;</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 因为 v_normal 是一个变量，所以它是插值的</span>\n  <span class="token comment">// 所以它不会是单位向量。规范化它</span>\n  <span class="token comment">// 将再次使其成为单位向量</span>\n  <span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>v_normal<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">float</span> cosAngle <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> u_reverseLightDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 从 -1 &lt;-> 1 转换为 0 &lt;-> 1</span>\n  <span class="token keyword">float</span> u <span class="token operator">=</span> cosAngle <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 制作纹理坐标</span>\n  <span class="token keyword">vec2</span> uv <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 缩放到渐变的大小</span>\n  <span class="token keyword">vec2</span> texelRange <span class="token operator">=</span> uv <span class="token operator">*</span> <span class="token punctuation">(</span>u_rampSize <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 偏移半个纹理元并转换为纹理坐标</span>\n  <span class="token keyword">vec2</span> rampUV <span class="token operator">=</span> <span class="token punctuation">(</span>texelRange <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> u_rampSize<span class="token punctuation">;</span>\n\n  <span class="token keyword">vec4</span> rampColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_ramp<span class="token punctuation">,</span> rampUV<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>u_useRampTexture<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    rampColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> u<span class="token punctuation">,</span> u<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>\n  gl_FragColor <span class="token operator">=</span> u_color<span class="token punctuation">;</span>\n  gl_FragColor <span class="token operator">*</span><span class="token operator">=</span> rampColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们也会查找 uniform 的位置。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18622994642101310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var rampLocation = gl.getUniformLocation(program, \'u_ramp\');\nvar rampSizeLocation = gl.getUniformLocation(program, \'u_rampSize\');\nvar useRampTextureLocation = gl.getUniformLocation(program, \'u_useRampTexture\');`, `18622994642101310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3}"\n              >\n                <span class="gatsby-code-button-language">js{3}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> rampLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_ramp\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> rampSizeLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_rampSize\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> useRampTextureLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_useRampTexture\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>并设置它</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48476306537465680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var data = {\n  useRampTexture: true\n};\n\n// ...\n\n// 将纹理绑定到活动纹理单元 0\ngl.activeTexture(gl.TEXTURE0 + 0);\ngl.bindTexture(gl.TEXTURE_2D, tex);\n// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理\ngl.uniform1i(rampLocation, 0);\ngl.uniform2fv(rampSizeLocation, [2, 1]);\n\ngl.uniform1i(useRampTextureLocation, data.useRampTexture);`, `48476306537465680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{14}"\n              >\n                <span class="gatsby-code-button-language">js{14}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>\n  useRampTexture<span class="token punctuation">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 将纹理绑定到活动纹理单元 0</span>\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>rampLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>rampSizeLocation<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>useRampTextureLocation<span class="token punctuation">,</span> data<span class="token punctuation">.</span>useRampTexture<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>并且我们可以看到旧的光照方式和新的渐变纹理方式匹配</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/hhj00m?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>单击 useRampTexture 复选框，我们看不到任何变化，因为这两种技术现在匹配。</p>\n<blockquote>\n<p>注意：我通常不建议 <code class="language-text">u_useRampTexture</code> 在着色器中使用条件。相反，我建议制作 2 个着色器程序，一个使用普通光照，一个使用渐变纹理。不幸的是，由于代码没有使用类似于 out helper 库的东西，因此支持 2 个着色器程序将进行相当大的更改。每个程序都需要自己的一组位置。做出如此大的改变会分散本文的重点，因此在这种情况下，我决定使用条件。一般来说，虽然我尽量避免使用条件来选择着色器中的特征，而是为不同的特征创建不同的着色器。</p>\n</blockquote>\n<blockquote>\n<p>注意：这个数学只有在我们使用 LINEAR 过滤时才重要。如果我们使用 NEAREST 过滤，我们需要原始数学。</p>\n</blockquote>\n<p>现在我们知道渐变数学是正确的，让我们制作一堆不同的渐变纹理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59537431000749970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个 256 数组，其中元素 0 到 127\n// 从 64 到 191 和元素 128 到 255\n// 都是 255\nconst smoothSolid = new Array(256).fill(255);\nfor (let i = 0; i < 128; ++i) {\n  smoothSolid[i] = 64 + i;\n}\n\nconst ramps = [\n  { name: \'dark-white\', color: [0.2, 1, 0.2, 1], format: gl.LUMINANCE, filter: false, data: [80, 255] },\n  {\n    name: \'dark-white-skewed\',\n    color: [0.2, 1, 0.2, 1],\n    format: gl.LUMINANCE,\n    filter: false,\n    data: [80, 80, 80, 255, 255]\n  },\n  { name: \'normal\', color: [0.2, 1, 0.2, 1], format: gl.LUMINANCE, filter: true, data: [0, 255] },\n  { name: \'3-step\', color: [0.2, 1, 0.2, 1], format: gl.LUMINANCE, filter: false, data: [80, 160, 255] },\n  { name: \'4-step\', color: [0.2, 1, 0.2, 1], format: gl.LUMINANCE, filter: false, data: [80, 140, 200, 255] },\n  {\n    name: \'4-step skewed\',\n    color: [0.2, 1, 0.2, 1],\n    format: gl.LUMINANCE,\n    filter: false,\n    data: [80, 80, 80, 80, 140, 200, 255]\n  },\n  { name: \'black-white-black\', color: [0.2, 1, 0.2, 1], format: gl.LUMINANCE, filter: false, data: [80, 255, 80] },\n  {\n    name: \'stripes\',\n    color: [0.2, 1, 0.2, 1],\n    format: gl.LUMINANCE,\n    filter: false,\n    data: [\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255,\n      80,\n      255\n    ]\n  },\n  {\n    name: \'stripe\',\n    color: [0.2, 1, 0.2, 1],\n    format: gl.LUMINANCE,\n    filter: false,\n    data: [\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      80,\n      0,\n      0,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255,\n      255\n    ]\n  },\n  { name: \'smooth-solid\', color: [0.2, 1, 0.2, 1], format: gl.LUMINANCE, filter: false, data: smoothSolid },\n  { name: \'rgb\', color: [1, 1, 1, 1], format: gl.RGB, filter: true, data: [255, 0, 0, 0, 255, 0, 0, 0, 255] }\n];\n\nvar elementsForFormat = {};\nelementsForFormat[gl.LUMINANCE] = 1;\nelementsForFormat[gl.RGB] = 3;\n\nramps.forEach((ramp) => {\n  const { name, format, filter, data } = ramp;\n  var tex = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, tex);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n  const width = data.length / elementsForFormat[format];\n  gl.texImage2D(\n    gl.TEXTURE_2D, // 目标\n    0, // mip 级别\n    format, // 内部格式\n    width,\n    1, // 高度\n    0, // 边界\n    format, // 格式\n    gl.UNSIGNED_BYTE, // 类型\n    new Uint8Array(data)\n  );\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter ? gl.LINEAR : gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter ? gl.LINEAR : gl.NEAREST);\n  ramp.texture = tex;\n  ramp.size = [width, 1];\n});`, `59537431000749970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个 256 数组，其中元素 0 到 127</span>\n<span class="token comment">// 从 64 到 191 和元素 128 到 255</span>\n<span class="token comment">// 都是 255</span>\n<span class="token keyword">const</span> smoothSolid <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">128</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  smoothSolid<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">64</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> ramps <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'dark-white\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> <span class="token string">\'dark-white-skewed\'</span><span class="token punctuation">,</span>\n    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span>\n    filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'normal\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'3-step\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'4-step\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> <span class="token string">\'4-step skewed\'</span><span class="token punctuation">,</span>\n    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span>\n    filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'black-white-black\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> <span class="token string">\'stripes\'</span><span class="token punctuation">,</span>\n    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span>\n    filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    data<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">255</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> <span class="token string">\'stripe\'</span><span class="token punctuation">,</span>\n    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span>\n    filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    data<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">80</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span><span class="token punctuation">,</span>\n      <span class="token number">255</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'smooth-solid\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> smoothSolid <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'rgb\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">RGB</span><span class="token punctuation">,</span> filter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> elementsForFormat <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\nelementsForFormat<span class="token punctuation">[</span>gl<span class="token punctuation">.</span><span class="token constant">LUMINANCE</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\nelementsForFormat<span class="token punctuation">[</span>gl<span class="token punctuation">.</span><span class="token constant">RGB</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>\n\nramps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ramp</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> format<span class="token punctuation">,</span> filter<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> ramp<span class="token punctuation">;</span>\n  <span class="token keyword">var</span> tex <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">pixelStorei</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">UNPACK_ALIGNMENT</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> width <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">/</span> elementsForFormat<span class="token punctuation">[</span>format<span class="token punctuation">]</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>\n    gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token comment">// 目标</span>\n    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// mip 级别</span>\n    format<span class="token punctuation">,</span> <span class="token comment">// 内部格式</span>\n    width<span class="token punctuation">,</span>\n    <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 高度</span>\n    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 边界</span>\n    format<span class="token punctuation">,</span> <span class="token comment">// 格式</span>\n    gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> <span class="token comment">// 类型</span>\n    <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> filter <span class="token operator">?</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span> <span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MAG_FILTER</span><span class="token punctuation">,</span> filter <span class="token operator">?</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span> <span class="token punctuation">:</span> gl<span class="token punctuation">.</span><span class="token constant">NEAREST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ramp<span class="token punctuation">.</span>texture <span class="token operator">=</span> tex<span class="token punctuation">;</span>\n  ramp<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">[</span>width<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>让我们制作着色器，这样我们就可以同时处理 NEAREST 和 LINEAR。就像我上面提到的，我通常不在着色器中使用布尔 if 语句，但如果区别很简单并且我可以在没有条件的情况下做到这一点，那么我会考虑使用一个着色器。为此，我们可以添加一个 <code class="language-text">u_linearAdjust</code>，我们将其设置为 0.0 或 1.0</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59537857743603230000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\n// 从顶点着色器传入\nvarying vec3 v_normal;\n\nuniform vec3 u_reverseLightDirection;\nuniform vec4 u_color;\nuniform sampler2D u_ramp;\nuniform vec2 u_rampSize;\n// uniform bool u_useRampTexture;\n// uniform float u_linearAdjust; // 如果是线性的，则为 1.0，如果是最近的，则为 0.0\n\nvoid main() {\n  // 因为 v_normal 是一个变量，所以它是插值的\n  // 所以它不会是单位向量，规范化它\n  // 将再次使其成为单位向量\n  vec3 normal = normalize(v_normal);\n\n  float cosAngle = dot(normal, u_reverseLightDirection);\n\n  // 从 -1 <-> 1 转换为 0 <-> 1\n  float u = cosAngle * 0.5 + 0.5;\n\n  // 制作纹理坐标\n  vec2 uv = vec2(u, 0.5);\n\n  // 缩放到渐变的大小\n  // vec2 texelRange = uv * (u_rampSize - 1.0);\n  vec2 texelRange = uv * (u_rampSize - u_linearAdjust);\n\n  // // 偏移半个纹理元并转换为纹理坐标\n  // vec2 rampUV = (texelRange + 0.5) / u_rampSize;\n  // 如果是线性的，则偏移半个纹理元并转换为纹理坐标\n  vec2 rampUV = (texelRange + 0.5 * u_linearAdjust) / u_rampSize;\n\n  vec4 rampColor = texture2D(u_ramp, rampUV);\n\n  // if (!u_useRampTexture) {\n  //   rampColor = vec4(u, u, u, 1);\n  // }\n\n  gl_FragColor = u_color;\n  gl_FragColor *= rampColor;\n}`, `59537857743603230000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{10-11,28-29,31-34,38-40}"\n              >\n                <span class="gatsby-code-button-language">glsl{10-11,28-29,31-34,38-40}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从顶点着色器传入</span>\n<span class="token keyword">varying</span> <span class="token keyword">vec3</span> v_normal<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">vec3</span> u_reverseLightDirection<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> u_color<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_ramp<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_rampSize<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// uniform bool u_useRampTexture;</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// uniform float u_linearAdjust; // 如果是线性的，则为 1.0，如果是最近的，则为 0.0</span></span>\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 因为 v_normal 是一个变量，所以它是插值的</span>\n  <span class="token comment">// 所以它不会是单位向量，规范化它</span>\n  <span class="token comment">// 将再次使其成为单位向量</span>\n  <span class="token keyword">vec3</span> normal <span class="token operator">=</span> <span class="token function">normalize</span><span class="token punctuation">(</span>v_normal<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">float</span> cosAngle <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> u_reverseLightDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 从 -1 &lt;-> 1 转换为 0 &lt;-> 1</span>\n  <span class="token keyword">float</span> u <span class="token operator">=</span> cosAngle <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 制作纹理坐标</span>\n  <span class="token keyword">vec2</span> uv <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 缩放到渐变的大小</span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// vec2 texelRange = uv * (u_rampSize - 1.0);</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec2</span> texelRange <span class="token operator">=</span> uv <span class="token operator">*</span> <span class="token punctuation">(</span>u_rampSize <span class="token operator">-</span> u_linearAdjust<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line">  <span class="token comment">// // 偏移半个纹理元并转换为纹理坐标</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// vec2 rampUV = (texelRange + 0.5) / u_rampSize;</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 如果是线性的，则偏移半个纹理元并转换为纹理坐标</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">vec2</span> rampUV <span class="token operator">=</span> <span class="token punctuation">(</span>texelRange <span class="token operator">+</span> <span class="token number">0.5</span> <span class="token operator">*</span> u_linearAdjust<span class="token punctuation">)</span> <span class="token operator">/</span> u_rampSize<span class="token punctuation">;</span></span>\n  <span class="token keyword">vec4</span> rampColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_ramp<span class="token punctuation">,</span> rampUV<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// if (!u_useRampTexture) {</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">//   rampColor = vec4(u, u, u, 1);</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// }</span></span>\n  gl_FragColor <span class="token operator">=</span> u_color<span class="token punctuation">;</span>\n  gl_FragColor <span class="token operator">*</span><span class="token operator">=</span> rampColor<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在初始化时查找位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63037415176259740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var colorLocation = gl.getUniformLocation(program, \'u_color\');\nvar rampLocation = gl.getUniformLocation(program, \'u_ramp\');\nvar rampSizeLocation = gl.getUniformLocation(program, \'u_rampSize\');\nvar linearAdjustLocation = gl.getUniformLocation(program, \'u_linearAdjust\');`, `63037415176259740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{4}"\n              >\n                <span class="gatsby-code-button-language">js{4}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> colorLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_color\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> rampLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_ramp\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> rampSizeLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_rampSize\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> linearAdjustLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_linearAdjust\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>并在渲染时选择其中一个纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14812411560959960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var data = {\n  ramp: 0\n};\n\n// ...\n\nconst { texture, color, size, filter } = ramps[data.ramp];\n\n// 设置要使用的颜色\n// gl.uniform4fv(colorLocation, [0.2, 1, 0.2, 1]);\ngl.uniform4fv(colorLocation, color);\n\n// 设置光照方向\ngl.uniform3fv(reverseLightDirectionLocation, m4.normalize([-1.75, 0.7, 1]));\n\n// 将纹理绑定到活动纹理单元 0\ngl.activeTexture(gl.TEXTURE0 + 0);\n// gl.bindTexture(gl.TEXTURE_2D, tex);\ngl.bindTexture(gl.TEXTURE_2D, texture);\n\n// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理\ngl.uniform1i(rampLocation, 0);\n// gl.uniform2fv(rampSizeLocation, [2, 1]);\ngl.uniform2fv(rampSizeLocation, size);\n\n// 如果是线性调整\ngl.uniform1f(linearAdjustLocation, filter ? 1 : 0);`, `14812411560959960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{7,10-11,18-19,23-24,26-27}"\n              >\n                <span class="gatsby-code-button-language">js{7,10-11,18-19,23-24,26-27}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>\n  ramp<span class="token punctuation">:</span> <span class="token number">0</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> texture<span class="token punctuation">,</span> color<span class="token punctuation">,</span> size<span class="token punctuation">,</span> filter <span class="token punctuation">}</span> <span class="token operator">=</span> ramps<span class="token punctuation">[</span>data<span class="token punctuation">.</span>ramp<span class="token punctuation">]</span><span class="token punctuation">;</span></span>\n<span class="token comment">// 设置要使用的颜色</span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// gl.uniform4fv(colorLocation, [0.2, 1, 0.2, 1]);</span></span><span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">uniform4fv</span><span class="token punctuation">(</span>colorLocation<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// 设置光照方向</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform3fv</span><span class="token punctuation">(</span>reverseLightDirectionLocation<span class="token punctuation">,</span> m4<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.75</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 将纹理绑定到活动纹理单元 0</span>\ngl<span class="token punctuation">.</span><span class="token function">activeTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE0</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// gl.bindTexture(gl.TEXTURE_2D, tex);</span></span><span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// 告诉着色器 u_ramp 应该使用纹理单元 0 上的纹理</span>\ngl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>rampLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// gl.uniform2fv(rampSizeLocation, [2, 1]);</span></span><span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>rampSizeLocation<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// 如果是线性调整</span></span><span class="gatsby-highlight-code-line">gl<span class="token punctuation">.</span><span class="token function">uniform1f</span><span class="token punctuation">(</span>linearAdjustLocation<span class="token punctuation">,</span> filter <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/zgif20?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>尝试不同的渐变纹理，你会看到很多奇怪的效果。这是制作通用调整着色器的一种方法。您可以通过设置 2 种颜色和像这样的阈值来制作进行 2 种颜色卡通着色的着色器。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18073902033534095000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`uniform vec4 color1;\nuniform vec4 color2;\nuniform float threshold;\n\n// ...\n\nfloat cosAngle = dot(normal, u_reverseLightDirection);\n\n// 从 -1 <-> 1 转换为 0 <-> 1\nfloat u = cosAngle * 0.5 + 0.5;\n\ngl_FragColor = mix(color1, color2, step(cosAngle, threshold));`, `18073902033534095000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">uniform</span> <span class="token keyword">vec4</span> color1<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">vec4</span> color2<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">float</span> threshold<span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token keyword">float</span> cosAngle <span class="token operator">=</span> <span class="token function">dot</span><span class="token punctuation">(</span>normal<span class="token punctuation">,</span> u_reverseLightDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 从 -1 &lt;-> 1 转换为 0 &lt;-> 1</span>\n<span class="token keyword">float</span> u <span class="token operator">=</span> cosAngle <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>\n\ngl_FragColor <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>color1<span class="token punctuation">,</span> color2<span class="token punctuation">,</span> <span class="token function">step</span><span class="token punctuation">(</span>cosAngle<span class="token punctuation">,</span> threshold<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>它会起作用。但是，如果您想要 3 步或 4 步版本，则需要编写另一个着色器。使用渐变纹理，您可以提供不同的纹理。此外，请注意上面，即使您想要一个 2 步色调着色器，您仍然可以通过在纹理中放置更多或更少的数据来调整步进发生的位置。例如纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53267282425367090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`[dark, light]`, `53267282425367090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">[dark, light]</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>为您提供 2 步纹理，其中它在面向或远离光线的中间分裂。但质地像</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9524408130201522000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`[dark, dark, dark, light, light]`, `9524408130201522000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">[dark, dark, dark, light, light]</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>无需更改着色器即可将拆分移动到背对光和朝向光之间的 60% 标记。</p>\n<p>这个使用渐变纹理进行卡通着色或奇怪效果的具体示例可能对您有用也可能不那么有用，但更重要的结论只是使用一些值在纹理中查找数据的基本概念。使用这样的纹理不仅仅是为了转换光照计算。您可以使用渐变纹理进行后期处理，以实现与 Photoshop 中的渐变贴图相同的效果</p>\n<p>您还可以将渐变纹理用于基于 GPU 的动画。您将关键值存储在纹理中，并使用时间作为在纹理上移动的值。这种技术有很多用途。</p>',
excerpt:"WebGL 三维纹理 在 WebGL…",frontmatter:{date:"2022-07-27 14:35:19",path:"/webgl-fundamental-textures/",tags:"前端, 可视化, WebGL, 读书笔记",title:"WebGL 理论基础——纹理",draft:null}},prePost:{html:'<h1 id="webgl-二维平移"><a href="#webgl-%E4%BA%8C%E7%BB%B4%E5%B9%B3%E7%A7%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 二维平移</h1>\n<p>平移就是普通意义的“移动”物体。这里有个例子基于前一个例子。首先我们来定义一些变量存储矩形的平移，宽，高和颜色。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21503463563119250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var translation = [0, 0];\nvar width = 100;\nvar height = 30;\nvar color = [Math.random(), Math.random(), Math.random(), 1];`, `21503463563119250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> translation <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> color <span class="token operator">=</span> <span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后定义一个方法重绘所有东西，我们可以在更新变换之后调用这个方法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1204399852053006300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 绘制场景\nfunction drawScene() {\n  webglUtils.resizeCanvasToDisplaySize(gl.canvas);\n\n  // 告诉 WebGL 如何从裁剪空间对应到像素\n  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n  // 清空画布\n  gl.clear(gl.COLOR_BUFFER_BIT);\n\n  // 使用我们的程序\n  gl.useProgram(program);\n\n  // 启用属性\n  gl.enableVertexAttribArray(positionLocation);\n\n  // 绑定位置缓冲\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n  // 设置矩形参数\n  setRectangle(gl, translation[0], translation[1], width, height);\n\n  // 告诉属性怎么从 positionBuffer 中读取数据 (ARRAY_BUFFER)\n  var size = 2; // 每次迭代运行提取两个单位数据\n  var type = gl.FLOAT; // 每个单位的数据类型是 32 位浮点型\n  var normalize = false; // 不需要归一化数据\n  var stride = 0; // 0 = 移动单位数量 * 每个单位占用内存（sizeof(type)）\n  var offset = 0; // 从缓冲起始位置开始读取\n  gl.vertexAttribPointer(positionLocation, size, type, normalize, stride, offset);\n\n  // 设置分辨率\n  gl.uniform2f(resolutionLocation, gl.canvas.width, gl.canvas.height);\n\n  // 设置颜色\n  gl.uniform4fv(colorLocation, color);\n\n  // 绘制矩形\n  var primitiveType = gl.TRIANGLES;\n  var offset = 0;\n  var count = 6;\n  gl.drawArrays(primitiveType, offset, count);\n}`, `1204399852053006300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  webglUtils<span class="token punctuation">.</span><span class="token function">resizeCanvasToDisplaySize</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉 WebGL 如何从裁剪空间对应到像素</span>\n  gl<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 清空画布</span>\n  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 使用我们的程序</span>\n  gl<span class="token punctuation">.</span><span class="token function">useProgram</span><span class="token punctuation">(</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 启用属性</span>\n  gl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>positionLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绑定位置缓冲</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> positionBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置矩形参数</span>\n  <span class="token function">setRectangle</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> translation<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> translation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉属性怎么从 positionBuffer 中读取数据 (ARRAY_BUFFER)</span>\n  <span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代运行提取两个单位数据</span>\n  <span class="token keyword">var</span> type <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">;</span> <span class="token comment">// 每个单位的数据类型是 32 位浮点型</span>\n  <span class="token keyword">var</span> normalize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 不需要归一化数据</span>\n  <span class="token keyword">var</span> stride <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 0 = 移动单位数量 * 每个单位占用内存（sizeof(type)）</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 从缓冲起始位置开始读取</span>\n  gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>positionLocation<span class="token punctuation">,</span> size<span class="token punctuation">,</span> type<span class="token punctuation">,</span> normalize<span class="token punctuation">,</span> stride<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置分辨率</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform2f</span><span class="token punctuation">(</span>resolutionLocation<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置颜色</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform4fv</span><span class="token punctuation">(</span>colorLocation<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制矩形</span>\n  <span class="token keyword">var</span> primitiveType <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>primitiveType<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在下方的例子中，我添加了一对滑块，当它们值改变时会更新 <code class="language-text">translation[0]</code> 和 <code class="language-text">translation[1]</code> 并且调用 drawScene 方法。拖动滑块来平移矩形。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/qj863d?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>到目前为止还不错！但是想象一下如果对一个更复杂的图形做类似操作怎么办。</p>\n<p>假设我们想绘制一个由六个三角形组成的 ‘F’ ，像这样</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-10-00-00-30-d54bc92537f9c0ab50f51d070b1a7e69-63541.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 207px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAADdklEQVRIx62Va08TQRSG+z/95BcTYxSvqIl3Wkot2+62dHvb3mkLWCxUi4pKIFEoF4uAwEph2V6IQAxijKVg29eZQYsGCipOc7Lb2Zlnzpw57xlN58ADuEf98IwEEUhHcFfSwtRrgf9NmPV5Uj+MvEvDAXhHQ+xbYDLKnuJLF0xxATcct2EOCdC4RnyIIoF2xPEQ/TgVOgvdNIcYnrC+MHrQicfMHqAPITLK9aUdrUs2aMm45hkTjJk2+NAF85gIjYesSidFyj0IbXfjXPQyzLKdTHtKIAl0VBOQPoZhVSRoU63QjXLQj5sg5rzwfe5EBxnThUdksSQck15opJFdIP3g3gjjfOwqWjM25kXLvICmtJF5wSkipGKUedhFJncQSBS9bBe0j/63vnX9DpQ2I2iIXsEloRF3/E3gkgLsryT4psLwT0fgSYcgTQTgGvXBPe4nFtizNLF+3x6wk6zAq07cGzAgr+ZAW2W7jHKpjJ2vO8S28a24U9fomMpO5ScwzoC6SRPM0yIKKwUGrJLf37YasIucoi7NwTQlIp/P73pYqaBarf6VaWhuRUhwQ1vd0E+ZYZXdUFWVAcvlMoP+arSPTmQ7qFYP8HDYz3LMuRqEYdYCdyGEtZXVI7d2EGwf8D4B2rN+PBvsh5xfwMzSu5rJhfeYVeeQGkuhWCwe7aFFccOqumFedKDx+S0IBReMi23gyZPPO3FzWIczsYs47W3Asrpci/E+oPu1nyWqbqwVgSKRT8YBnlgCL9BN5CeRZNe/IfKase7m6ko71OU/ADaNGBEsxRjQqkrsvXnChPszFgS3YkyKcaJ1u+IjQLU+kJ4ylZA2ZUS4Egcn23CCP4kLvdegneRgXZHAZ53gMiILw93BFiiKUh/oHSNyKkbQTARPKww/60DySRLqehZy7j3mluYxp8xjflneNUVGqVSqfyi+8XZWCCiQxsyW8WB9bf3f04YC7RsBGN5amIdtC1ItRvsSu1qpqaeuh7TqGmQLnB+C7HCoh1k1WzdGR2qZln3tFAfPpwjTs23xmEC6Zd20Cd7NKEvwYwPFFy5WkaOVHna3HBso9NnQ/M7M7gRadY4PTNqgn+VZ/P4LUBvQo23Vw263CLkKbAse5LK5fwdet95gdypNGWpi7nCtHgk0SzwMT0mlHnJCGBLBJQSsra4dqobD2ndBOnoUrBMAugAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 10 00 00 30" title="" data-src="/static/2022-05-10-00-00-30-d54bc92537f9c0ab50f51d070b1a7e69-63541.png" data-srcset="/static/2022-05-10-00-00-30-d54bc92537f9c0ab50f51d070b1a7e69-7ebab.png 200w,\n/static/2022-05-10-00-00-30-d54bc92537f9c0ab50f51d070b1a7e69-63541.png 207w" data-sizes="(max-width: 207px) 100vw, 207px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>接着当前的代码我们需要修改 setRectangle，像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38533096678487150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 在缓冲存储构成 \'F\' 的值\nfunction setGeometry(gl, x, y) {\n  var width = 100;\n  var height = 150;\n  var thickness = 30;\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array([\n      // 左竖\n      x,\n      y,\n      x + thickness,\n      y,\n      x,\n      y + height,\n      x,\n      y + height,\n      x + thickness,\n      y,\n      x + thickness,\n      y + height,\n\n      // 上横\n      x + thickness,\n      y,\n      x + width,\n      y,\n      x + thickness,\n      y + thickness,\n      x + thickness,\n      y + thickness,\n      x + width,\n      y,\n      x + width,\n      y + thickness,\n\n      // 中横\n      x + thickness,\n      y + thickness * 2,\n      x + (width * 2) / 3,\n      y + thickness * 2,\n      x + thickness,\n      y + thickness * 3,\n      x + thickness,\n      y + thickness * 3,\n      x + (width * 2) / 3,\n      y + thickness * 2,\n      x + (width * 2) / 3,\n      y + thickness * 3\n    ]),\n    gl.STATIC_DRAW\n  );\n}`, `38533096678487150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 在缓冲存储构成 \'F\' 的值</span>\n<span class="token keyword">function</span> <span class="token function">setGeometry</span><span class="token punctuation">(</span><span class="token parameter">gl<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> thickness <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>\n    gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n      <span class="token comment">// 左竖</span>\n      x<span class="token punctuation">,</span>\n      y<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y<span class="token punctuation">,</span>\n      x<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> height<span class="token punctuation">,</span>\n      x<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> height<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> height<span class="token punctuation">,</span>\n\n      <span class="token comment">// 上横</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> width<span class="token punctuation">,</span>\n      y<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> width<span class="token punctuation">,</span>\n      y<span class="token punctuation">,</span>\n      x <span class="token operator">+</span> width<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n\n      <span class="token comment">// 中横</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>\n      x <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span>\n      x <span class="token operator">+</span> thickness<span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span>\n      x <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>\n      x <span class="token operator">+</span> <span class="token punctuation">(</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span>\n      y <span class="token operator">+</span> thickness <span class="token operator">*</span> <span class="token number">3</span>\n    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>你可能发现这样做可能并不好，如果我们想绘制一个含有成百上千个线条的几何图形，将会有很复杂的代码。最重要的是，每次绘制 JavaScript 都要更新所有点。</p>\n<p>这里有个简单的方式，上传几何体然后在着色器中进行平移，以下是新的着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90596776862863340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;vertex-shader-2d&quot; type=&quot;x-shader/x-vertex&quot;>\n   attribute vec2 a_position;\n\n   uniform vec2 u_resolution;\n   uniform vec2 u_translation;\n\n   void main() {\n      // 加上平移量\n      vec2 position = a_position + u_translation;\n\n      // 从像素坐标转换到 0.0 到 1.0\n      vec2 zeroToOne = position / u_resolution;\n      // ...\n   }\n</script>`, `90596776862863340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">"vertex-shader-2d"</span> type<span class="token operator">=</span><span class="token string">"x-shader/x-vertex"</span><span class="token operator">></span>\n   attribute vec2 a_position<span class="token punctuation">;</span>\n\n   uniform vec2 u_resolution<span class="token punctuation">;</span>\n   uniform vec2 u_translation<span class="token punctuation">;</span>\n\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// 加上平移量</span>\n      vec2 position <span class="token operator">=</span> a_position <span class="token operator">+</span> u_translation<span class="token punctuation">;</span>\n\n      <span class="token comment">// 从像素坐标转换到 0.0 到 1.0</span>\n      vec2 zeroToOne <span class="token operator">=</span> position <span class="token operator">/</span> u_resolution<span class="token punctuation">;</span>\n      <span class="token comment">// ...</span>\n   <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>重构一下代码，首先我们只需要设置一次几何体。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73887475991039560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 在缓冲存储构成 \'F\' 的值\nfunction setGeometry(gl) {\n  gl.bufferData(\n    gl.ARRAY_BUFFER,\n    new Float32Array([\n      // 左竖\n      0,\n      0,\n      30,\n      0,\n      0,\n      150,\n      0,\n      150,\n      30,\n      0,\n      30,\n      150,\n\n      // 上横\n      30,\n      0,\n      100,\n      0,\n      30,\n      30,\n      30,\n      30,\n      100,\n      0,\n      100,\n      30,\n\n      // 中横\n      30,\n      60,\n      67,\n      60,\n      30,\n      90,\n      30,\n      90,\n      67,\n      60,\n      67,\n      90\n    ]),\n    gl.STATIC_DRAW\n  );\n}`, `73887475991039560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 在缓冲存储构成 \'F\' 的值</span>\n<span class="token keyword">function</span> <span class="token function">setGeometry</span><span class="token punctuation">(</span><span class="token parameter">gl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>\n    gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n      <span class="token comment">// 左竖</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">150</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">150</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">150</span><span class="token punctuation">,</span>\n\n      <span class="token comment">// 上横</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">100</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">100</span><span class="token punctuation">,</span>\n      <span class="token number">0</span><span class="token punctuation">,</span>\n      <span class="token number">100</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n\n      <span class="token comment">// 中横</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">60</span><span class="token punctuation">,</span>\n      <span class="token number">67</span><span class="token punctuation">,</span>\n      <span class="token number">60</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">90</span><span class="token punctuation">,</span>\n      <span class="token number">30</span><span class="token punctuation">,</span>\n      <span class="token number">90</span><span class="token punctuation">,</span>\n      <span class="token number">67</span><span class="token punctuation">,</span>\n      <span class="token number">60</span><span class="token punctuation">,</span>\n      <span class="token number">67</span><span class="token punctuation">,</span>\n      <span class="token number">90</span>\n    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后我们只需要在绘制前更新 <code class="language-text">u_translation</code> 为期望的平移量。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37422078346379670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ...\n\nvar translationLocation = gl.getUniformLocation(program, \'u_translation\');\n// ...\n\n// 创建一个存放位置信息的缓冲\nvar positionBuffer = gl.createBuffer();\n// 绑定到 ARRAY_BUFFER (简单的理解为 ARRAY_BUFFER = positionBuffer)\ngl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n// 将几何数据存到缓冲\nsetGeometry(gl);\n\n// ...\n\n// 绘制场景\nfunction drawScene() {\n  // ...\n\n  // 设置平移\n  gl.uniform2fv(translationLocation, translation);\n\n  // 绘制矩形\n  var primitiveType = gl.TRIANGLES;\n  var offset = 0;\n  var count = 18;\n  gl.drawArrays(primitiveType, offset, count);\n}`, `37422078346379670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ...</span>\n\n<span class="token keyword">var</span> translationLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_translation\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 创建一个存放位置信息的缓冲</span>\n<span class="token keyword">var</span> positionBuffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 绑定到 ARRAY_BUFFER (简单的理解为 ARRAY_BUFFER = positionBuffer)</span>\ngl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> positionBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 将几何数据存到缓冲</span>\n<span class="token function">setGeometry</span><span class="token punctuation">(</span>gl<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 设置平移</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>translationLocation<span class="token punctuation">,</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制矩形</span>\n  <span class="token keyword">var</span> primitiveType <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>primitiveType<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>注意到 setGeometry 只调用了一次，它不在 drawScene 内部了。</p>\n<p>这里是那个例子，同样的，拖动滑块来更新平移量。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/p59ez6?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>现在当我们绘制时，WebGL 几乎做了所有事情，我们做的仅仅是设置平移然后让它绘制，即使我们的几何体有成千上万个点，主要的代码还是保持不变。</p>\n<p>你可以对比上方例子中使用 JavaScript 更新所有点的情况。</p>\n<h1 id="webgl-二维旋转"><a href="#webgl-%E4%BA%8C%E7%BB%B4%E6%97%8B%E8%BD%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 二维旋转</h1>\n<p>首先我想向你介绍一个叫做 <code class="language-text">单位圆</code> 的东西，一个圆有一个半径，圆的半径是圆心到圆边缘的距离，单位圆是半径为 1.0 的圆。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-10-10-43-30-ce49b6f0198d41f9a6eb0a2eab96ccd8-8130d.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 312px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 99.35897435897438%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACYUlEQVQ4y31Ui46bMBDM/6v/0H+o+hMnVa1O1VWNTkpzytMYMIYLD9t4uruBPEksGSzWHmbXMzvb7XbIsgxJkiBN04dTa45nd9/5rNZa1tvtFjP+wKPvezwb4Uk4xihvay1mzIzBmqaBcw4+eDrc4NB4JLnDPnVI84CtqmWtMgdbOQTa5z3t9x5t28qbyc2YKg8G41HaGl+/LDD/W4JJxT4KA44zER8iTBWhi0g/PjJjMB7GmHtApQO+f/uD3FandDiDEMKYoDw7F6FMlFL0Q+wKsKcUsjKi64ADKmyQj2evAPkHY82cZ6Y4xa4Am7bHclNivfrAr9dXvJkFCjQCegt4fkeUB6CoJlLWxqFumX+PTaHw3m2wREqQTkD5si4ZjoBcxn02AcgfhwxhQoVFVFj0CqugBayf0M1AFmnhKX2WTXEGTAgwDIeWeo2X+U+8fczx8vsH/umVpD01mWVuPeomwhaGdagFZKsa1HUt691+B51p1B3r8YDPtkZRFCIPruU4vae6xkA67WBsg8LkzPDoFMUpx9PF3jvFh4dOyWwgGd2mTK5gbYlMLgp/q8N4E4uPLqU6OORlnJDGc9l8UpVM6aeFndpI0ol3An4kbLZhYh4Im43OGxOyU9PFwWJnQO8vrRcHsChyubLe2L5Gg4uuLAWry5YV5TaP9aXyUJpsOTccGRmyEmbcHJnZ2IK4LfW9J0t5ufkk98hJuGneipv4Arhmsk9aGN0wNQAGlfY1Mjx3kxs30GypYdiqIxVMd9mxOQvD9XotyPv9Xlr57Ty2+oTWivalk3GllKxXqxX+A4m6FQCvVArmAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 10 10 43 30" title="" data-src="/static/2022-05-10-10-43-30-ce49b6f0198d41f9a6eb0a2eab96ccd8-8130d.png" data-srcset="/static/2022-05-10-10-43-30-ce49b6f0198d41f9a6eb0a2eab96ccd8-08db0.png 200w,\n/static/2022-05-10-10-43-30-ce49b6f0198d41f9a6eb0a2eab96ccd8-8130d.png 312w" data-sizes="(max-width: 312px) 100vw, 312px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>当你拖拽蓝色圆点的时候 X 和 Y 会改变，它们是那一点在圆上的坐标，在最上方时 Y 是 1 并且 X 是 0，在最右边的时候 X 是 1 并且 Y 是 0。</p>\n<p>如果你还记得三年级的数学知识，数字和 1 相乘结果不变。例如 <code class="language-text">123 * 1 = 123</code>，那么，单位圆半径为 1.0 的圆也是 1 的一种形式，它是旋转的 1。所以你可以把一些东西和单位圆相乘，除了发生一些魔法和旋转之外，某种程度上和乘以 1 相似。</p>\n<p>我们将从单位元上任取一点，并将该点的 X 和 Y 与之前例子中的几何体相乘，以下是新的着色器。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98593847455576540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;vertex-shader-2d&quot; type=&quot;x-shader/x-vertex&quot;>\n   attribute vec2 a_position;\n\n   uniform vec2 u_resolution;\n   uniform vec2 u_translation;\n   uniform vec2 u_rotation;\n\n   void main() {\n      // 旋转位置\n      vec2 rotatedPosition = vec2(\n         a_position.x * u_rotation.y + a_position.y * u_rotation.x,\n         a_position.y * u_rotation.y - a_position.x * u_rotation.x\n      );\n\n      // 加上平移\n      vec2 position = rotatedPosition + u_translation;\n   }\n</script>`, `98593847455576540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">"vertex-shader-2d"</span> type<span class="token operator">=</span><span class="token string">"x-shader/x-vertex"</span><span class="token operator">></span>\n   attribute vec2 a_position<span class="token punctuation">;</span>\n\n   uniform vec2 u_resolution<span class="token punctuation">;</span>\n   uniform vec2 u_translation<span class="token punctuation">;</span>\n   uniform vec2 u_rotation<span class="token punctuation">;</span>\n\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// 旋转位置</span>\n      vec2 rotatedPosition <span class="token operator">=</span> <span class="token function">vec2</span><span class="token punctuation">(</span>\n         a_position<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">+</span> a_position<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n         a_position<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">-</span> a_position<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token comment">// 加上平移</span>\n      vec2 position <span class="token operator">=</span> rotatedPosition <span class="token operator">+</span> u_translation<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>更新 JavaScript，传递两个值进去。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2177269451175734000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ...\n\nvar rotationLocation = gl.getUniformLocation(program, \'u_rotation\');\n\n// ...\n\nvar rotation = [0, 1];\n\n// ...\n\n// 绘制场景\nfunction drawScene() {\n  // ...\n\n  // 设置平移\n  gl.uniform2fv(translationLocation, translation);\n\n  // 设置旋转\n  gl.uniform2fv(rotationLocation, rotation);\n\n  // 绘制几何体\n  var primitiveType = gl.TRIANGLES;\n  var offset = 0;\n  var count = 18; // 6 个三角形组成 \'F\', 每个三角形 3 个点\n  gl.drawArrays(primitiveType, offset, count);\n}`, `2177269451175734000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ...</span>\n\n<span class="token keyword">var</span> rotationLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_rotation\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token keyword">var</span> rotation <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 设置平移</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>translationLocation<span class="token punctuation">,</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置旋转</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>rotationLocation<span class="token punctuation">,</span> rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制几何体</span>\n  <span class="token keyword">var</span> primitiveType <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span> <span class="token comment">// 6 个三角形组成 \'F\', 每个三角形 3 个点</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>primitiveType<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是结果，拖动圆形手柄来旋转或拖动滑块来平移。</p>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/6g8g2i?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [webgl-2d-geometry-rotation](embedded-codesandbox://webgl-fundamental-2d/webgl-2d-geometry-rotation?view=preview) -->\n<p>为什么会这样？来看看数学公式。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77751228407811880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rotatedX = a_position.x * u_rotation.y + a_position.y * u_rotation.x;\nrotatedY = a_position.y * u_rotation.y - a_position.x * u_rotation.x;`, `77751228407811880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">rotatedX <span class="token operator">=</span> a_position<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">+</span> a_position<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\nrotatedY <span class="token operator">=</span> a_position<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">-</span> a_position<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>假如你想旋转一个矩形，在开始旋转之前矩形右上角坐标是 3.0, 9.0，让我们在单位圆上以十二点方向为起点顺时针旋转 30 度后取一个点。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-10-11-21-43-19e88ce70feb059a97766669f83c462d-29b1b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 201px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAACLklEQVQ4y4VU227bMAz1d/epX9WH9a0Dmi3pEKAbsCEo0DrxJXbiS2xZtinJ2pGUxE6yYoSQ0PI5JEUe2dNaD8MgpdQ3hn2lpHWO67zv8J7z+r4/oQExi2hoGsUY9f1g35BS4sx0eM95bdsKa1KKshRBIMJQxrF6e6vDUKzX3dNTslikXdee8XA8Fww0OKhlvzcLcW2RSF7jr2nE/f3y7u61qhoLUw5vyAoFCQIzSTTn45kBIhLOn//+NZv/KXIXd0LGAxGlqW5b14+xMaiwyIt9nm0KP96uGesAu8iM3FlGeX7BdBUhqO/78+V8+XP57fsc5zscdJYpOCN5syEhrkelzKRUr3v0IaCgYpWLHoaq709kzge09yqt7VOzS3brfL3arT6yD94d+xEEivMjWTWNjCIFLg7jzGkgiqLnH88vry+zxezx62PNaxtd5blIUwLeQ6cZE77fcl5jzGJiOHCURckhKZri4ctDWZY2Mo5Nq1UJ2Ziy0WSQpeyu5akHxpgUciJY87vfD2nKTGY8EJmG3Wrbzl+4KMbMr9nfbBQE6bRtYGFITfMpeWoQCWQLFY8i4Zy22/+QXVqIpK6VuyRHeUpJdY3pX+DGsk/3EUKCSKwiJ2Q0Fk5V6d1On5MB5MqDYRMXpiwvgnruSkHD2LIzV5g5FmOqqmRZohdDHEsIA9VaonJ4EL3J/cRgBV7BweTjWESReH+vscy8hPkYAOCY/7jPt58hIg7wZ438Cw3pi2j7g+rWAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 10 11 21 43" title="" data-src="/static/2022-05-10-11-21-43-19e88ce70feb059a97766669f83c462d-29b1b.png" data-srcset="/static/2022-05-10-11-21-43-19e88ce70feb059a97766669f83c462d-291bf.png 200w,\n/static/2022-05-10-11-21-43-19e88ce70feb059a97766669f83c462d-29b1b.png 201w" data-sizes="(max-width: 201px) 100vw, 201px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>圆上该点的位置是 0.50 和 0.87</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96807571977551170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`3.0 * 0.87 + 9.0 * 0.50 = 7.1\n9.0 * 0.87 - 3.0 * 0.50 = 6.3`, `96807571977551170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">3.0 * 0.87 + 9.0 * 0.50 = 7.1\n9.0 * 0.87 - 3.0 * 0.50 = 6.3</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>这个结果正好是我们需要的结果</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-10-11-22-51-ac87387e057abcbeeadeeb22d810a44b-bb96f.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 32.03125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQY0zVRy07DMBDM/38EEocegAsHhEAcyqG3cqDi2SdNqtiNE8cpiZ3EeQxrV6y0tnc0uzu7Dvq+h9YaaZqirhs4a5oGbduiaQ2ESFBT7NxaS1wDVRQwxniew5wPw4BxHBHoymB2t8VmGRExh20t8jxHlklsvmL87Pa+CeeccIVMpmCcQUqJJEmglPJ8J8xZUJUG06s9eKRQnKig7VDqAssFx/N16As7skgF4QriqJDwDNpoUi9QkFrHcbebNDgVJZ4mK+zXnJJovLqmBIGHyzW+X2NSLT12CBkWsxj3Fyu8vWypYAnGGHLllB69Wl+wqiqEW4YslX6PrW1wZBk+5jF1ziCdwsHifR5hdhvhsBMwtUb5W2F6s6HpQjxOPpFQjh/ZLXJEj2Ec/GKduTedPv7Huq4j3hn3OcOIQjRQSYuUVajN+UP/AGIRxQvPS3zjAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 10 11 22 51" title="" data-src="/static/2022-05-10-11-22-51-ac87387e057abcbeeadeeb22d810a44b-bb96f.png" data-srcset="/static/2022-05-10-11-22-51-ac87387e057abcbeeadeeb22d810a44b-7728b.png 200w,\n/static/2022-05-10-11-22-51-ac87387e057abcbeeadeeb22d810a44b-23f96.png 400w,\n/static/2022-05-10-11-22-51-ac87387e057abcbeeadeeb22d810a44b-bb96f.png 512w" data-sizes="(max-width: 512px) 100vw, 512px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>顺时针 60 度也一样</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-10-11-23-18-c3cff672243d7b7caed4fb760fd98191-29b1b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 201px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAACGElEQVQ4y4VTy27bMBDUl/fQa/s5RQ20h1waBEiaNDV6SIu4RiLJsmmL0YOkJD47FG1JqZ1ksZDp3RlyuTuMnHPWWq21OzLEjTkdD/gorLquO6AtfuFSWs4NYzJk4EgFG/BRWDVNo3rTWhWFShKVpjrLzGJRp6mMY0WpTwULeBCjcCBCWKCW3c479rXWZ4SojTFSOkrdZuPC5bQ2Ae/JSCslkUBaiPFuAEmp+t39X+xIiMPB8P2d+xxAEommcQP0sKk6NMl/BZezWX55SVD4ngxYnksUNmWeJLdd++799w8ff7ctH8lxLA+w02SUtlgubn/++Hr27fPsTAi2Jwth0d7/jg2NRGPLp5JSGm/j+Z/5X7rciPTu7pHzNpAN53q1MgCjQ1NDV2pe3/y6Ob8+v7i+uJpfPZp4Tm6TpMpz4E2E0hhTDw8NpoIxq6lJla5TUpGqqyijRVOsn9azL58Iqe/vS2M6XzaaDLLW7bEMOeNa6UnEf3c7SwjubKO+Gb5hxxoeGmY9y7vxbBvHBoIM2vYwaJDz17o9GKQC2UKqo0iEkOv1G+RQM7RUe8lO5Km1rGuX589wY9l2H4GQyjIockKGBrCoKrfduuEwgEJ5MATxYIri2aZReFIQA0L9zA1mDmfMVJUuCvTCZplOEoNqe6IJeBDH94xDUAxSWGDyWaZWK7Vc1nDGMH+JFAAvvufjOUspAH6pkf8AaiSMkwsZIRcAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 10 11 23 18" title="" data-src="/static/2022-05-10-11-23-18-c3cff672243d7b7caed4fb760fd98191-29b1b.png" data-srcset="/static/2022-05-10-11-23-18-c3cff672243d7b7caed4fb760fd98191-291bf.png 200w,\n/static/2022-05-10-11-23-18-c3cff672243d7b7caed4fb760fd98191-29b1b.png 201w" data-sizes="(max-width: 201px) 100vw, 201px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>圆上该点的位置是 0.87 和 0.50。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1575138389761932000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`3.0 * 0.50 + 9.0 * 0.87 = 9.3\n9.0 * 0.50 - 3.0 * 0.87 = 1.9`, `1575138389761932000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">3.0 * 0.50 + 9.0 * 0.87 = 9.3\n9.0 * 0.50 - 3.0 * 0.87 = 1.9</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>你会发现在我们顺时针旋转到右边的过程中，X 变大 Y 变小。如果我们继续旋转超过 90 度后，X 变小 Y 变大，这种形式形成了旋转。</p>\n<p>单位圆上的点还有一个名字，叫做正弦和余弦。所以对于任意给定角，我们只需要求出正弦和余弦，像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53733283350937590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function printSineAndCosineForAnAngle(angleInDegrees) {\n  var angleInRadians = (angleInDegrees * Math.PI) / 180;\n  var s = Math.sin(angleInRadians);\n  var c = Math.cos(angleInRadians);\n  console.log(\'s = \' + s + \' c = \' + c);\n}`, `53733283350937590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">printSineAndCosineForAnAngle</span><span class="token punctuation">(</span><span class="token parameter">angleInDegrees</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> angleInRadians <span class="token operator">=</span> <span class="token punctuation">(</span>angleInDegrees <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> s <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'s = \'</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">\' c = \'</span> <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果把代码复制到 JavaScript 控制台，然后输入 <code class="language-text">printSineAndCosignForAngle(30)</code>，会打印出 <code class="language-text">s = 0.49 c = 0.87</code>(注意：我对结果四舍五入了)。</p>\n<p>如果你把这些组合起来，就可以对几何体旋转任意角度，使用时只需要设置旋转的角度。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8544033148466434000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ...\nvar angleInRadians = (angleInDegrees * Math.PI) / 180;\nrotation[0] = Math.sin(angleInRadians);\nrotation[1] = Math.cos(angleInRadians);`, `8544033148466434000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ...</span>\n<span class="token keyword">var</span> angleInRadians <span class="token operator">=</span> <span class="token punctuation">(</span>angleInDegrees <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>\nrotation<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\nrotation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里有一个设置角度的版本，拖动滑块来旋转或平移。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/4i0mhx?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>这并不是旋转常用的方式，请继续阅读</p>\n<h1 id="webgl-二维缩放"><a href="#webgl-%E4%BA%8C%E7%BB%B4%E7%BC%A9%E6%94%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 二维缩放</h1>\n<p>缩放和平移一样简单，让我们将位置乘以期望的缩放值，这是前例中的变化部分。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37116289902763320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;vertex-shader-2d&quot; type=&quot;x-shader/x-vertex&quot;>\n   attribute vec2 a_position;\n\n   uniform vec2 u_resolution;\n   uniform vec2 u_translation;\n   uniform vec2 u_rotation;\n   uniform vec2 u_scale;\n\n   void main() {\n      // 缩放\n      vec2 scaledPosition = a_position * u_scale;\n\n      // 旋转\n      vec2 rotatedPosition = vec2(\n         scaledPosition.x * u_rotation.y + scaledPosition.y * u_rotation.x,\n         scaledPosition.y * u_rotation.y - scaledPosition.x * u_rotation.x);\n\n      // 平移\n      vec2 position = rotatedPosition + u_translation;\n   }\n</script>`, `37116289902763320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{7,10-11,15-16}"\n              >\n                <span class="gatsby-code-button-language">js{7,10-11,15-16}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">"vertex-shader-2d"</span> type<span class="token operator">=</span><span class="token string">"x-shader/x-vertex"</span><span class="token operator">></span>\n   attribute vec2 a_position<span class="token punctuation">;</span>\n\n   uniform vec2 u_resolution<span class="token punctuation">;</span>\n   uniform vec2 u_translation<span class="token punctuation">;</span>\n   uniform vec2 u_rotation<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   uniform vec2 u_scale<span class="token punctuation">;</span></span>\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">      <span class="token comment">// 缩放</span></span><span class="gatsby-highlight-code-line">      vec2 scaledPosition <span class="token operator">=</span> a_position <span class="token operator">*</span> u_scale<span class="token punctuation">;</span></span>\n      <span class="token comment">// 旋转</span>\n      vec2 rotatedPosition <span class="token operator">=</span> <span class="token function">vec2</span><span class="token punctuation">(</span>\n<span class="gatsby-highlight-code-line">         scaledPosition<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">+</span> scaledPosition<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">         scaledPosition<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">-</span> scaledPosition<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n      <span class="token comment">// 平移</span>\n      vec2 position <span class="token operator">=</span> rotatedPosition <span class="token operator">+</span> u_translation<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后需要在 JavaScript 中绘制的地方设置缩放量。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42562438136864580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ...\n\nvar scaleLocation = gl.getUniformLocation(program, \'u_scale\');\n\n// ...\n\nvar scale = [1, 1];\n\n// ...\n\n// 绘制场景\nfunction drawScene() {\n  // ...\n\n  // 设置平移\n  gl.uniform2fv(translationLocation, translation);\n\n  // 设置旋转\n  gl.uniform2fv(rotationLocation, rotation);\n\n  // 设置缩放\n  gl.uniform2fv(scaleLocation, scale);\n\n  // 绘制几何体\n  var primitiveType = gl.TRIANGLES;\n  var offset = 0;\n  var count = 18; // 6 个三角形组成 \'F\', 每个三角形 3 个点\n  gl.drawArrays(primitiveType, offset, count);\n}`, `42562438136864580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3,7,21-22}"\n              >\n                <span class="gatsby-code-button-language">js{3,7,21-22}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> scaleLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_scale\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> scale <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 设置平移</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>translationLocation<span class="token punctuation">,</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置旋转</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>rotationLocation<span class="token punctuation">,</span> rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 设置缩放</span></span><span class="gatsby-highlight-code-line">  gl<span class="token punctuation">.</span><span class="token function">uniform2fv</span><span class="token punctuation">(</span>scaleLocation<span class="token punctuation">,</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// 绘制几何体</span>\n  <span class="token keyword">var</span> primitiveType <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span> <span class="token comment">// 6 个三角形组成 \'F\', 每个三角形 3 个点</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>primitiveType<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在我们有了缩放，拖动滑块试试。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/byhsth?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>值得一提的是，缩放值为负数的时候会翻转几何体。</p>\n<p>接下来我们将复习神奇的矩阵，这三种操作将包含在一个矩阵中，并表现为一种常用形式。</p>\n<h1 id="webgl-二维矩阵"><a href="#webgl-%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 二维矩阵</h1>\n<p>之前的三篇文章讲了如何对二维物体进行平移，旋转和缩放。每种变换都改变了着色器并且这些变换还受先后顺序影响。在前例中我们先缩放，再旋转，最后平移，如果执行顺序不同结果也不同。</p>\n<p>例如这是缩放 (2, 1)，旋转 30 度，然后平移 (100, 0) 的结果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-14-23-35-02-90dbac2833180f8ec053f36b6fe42598-3e989.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 605px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.65289256198348%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdklEQVQoz5WSSYvCQBCF87P9C96ioB4i3hIF9RQ8iwoeZRwXFJconT06GLMYk3T3VBYUwZlh6tCE7nyvXr1uhqaFMQ7DkP6zmAd8v9/f/kEI+Rv2PO92u4FEEAS+70dRlJCU/MI/YV3XJUlSVVXTNFht24b9MArtq51qkEzoDQzaalpRWtA/ipPOM3nGn/i5PQ+84GHkPawoiuM4rutmPh3baSktgQqFfoFbcyhCNKaZRKbyhMHtfr8/HA6GYSRnmI7RuOE1yuvyaDkaasMKqoiWePbP+RSEPGGEkGmaj3jML5OTuKpaLW1Kx8sRdk7Oqat0QaKv98HdS2eALcvKp8G0M+2wiG06Tf6Dr6FaT+vZXpKcdJUEQ6jL9cF2wMRxDAnBCwEYDGdPZbFZFD+LMK24FWlA5avcNtrsmt1pOziNo3jiTsSlmMMQL9wzfAMMK8Q2dae8wsuGnPkimKzOq4t7yTPHiTvmx+dJqOd6mOAcfr2kLLBvI4mjP19UR7YAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 14 23 35 02" title="" data-src="/static/2022-05-14-23-35-02-90dbac2833180f8ec053f36b6fe42598-3e989.png" data-srcset="/static/2022-05-14-23-35-02-90dbac2833180f8ec053f36b6fe42598-4bd12.png 200w,\n/static/2022-05-14-23-35-02-90dbac2833180f8ec053f36b6fe42598-7acd9.png 400w,\n/static/2022-05-14-23-35-02-90dbac2833180f8ec053f36b6fe42598-3e989.png 605w" data-sizes="(max-width: 605px) 100vw, 605px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>这是平移 (100, 0) ，旋转 30 度，然后缩放 (2, 1) 的结果。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-14-23-44-24-303cdf4cef353effeeda90c71492cdb9-7376a.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.19875776397515%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHklEQVQoz51RS4uDMBD2/0NvuZRSKLT05KXQWw899FQ8CEUKelm1a91NjI0P1qgx2bEpRcTL7kCGIcn3mBlDKdW2rZRS/T0MOE3T/B+cZVkURYQQjDHUk/+kktPgJEkADOarqgIXY9jAFFAMWXowpTQIAlDmnI/kOtlBvuf3sAx5zd9AYISnFzgMQ8bYUBYUhBSqUx71Vmw1c2ZLb3nIDs7DYT8M7l/K+Bkjq/LZpk1shNHW3+Y0xwU+fZ/M2FzHa/Nmnr2zIYTQYJCt61pn8CRbefw8oi+0cBebj82e7J3YATNAzWrmFm5apgZo6FXp6JtUqiiLnb9DBFmpJbggnFiZdaXX0ch72yD+HqkuLv5lfpvbD1t1E0uSui2lfgExkTtYEfN9vwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 14 23 44 24" title="" data-src="/static/2022-05-14-23-44-24-303cdf4cef353effeeda90c71492cdb9-fee1c.png" data-srcset="/static/2022-05-14-23-44-24-303cdf4cef353effeeda90c71492cdb9-a67b7.png 200w,\n/static/2022-05-14-23-44-24-303cdf4cef353effeeda90c71492cdb9-0b187.png 400w,\n/static/2022-05-14-23-44-24-303cdf4cef353effeeda90c71492cdb9-fee1c.png 800w,\n/static/2022-05-14-23-44-24-303cdf4cef353effeeda90c71492cdb9-7376a.png 805w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>结果截然不同，更糟的是，针对第二种情况中的转换顺序，需要写一个新的着色器。</p>\n<p>有些比我聪明的人可能已经想到了矩阵，对于二维我们使用 3x3 的矩阵，3x3 的矩阵就像是有 9 个格子的格网。</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-05-52-35db6e7565a19efd3d9ade8e153af197-a27d0.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 150px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 122.66666666666669%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEEklEQVQ4y3VU6VP6SBDN//9xPUsFSm5E5IgQTkFEIJwSwg0JAQSEcAZZOd0XqZ/lWrv9YWhmXk+n+/Ubot1uO53Ox8fHYDAYCoW8Xi/8cDgcCASCX4ZNt9sdi8X8fj/8b1gqlSISiQR+3t/fx+PxZDIRRfHi4gJn2IEvjkbL5RKRx8fHnU5nNpuNZdx4MBjYbDbi5eWF47jPz8/9fn9YDQZDPB6Hv/syOJVKRaVS4bpv2Ha79fl8RC6XKxTYoShiS+C5TrdvNJqeI+HX7mt/OPpYLgShlUpn1Wp1tVLihRZgTZ5rd3qogmBZlo7HTDbbROyZbkx3Fse1WvccDrpd5FMslaKjFrNFpdbe3JiL+ZzTRTVq9Tuz8dZqJ10eOTPD5EqlYqvTrtcqTaFtMJoi4VA6mWSLZaHJN5vNGJ1Uq69zqWTwIVCu8Y1alWu2fD4/kc1mf9Ws0+mi0ejPmkul0tXV1XQy2cmQz0PNoIBgGAbQ19dXZBAEARfp9XrwhN5yPMfzfLfbjUQiGo2mXq/3et0DrNFoeDweAh5ouLy8BENYj46OXC6X1Wo9OTk5bB7s6enp/Pz84B9gmAUi9WWSJA2Hw9FoBAIVCgVomM/ngy/DEXhGZKvVmk6noghmxH6/73A4ZJ7xbb94BvoXz0ql8hfPGCS5YTzXkKTFbreX5rNu7w3BdDwqCM3RZL7drJCHYQsatbpcyPNNmefhW18cjWWeX3JMPh3X3Jh7b0M/Rd5aLH+dKVLRUDAU5IROJknbbA6twWg23+iur5yUt9XkSNJusZL2exd4ZuinB6PlLsMUquVSOvOi1RsCHk+ByVJef61aY/NsOBLVajWFfJZh8tVqjcll82zJ4/UdPptDHZvt7pvn50hkuVis15v9Xt4sl8vgebFY/KxZpgrBmUzm/X2JVo/HI/QcYxx6fFyv19gZDkVpsYDyQEG73ZlMpjJsNHobvFEURYCAs7MzpRKnCrT09PQUo2O328GN4odhTkDvwQcMIdghkBbql+eJ4zA9GCOc4VbkqTdkw/A9PDwgslgsQmG8bM1qtSrzLNf8b54xnr9m+39rhqoy6QS08/fHCsfT2cxoMoVDflxa4wVgZ5LEFgoqpQqzNZfk+DkkMpnKjwGEkYiFvH5/fzD0eii7nVRp9H7KcXp6EozQXL3ivCc1OjwQRsetkXT5oBM3tH5POe4pDEmuVMgPxTHX4OLxyHOU1hmMPo87m06nUxlQmqBpp8ujNxjSdNRqd4DheDQSo1OUx0vgKSiXip9/7D/fMNSMNwyq+Fitv/Usz3Yymczn2d12Cxmh5vlsBjLQ3s1mM/syOJAdKITCVquVJMmwyXRKkiTR6/UgYKDxAGAFyUiLbqMfgT+GJOgf1sPfAwyd/gd1K8thdGBdNgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 05 52" title="" data-src="/static/2022-05-15-16-05-52-35db6e7565a19efd3d9ade8e153af197-a27d0.png" data-srcset="/static/2022-05-15-16-05-52-35db6e7565a19efd3d9ade8e153af197-a27d0.png 150w" data-sizes="(max-width: 150px) 100vw, 150px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>在计算的时候我们将位置坐标沿着矩阵列的方向依次相乘再将结果加起来。我们的位置信息只有两个值，x 和 y。但是要进行运算需要三个值，所以我们将第三个值赋值为 1。</p>\n<p>在这个例子中结果将是</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-07-18-bb46030f501e9a806141d051e02d6718-b1b7b.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 785px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 21.019108280254777%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAoElEQVQI102O3Q6DIAyFff8HnO4CNxMnw0KUBApIkXWa/ZwL0nycc9pGKWWMSSlJKYdhIKJa67qszHPOGkAIgQEZbltST+U8eucY8leDGGKMROUxjqLv931nH3eFEHgEmLvuygaGpRAi5kze+0vbaq2beogoy2nqb/dSSv2Ii7R+bz7DZy+/7txszDdM1vKxS/0T+6y1M8CR+sGYEgBw4wtjYuUq2fO33AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 07 18" title="" data-src="/static/2022-05-15-16-07-18-bb46030f501e9a806141d051e02d6718-b1b7b.png" data-srcset="/static/2022-05-15-16-07-18-bb46030f501e9a806141d051e02d6718-8ea14.png 200w,\n/static/2022-05-15-16-07-18-bb46030f501e9a806141d051e02d6718-2d7f3.png 400w,\n/static/2022-05-15-16-07-18-bb46030f501e9a806141d051e02d6718-b1b7b.png 785w" data-sizes="(max-width: 785px) 100vw, 785px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>你可能会想“这样做有什么意义？”，好吧，假设我们要进行平移，平移的量为 tx 和 ty，然后定义一个这样的矩阵</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-13-00-50271c6e4319f518276e448b0c4baddb-64589.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 154px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 120.12987012987013%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADvUlEQVQ4y21Ua1PiWBDl/3/bL1M1zkyVIivDQ4EkvBGS8FYgyEMSCCEBJISnykMJCHtC3Flqy/6Quunbt/t0n3OvZbPZVCqVh3+tVCrxPN9qtTiOMz3lcrlarUqS9MeD+EKh8Pr6aul0OqFQSFVVbGPd7XatVqvH4+n3+9LRBoMBQRDn5+fYlWUZXwRHIhFktGAbuQ+Hw8fHx36/x8Ln88XjcdMDwyKfzzscjsPRTA/QNRoNC8qVioX57BkHtaE6mz8TJBm/jY3Ho/nLYqe/D4cazSbdbtdkpGnj6eGwn4zHubt7nLe021KtyiUizFNP8fvJSPjWQwbsNitFEel0tsJxFEn8vLA6fttJwhuN3goNPhwIfP/5qym2AbtT5or1ak0URYHnlW6fIKlwKCC1282WKHcksSWGIjFUxooXWooiS23pNsEIgoDKbUz4tGdMKxaLnfaczWavrq5Oe358fKzX6xZMFdNuCgKmV6tV4XI6nRRFPTYa1aM1eJ6kKJfLdQxASLXZbAYCAaMy6LLZbH8fDelBidfr9fv9FxcX+IXz8vLSbrcDyx8Pfs/OzlDVgA1UQLJaLlfrla7rYAVY0MRqBd8SvdA0jRRvb2/r9RpOBBeLRYD4gmdIIpFI/I9n9PIFz4qiJBkabby8Licj9bEhOFzuVJLtK73FYqU+9URRSqUzLqejLTZFSdnqm7bY+py2qg6t579AZj53xyYSHq/nr2/fy1whTSe54kM8HvaTAV8gcmWzEoQnFAyXS1zQT3378QOZLNDrfT43nc60EUzD1+Pxsgwz1jRswTOdzbK5HKY9GY8GqjaZjKfTad5UGLSB7k97vr6+jkajpz1nMhkwctozGDUGhnI3NzfJZBIjpRkaV8LldoMq+tMSLMsiwLwtRgRNp9MpzA80WWazGbghSRLb+EJeCIVIwDY8xNEQGgwGsWWGmSrApA3YuNmnsN1uN67rKex0Og2ev4ANnvE44B8aMLeR2+QZikBCLHK5nMkzspuHQTLkbVTmBUFu8QGSKFeqiAVglk2uli8Oh7VU4harNUSCXnqyrMiDyWhwf3fPpjKQBuQpIs3wqcvGok7n78VaJ0mCYdj39zUdD0dCweVmd5fPeX3eZr0WjzJcKQ+2CX8YB/+T5/x5/vwy333scdh8hjRV7ciKCRs8v7+tp7Mp9K7rW9w5ADdgAxUidrud2Y95MbDYbqFFHQuwhVfRnIi+NTwP5QfjAQRVuJypVMqgmWEwKpxEZebTaEgAPMGT+HQaPGOovV7vH+fnqwJzV0hdAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 13 00" title="" data-src="/static/2022-05-15-16-13-00-50271c6e4319f518276e448b0c4baddb-64589.png" data-srcset="/static/2022-05-15-16-13-00-50271c6e4319f518276e448b0c4baddb-64589.png 154w" data-sizes="(max-width: 154px) 100vw, 154px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>然后计算结果</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-13-41-3acd2b74e677131b9b8113928bc56049-85bfe.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.51597051597052%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAmUlEQVQI1z2NyxKEIAwE+f9PBBVPguUWYPHYoCCOS605hWY6w5RSxtizlGVRUkosrTVjzLZ9cs5YOOcpRUAi0npNKYUQBBewGNBxHNd14co4jqVW5EBg1lqttcMgIADiSfTAGKMQHF8MFCYcva5P83m2/5RS3L7P84x0j/UTaJbT5KxjPYeqGJP3/g39YKYvdfgOroM7t0O5AZDA5b65ASLvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 13 41" title="" data-src="/static/2022-05-15-16-13-41-3acd2b74e677131b9b8113928bc56049-fee1c.png" data-srcset="/static/2022-05-15-16-13-41-3acd2b74e677131b9b8113928bc56049-a67b7.png 200w,\n/static/2022-05-15-16-13-41-3acd2b74e677131b9b8113928bc56049-0b187.png 400w,\n/static/2022-05-15-16-13-41-3acd2b74e677131b9b8113928bc56049-fee1c.png 800w,\n/static/2022-05-15-16-13-41-3acd2b74e677131b9b8113928bc56049-85bfe.png 814w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>如果你还记得线性代数的知识，我们可以删除和 0 相乘的部分，和 1 相乘相当于没变，所以简化后为</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-15-20-973a23ee81f457e95a91cef03e322dfd-8f041.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 22.317073170731707%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA00lEQVQI10VPoQqEUBD0GywGgyIIgsEiCCaT2WywGDxsguBH3AU/wmo5m+DhZ1hETCaDqE8FfXcDhtsw7MzOsLvMMAz7vjdNo6pqHMdfFKXjOG7blqapaZqCIERRBHmaJkK2T1XZti3LchiGzDzPGOR5znGcZVlt24Iu8wIs3oWiKKIoYgpKCAGWZanrOsuyrusy13VBwk5JkuDLsgz0OA5g3/eapjmOgx628zzR1HVtGAbCvu//w0mS4NQ7dvuez9cjCNZ1vT2UUiB+9DyP5/mu635bWaSDj3u+wgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 15 20" title="" data-src="/static/2022-05-15-16-15-20-973a23ee81f457e95a91cef03e322dfd-fee1c.png" data-srcset="/static/2022-05-15-16-15-20-973a23ee81f457e95a91cef03e322dfd-a67b7.png 200w,\n/static/2022-05-15-16-15-20-973a23ee81f457e95a91cef03e322dfd-0b187.png 400w,\n/static/2022-05-15-16-15-20-973a23ee81f457e95a91cef03e322dfd-fee1c.png 800w,\n/static/2022-05-15-16-15-20-973a23ee81f457e95a91cef03e322dfd-8f041.png 820w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>或者更简洁</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12735069511938746000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`newX = x + tx;\nnewY = y + ty;`, `12735069511938746000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">newX = x + tx;\nnewY = y + ty;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>其他的就不用关心了。这个看起来和平移例子中的代码有些相似。</p>\n<p>同样的来实现旋转，在旋转章节提到过，旋转只需要和旋转角对应的正弦和余弦值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98216694201055410000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`s = Math.sin(angleToRotateInRadians);\nc = Math.cos(angleToRotateInRadians);`, `98216694201055410000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">s = Math.sin(angleToRotateInRadians);\nc = Math.cos(angleToRotateInRadians);</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>然后我们创建一个这样的矩阵</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-35-29-836213b7ffe55f88348c929c3d810f59-e3522.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 146px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 126.71232876712328%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADx0lEQVQ4y5VUaVPqWBDl/3+xLMtyLfZF5ckSQiCEQOAhCBKUEFDLp4gjDDthJ0DwnSRvKIcPUzX9oatz03379jnnXkMul6NpOhaLsSwLj1gQhHg8Ho1GWc0Yhkkmkw8PD9/TwuGwKIoGt9vd6/UGgwH8aDSq1Wqnp6e3t7fT6RQr3W4XAcdxRqOx0WhIktTv9+E/Pz9DoZCBoqjNZvP19aV71NtstsfHR8SKZggKhYLL5VosFtu02WyGHQ0kSaqfG6XbbuvFFoulUqkgXq9XQ0lCwPP5i4uLdqvV6/XxKQ369XojkUgYAgEC36/PgocIzpfryWRsNpufnp5Xy0VJKFjM5r40EUolq+nM43EHiOD7+zsdJJ2Xl/4gjeIAinvtRqnytO2sH7vTaWYy6dlcBlpOh10oPohiuVqtlkUxzxfYGLc783g8/h8zA+1ms9lut+EB7+vr6/n5eTqdBqRNzUAEuDGZTLXaRweHaTbh0V9FG4Dt7+8fHx8fHR3BHxwcgFWkHh4eHmmGFYfDAea/p+3t7SHN4PP56vU69gON6P/y8mK32zOZDBhuaIYAwOLYgKrVamEF/u3tDWrRqfoXz1uqtjPzPO90OndmxllUtFerlbJey9o/TIhiSA+xvEDODMFdLofOoHc2n6N4MZ93uj0VMJ0qqdtw//DKytdkrHYua52TcSbLCwhAjN1ipIJEOBwFWlyUufb5yBDzp3jYaVEhaiqvp5PxtjiV4qp//a0V8w6b5WeSS6cz5XI5k06zsXg4wv6XtiHP5XKl8wx5YgQdAkXZQA6qPD0ejyzLy9VKlhf4B2zPzs4gKSQBIXkpIwDtJpMR+6rQyPJ6rUAFuKEGv9+POwg9g1t4xLjJVqsVd9CkGTQDqJF6cnKip2EusK2iTRBEPp9HK5ytWCyiCc6CejwJBc2wiEqv15vNZhHf39/raX+o2pkZe+/wjN0BxA7P0KwqEuCyVjCOik1/IFmtlkq5jBhAwFSe83koFE/KZqOs1hhZAWBqZ+/1VTLBZe/48Xh0k0wycc7puoyEA1yc+/hsfFTfEhznIUg/QTwJwvPzr+lEYtloNldIpVKGK6c1SJJMhMV4NBUC+w7X1fWVLUTRmcxtKvmTDodMjosgFRR5Ph7lSmIxQJJ0JJ66uTHgZk0no+lsvoDq5rNWp4eLUSmLmHCmLkzB112eB8+DPl6hPtbHk8lwOFJ5xq36DthwOAQ3ura3gOF5Bj3fAcP8YMQADigqiMcZfDBMFLP5fX4sMkyE1iwSiYA89AAv/6QxUAeu5G+mztrZXae/5wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 35 29" title="" data-src="/static/2022-05-15-16-35-29-836213b7ffe55f88348c929c3d810f59-e3522.png" data-srcset="/static/2022-05-15-16-35-29-836213b7ffe55f88348c929c3d810f59-e3522.png 146w" data-sizes="(max-width: 146px) 100vw, 146px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>使用矩阵后得到</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-36-02-e67478d152dd8f8de9256294f3446eac-115a3.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.224719101123593%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAmElEQVQI102O0Q6DIAxF/f9fNIEY42DiKJgIrSLsRh62+9SecloGY4z3dF2Xc9s8zyhaa0SElnMm8lprEQHkzNbanHM6jnEcrX0PaDCrtTrnpmkqpeCdPEENWSl1nifgXQozA0KBvK7r0J4A4b4xr34ZuzokCsuydLkHo5SS1uonw9ljCCG2v8DBH7ft03f13PUW4Rh3ZvkCzsvmBlRUjnAAAAAASUVORK5CYII=\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 36 02" title="" data-src="/static/2022-05-15-16-36-02-e67478d152dd8f8de9256294f3446eac-fee1c.png" data-srcset="/static/2022-05-15-16-36-02-e67478d152dd8f8de9256294f3446eac-a67b7.png 200w,\n/static/2022-05-15-16-36-02-e67478d152dd8f8de9256294f3446eac-0b187.png 400w,\n/static/2022-05-15-16-36-02-e67478d152dd8f8de9256294f3446eac-fee1c.png 800w,\n/static/2022-05-15-16-36-02-e67478d152dd8f8de9256294f3446eac-115a3.png 801w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>即</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40982418574523515000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`newX = x *  c + y * s;\nnewY = x * -s + y * c;`, `40982418574523515000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">newX = x *  c + y * s;\nnewY = x * -s + y * c;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>正是我们在旋转例子中得到的结果。</p>\n<p>最后是缩放，我们将两个缩放因子叫做 sx 和 sy 。</p>\n<p>然后创建一个这样的矩阵</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-38-57-7fe444aebd761012c84c541b6c40ef5f-0e000.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 153px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 123.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADxElEQVQ4y3VUaVfiWBDl/39XURaZbhZbJCwB2cGEdVjC0g1hF4gIKGtCEhDBuYQzHo/D1Iecyn31XlW9e+upttvt4xdrt9svLy+j0QjOEel0OhzHzWazT+QYtlwuVVgzmUyVSiWbzeZyuWKxaLFYdDpdPp/PKQbEHwicnZ1Fo1H4QAoMQ1HU/f29CscUCoWPj4+dYnACgQBJknD2+/0RQYxer+d5/gjiK4piJBI5ZEZO/MuytJJkOH6/nyRdK2EpitJu9y4IfKvZwubx8JnnBQSsVvx4PH6IRlWovlqtlAv5W5vNbDbLmx1N03qt2u1xp9K5TqtBku47u9Ni/IsgrD5/aDAYhPx+m8MZDIWxufO7XBpwfYqOhQK+6UKgKerGbMzlMsXSbxiajNJx088f8RjFMIUqW8tns/FUOoLM6IdhmK89B4NBl8v1tedut4srPN1zIpFA0FKxt7c3r9drs9nktcwrttls2Cqr0Wien59lWeYFQZSk0WgcCoVUIPDq6spgMFxfX+ML3+fzOZ3OTxA5Qd7Dw8Pl5eVnmFqtBkeHskHM09NTo9FoNpuP3a7dbsfNoaKmYr1eL5lM4ixEIxgIlkqlEhg90TPQbz0jRqvVfus5HA4fNmfSKSy87/fSSgCTwWDI4XAgQhJFdIhg0AmehwNusTzs5xfz4VDheTQcaDXnTpebrTWSMdrhIg0/fuLU2esIG1B/u8v1uSe9Rm213pAeX7/X83o8N9a7QDCkgujdpKNcLlfZeqlQALUOJwndvsliMpFKxOmluOa4/rVe93c6USqXkaPIMOlMDlI/UIUZ+NYzbhvOZr0ev7weewZVJ3qGAKBHSZamkylMEASkJQgCkgaLYH61WmHm9Hpdr9/D/ul0tlgswc5hMyJAGtoDn/jCh0hwYUcQl4ycmFkUeXFx8Rl2fn4Ojg63DVVMJpN+v4/+8QygZqhiOBxyimGAMHbgmWVZrAKB1Or1+mmeoe1v84zWTs8zJJVOJefz+Xa3X/GL2XwRCARdTuds8spjnt+308mkVm8q8zyUpDWSIP9kOotGIwrPVweeK5VanKLsTpf5163RoCHsdjqWqlX+EHaH5dZ6ZyOKSToWZ6DaO+uvcIRKpFIqtOrzeg7CbrVZHNBouO+9hM3KViv1RhN4ja2mMlmj0fTYqGVzxU6njSFvtR/B0Wlt//cN+9959rjduFvlke2AQMJOmIwmVHR8eYGk02kwh4TgA1C/36tUq3jqVOv1Gg9N/l/LZDIYA1QL54hgFeIFQ0BQIxB84YPCfwBGl9lcoDPw4AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 38 57" title="" data-src="/static/2022-05-15-16-38-57-7fe444aebd761012c84c541b6c40ef5f-0e000.png" data-srcset="/static/2022-05-15-16-38-57-7fe444aebd761012c84c541b6c40ef5f-0e000.png 153w" data-sizes="(max-width: 153px) 100vw, 153px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>使用矩阵后得到</p>\n<p><html><head></head><body><a class="gatsby-resp-image-link" href="/static/2022-05-15-16-39-34-f888e505c953d12cd9230d0940f45016-85bfe.png" style="display: block" target="_blank" rel="noopener">\n  \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.393120393120395%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAnUlEQVQI11WOyQ6DMBBD+f8fREig5NZsiCiQfZla0EqtD3N4sseepBD7vtdapZTbtrXWiOg4DqVUKcVaO8+z9wEw5/wSwnsfY1zXVWs1AZWcex9CCKDWOnyIgY8xnHPLsoQQAXvvKWd8TyndYT3RLWRQxRjDBPoK7uu6GOdPM9F4YEyRc26M+YRRdboTI+lHtZYQgtbmD7YK82Et7huV7eWxPSf+CQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image lazy" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;" alt="2022 05 15 16 39 34" title="" data-src="/static/2022-05-15-16-39-34-f888e505c953d12cd9230d0940f45016-fee1c.png" data-srcset="/static/2022-05-15-16-39-34-f888e505c953d12cd9230d0940f45016-a67b7.png 200w,\n/static/2022-05-15-16-39-34-f888e505c953d12cd9230d0940f45016-0b187.png 400w,\n/static/2022-05-15-16-39-34-f888e505c953d12cd9230d0940f45016-fee1c.png 800w,\n/static/2022-05-15-16-39-34-f888e505c953d12cd9230d0940f45016-85bfe.png 814w" data-sizes="(max-width: 800px) 100vw, 800px">\n    </span>\n  </span>\n  \n  </a>\n    </body></html></p>\n<p>即</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91955059619320730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`newX = x * sx;\nnewY = y * sy;`, `91955059619320730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title=""\n              >\n                \n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">newX = x * sx;\nnewY = y * sy;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>和缩放例子相似。</p>\n<p>现在你可能还会想“那又怎样，有什么意义？”，好像花了更多精力做之前做过的事情。</p>\n<p>现在开始有趣的部分了，相乘后他们可以用一个矩阵代表三个变换，假定有一个方法 m3.multiply 可以将两个矩阵相乘并返回结果。</p>\n<p>为了方便讲解，我们先创建平移，旋转和缩放矩阵。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34644199836005417000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var m3 = {\n  translation: function (tx, ty) {\n    return [1, 0, 0, 0, 1, 0, tx, ty, 1];\n  },\n\n  rotation: function (angleInRadians) {\n    var c = Math.cos(angleInRadians);\n    var s = Math.sin(angleInRadians);\n    return [c, -s, 0, s, c, 0, 0, 0, 1];\n  },\n\n  scaling: function (sx, sy) {\n    return [sx, 0, 0, 0, sy, 0, 0, 0, 1];\n  }\n};`, `34644199836005417000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> m3 <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">translation</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tx<span class="token punctuation">,</span> ty</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> tx<span class="token punctuation">,</span> ty<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function-variable function">rotation</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">angleInRadians</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">var</span> s <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span>c<span class="token punctuation">,</span> <span class="token operator">-</span>s<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> s<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function-variable function">scaling</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sx<span class="token punctuation">,</span> sy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span>sx<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> sy<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在该修改着色器了，原来的着色器像这样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39955222377643200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;vertex-shader-2d&quot; type=&quot;x-shader/x-vertex&quot;>\n   attribute vec2 a_position;\n\n   uniform vec2 u_resolution;\n   uniform vec2 u_translation;\n   uniform vec2 u_rotation;\n   uniform vec2 u_scale;\n\n   void main() {\n      // 缩放\n      vec2 scaledPosition = a_position * u_scale;\n\n      // 旋转\n      vec2 rotatedPosition = vec2(\n         scaledPosition.x * u_rotation.y + scaledPosition.y * u_rotation.x,\n         scaledPosition.y * u_rotation.y - scaledPosition.x * u_rotation.x);\n\n      // 平移\n      vec2 position = rotatedPosition + u_translation;\n      // ...\n   }\n</script>`, `39955222377643200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">"vertex-shader-2d"</span> type<span class="token operator">=</span><span class="token string">"x-shader/x-vertex"</span><span class="token operator">></span>\n   attribute vec2 a_position<span class="token punctuation">;</span>\n\n   uniform vec2 u_resolution<span class="token punctuation">;</span>\n   uniform vec2 u_translation<span class="token punctuation">;</span>\n   uniform vec2 u_rotation<span class="token punctuation">;</span>\n   uniform vec2 u_scale<span class="token punctuation">;</span>\n\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// 缩放</span>\n      vec2 scaledPosition <span class="token operator">=</span> a_position <span class="token operator">*</span> u_scale<span class="token punctuation">;</span>\n\n      <span class="token comment">// 旋转</span>\n      vec2 rotatedPosition <span class="token operator">=</span> <span class="token function">vec2</span><span class="token punctuation">(</span>\n         scaledPosition<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">+</span> scaledPosition<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n         scaledPosition<span class="token punctuation">.</span>y <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>y <span class="token operator">-</span> scaledPosition<span class="token punctuation">.</span>x <span class="token operator">*</span> u_rotation<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n      <span class="token comment">// 平移</span>\n      vec2 position <span class="token operator">=</span> rotatedPosition <span class="token operator">+</span> u_translation<span class="token punctuation">;</span>\n      <span class="token comment">// ...</span>\n   <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>新着色器就简单多了。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58300137915101910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;vertex-shader-2d&quot; type=&quot;x-shader/x-vertex&quot;>\n   attribute vec2 a_position;\n\n   uniform vec2 u_resolution;\n   uniform mat3 u_matrix;\n\n   void main() {\n      // 将位置乘以矩阵\n      vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n      // ...\n   }\n</script>`, `58300137915101910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">"vertex-shader-2d"</span> type<span class="token operator">=</span><span class="token string">"x-shader/x-vertex"</span><span class="token operator">></span>\n   attribute vec2 a_position<span class="token punctuation">;</span>\n\n   uniform vec2 u_resolution<span class="token punctuation">;</span>\n   uniform mat3 u_matrix<span class="token punctuation">;</span>\n\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// 将位置乘以矩阵</span>\n      vec2 position <span class="token operator">=</span> <span class="token punctuation">(</span>u_matrix <span class="token operator">*</span> <span class="token function">vec3</span><span class="token punctuation">(</span>a_position<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>xy<span class="token punctuation">;</span>\n      <span class="token comment">// ...</span>\n   <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是使用的方法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72046773445785120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 绘制场景\nfunction drawScene() {\n  // ...\n\n  // 计算矩阵\n  var translationMatrix = m3.translation(translation[0], translation[1]);\n  var rotationMatrix = m3.rotation(angleInRadians);\n  var scaleMatrix = m3.scaling(scale[0], scale[1]);\n\n  // 矩阵相乘\n  var matrix = m3.multiply(translationMatrix, rotationMatrix);\n  matrix = m3.multiply(matrix, scaleMatrix);\n\n  // 设置矩阵\n  gl.uniformMatrix3fv(matrixLocation, false, matrix);\n\n  // 绘制图形\n  gl.drawArrays(gl.TRIANGLES, 0, 18);\n}`, `72046773445785120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 计算矩阵</span>\n  <span class="token keyword">var</span> translationMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>translation<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> translation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> rotationMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">rotation</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> scaleMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">scaling</span><span class="token punctuation">(</span>scale<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> scale<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 矩阵相乘</span>\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>translationMatrix<span class="token punctuation">,</span> rotationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> scaleMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置矩阵</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix3fv</span><span class="token punctuation">(</span>matrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制图形</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这个例子用的新代码，滑块没变，还是对应平移，旋转和缩放，但是他们在着色器中做的事情是相似的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/4b2hc3?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>可能你还会问，那又怎样？看起来没什么特别好的地方。但是，如果现在我们想改变转换顺序的话，就不需要重写一个着色器了，只需要改变一下数学运算。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76784847603893520000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ...\n\n// 矩阵相乘\nvar matrix = m3.multiply(scaleMatrix, rotationMatrix);\nmatrix = m3.multiply(matrix, translationMatrix);\n\n// ...`, `76784847603893520000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{3-5}"\n              >\n                <span class="gatsby-code-button-language">js{3-5}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ...</span>\n\n<span class="gatsby-highlight-code-line"><span class="token comment">// 矩阵相乘</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>scaleMatrix<span class="token punctuation">,</span> rotationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> translationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// ...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/fdzw2v?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>像这样的矩阵相乘对层级变换至关重要，比如身体的手臂部分运动，月球属于绕太阳转动的地球的一部分，或者树上的树枝。写一个简单的层级运动的例子，我们来画 5 个 ‘F’，并且每个 ‘F’ 都以前一个的矩阵为基础。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54159694952171920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 绘制场景\nfunction drawScene() {\n  // 清空画布\n  gl.clear(gl.COLOR_BUFFER_BIT);\n\n  // 计算矩阵\n  var translationMatrix = m3.translation(translation[0], translation[1]);\n  var rotationMatrix = m3.rotation(angleInRadians);\n  var scaleMatrix = m3.scaling(scale[0], scale[1]);\n\n  // 初始矩阵\n  var matrix = m3.identity();\n\n  for (var i = 0; i < 5; ++i) {\n    // 矩阵相乘\n    matrix = m3.multiply(matrix, translationMatrix);\n    matrix = m3.multiply(matrix, rotationMatrix);\n    matrix = m3.multiply(matrix, scaleMatrix);\n\n    // 设置矩阵\n    gl.uniformMatrix3fv(matrixLocation, false, matrix);\n\n    // 绘制图形\n    gl.drawArrays(gl.TRIANGLES, 0, 18);\n  }\n}`, `54159694952171920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 清空画布</span>\n  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 计算矩阵</span>\n  <span class="token keyword">var</span> translationMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>translation<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> translation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> rotationMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">rotation</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> scaleMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">scaling</span><span class="token punctuation">(</span>scale<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> scale<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 初始矩阵</span>\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 矩阵相乘</span>\n    matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> translationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> rotationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> scaleMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 设置矩阵</span>\n    gl<span class="token punctuation">.</span><span class="token function">uniformMatrix3fv</span><span class="token punctuation">(</span>matrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// 绘制图形</span>\n    gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在这个例子中用到了一个新方法 <code class="language-text">m3.identity</code>，这个方法创建一个单位矩阵。单位矩阵就像 1.0 一样，和它相乘的矩阵不会变化</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38398317557067220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var m3 = {\n  identity: function () {\n    return [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  }\n};`, `38398317557067220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> m3 <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">identity</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是 5 个 F。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/w7p3wi?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>再看一个例子，之前的每个例子中 ‘F’ 都是绕着它的左上角旋转 （当然，改变转换顺序的那个例子除外）。这是因为我们总是绕原点旋转，而 ‘F’ 的原点就是左上角，也就是 (0, 0) 。</p>\n<p>现在我们可以使用矩阵运算，并且自定义转换的顺序。所以让我们改变旋转的中心</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75472603242600870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个矩阵，可以将原点移动到 \'F\' 的中心\nvar moveOriginMatrix = m3.translation(-50, -75);\n// ...\n\n// 矩阵相乘\nvar matrix = m3.multiply(translationMatrix, rotationMatrix);\nmatrix = m3.multiply(matrix, scaleMatrix);\nmatrix = m3.multiply(matrix, moveOriginMatrix);`, `75472603242600870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个矩阵，可以将原点移动到 \'F\' 的中心</span>\n<span class="token keyword">var</span> moveOriginMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// ...</span>\n\n<span class="token comment">// 矩阵相乘</span>\n<span class="token keyword">var</span> matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>translationMatrix<span class="token punctuation">,</span> rotationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\nmatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> scaleMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\nmatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> moveOriginMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是结果，注意到 F 现在绕中心旋转和缩放了。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/3mvm0w?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>通过这种方式你可以绕任意点旋转和缩放，所以现在你可能知道为什么 PhotoShop 或 Flash 可以让你移动旋转中心。</p>\n<p>还可以做更有趣的事情，如果你回想第一篇文章 WebGL 基础概念，可能会记得在着色器中我们将像素坐标转换到裁剪空间，这是当时的代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27210743514857770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ...\n// 从像素坐标转换到 0.0 到 1.0\nvec2 zeroToOne = position / u_resolution;\n\n// 再把 0->1 转换 0->2\nvec2 zeroToTwo = zeroToOne * 2.0;\n\n// 把 0->2 转换到 -1->+1 (裁剪空间)\nvec2 clipSpace = zeroToTwo - 1.0;\n\ngl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);`, `27210743514857770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token comment">// ...</span>\n<span class="token comment">// 从像素坐标转换到 0.0 到 1.0</span>\n<span class="token keyword">vec2</span> zeroToOne <span class="token operator">=</span> position <span class="token operator">/</span> u_resolution<span class="token punctuation">;</span>\n\n<span class="token comment">// 再把 0->1 转换 0->2</span>\n<span class="token keyword">vec2</span> zeroToTwo <span class="token operator">=</span> zeroToOne <span class="token operator">*</span> <span class="token number">2.0</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 把 0->2 转换到 -1->+1 (裁剪空间)</span>\n<span class="token keyword">vec2</span> clipSpace <span class="token operator">=</span> zeroToTwo <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">;</span>\n\ngl_Position <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>clipSpace <span class="token operator">*</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>逐步观察，首先 <code class="language-text">从像素坐标转换到 0.0 到 1.0</code> 事实上是一个缩放变换，第二步也是缩放变换，接着是一个平移和一个 Y 为 -1 的缩放。我们可以将这些操作放入一个矩阵传给着色器，创建两个缩放矩阵，一个缩放 1.0/分辨率，另一个缩放 2.0，第三个平移 (-1.0, -1.0), 然后第四个将 Y 缩放 -1。 然后将他们乘在一起，由于运算很简单，所以我们就直接定义一个 projection 方法，根据分辨率直接生成矩阵。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96444506318332360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var m3 = {\n  projection: function (width, height) {\n    // 注意：这个矩阵翻转了 Y 轴，所以 0 在上方\n    return [2 / width, 0, 0, 0, -2 / height, 0, -1, 1, 1];\n  }\n};`, `96444506318332360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> m3 <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">projection</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 注意：这个矩阵翻转了 Y 轴，所以 0 在上方</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">/</span> width<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token operator">/</span> height<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在可以简化着色器，这是新的着色器。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74023998009805300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<script id=&quot;vertex-shader-2d&quot; type=&quot;x-shader/x-vertex&quot;>\n   attribute vec2 a_position;\n\n   uniform mat3 u_matrix;\n\n   void main() {\n      // 使位置和矩阵相乘\n      gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\n   }\n</script>`, `74023998009805300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">"vertex-shader-2d"</span> type<span class="token operator">=</span><span class="token string">"x-shader/x-vertex"</span><span class="token operator">></span>\n   attribute vec2 a_position<span class="token punctuation">;</span>\n\n   uniform mat3 u_matrix<span class="token punctuation">;</span>\n\n   <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// 使位置和矩阵相乘</span>\n      gl_Position <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span><span class="token punctuation">(</span>u_matrix <span class="token operator">*</span> <span class="token function">vec3</span><span class="token punctuation">(</span>a_position<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>xy<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 JavaScript 中需要乘上投影矩阵</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21765165554308784000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 绘制场景\nfunction drawScene() {\n  // ...\n\n  // 计算矩阵\n  var projectionMatrix = m3.projection(gl.canvas.clientWidth, gl.canvas.clientHeight);\n\n  // ...\n\n  // 矩阵相乘\n  var matrix = m3.multiply(projectionMatrix, translationMatrix);\n  matrix = m3.multiply(matrix, rotationMatrix);\n  matrix = m3.multiply(matrix, scaleMatrix);\n\n  // ...\n}`, `21765165554308784000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 绘制场景</span>\n<span class="token keyword">function</span> <span class="token function">drawScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 计算矩阵</span>\n  <span class="token keyword">var</span> projectionMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 矩阵相乘</span>\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>projectionMatrix<span class="token punctuation">,</span> translationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> rotationMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> scaleMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里还去除了设置分辨率的代码，通过使用矩阵，我们就把着色器中 6-7 步的操作在一步中完成。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/uyfqlr?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>在继续之前我们可以先简化一下操作，虽然先创建一些矩阵再将它们相乘很常见，但是按照我们的顺序依次操作矩阵也比较常见，比较高效的做法是创建这样的方法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58474651289536090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var m3 = {\n  // ...\n\n  translate: function (m, tx, ty) {\n    return m3.multiply(m, m3.translation(tx, ty));\n  },\n\n  rotate: function (m, angleInRadians) {\n    return m3.multiply(m, m3.rotation(angleInRadians));\n  },\n\n  scale: function (m, sx, sy) {\n    return m3.multiply(m, m3.scaling(sx, sy));\n  }\n\n  // ...\n};`, `58474651289536090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> m3 <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  <span class="token function-variable function">translate</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> tx<span class="token punctuation">,</span> ty</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> m3<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>tx<span class="token punctuation">,</span> ty<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function-variable function">rotate</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> angleInRadians</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> m3<span class="token punctuation">.</span><span class="token function">rotation</span><span class="token punctuation">(</span>angleInRadians<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function-variable function">scale</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> sx<span class="token punctuation">,</span> sy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> m3<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> m3<span class="token punctuation">.</span><span class="token function">scaling</span><span class="token punctuation">(</span>sx<span class="token punctuation">,</span> sy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这能够让我们将 7 行的矩阵代码转换成 4 行</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48958862268994200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 计算矩阵\nvar matrix = m3.projection(gl.canvas.clientWidth, gl.canvas.clientHeight); // 返回的是画布在浏览器中实际显示的大小，所以这里图片比例不会变化。相反如果直接用 canvas.width 和 canvas.height，画布将被拉伸导致图片变形\nmatrix = m3.translate(matrix, translation[0], translation[1]);\nmatrix = m3.rotate(matrix, angleInRadians);\nmatrix = m3.scale(matrix, scale[0], scale[1]);`, `48958862268994200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 计算矩阵</span>\n<span class="token keyword">var</span> matrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回的是画布在浏览器中实际显示的大小，所以这里图片比例不会变化。相反如果直接用 canvas.width 和 canvas.height，画布将被拉伸导致图片变形</span>\nmatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> translation<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> translation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> angleInRadians<span class="token punctuation">)</span><span class="token punctuation">;</span>\nmatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> scale<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> scale<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是结果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/lvd1iu?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>最后一件事，我们之前使用了多种矩阵顺序。第一例中使用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57701136409054050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`translation * rotation * scale; // 平移 * 旋转 * 缩放`, `57701136409054050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">translation <span class="token operator">*</span> rotation <span class="token operator">*</span> scale<span class="token punctuation">;</span> <span class="token comment">// 平移 * 旋转 * 缩放</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>第二例中使用</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3342675448937138000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`scale * rotation * translation; // 缩放 * 旋转 * 平移`, `3342675448937138000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">scale <span class="token operator">*</span> rotation <span class="token operator">*</span> translation<span class="token punctuation">;</span> <span class="token comment">// 缩放 * 旋转 * 平移</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>然后观察了它们的区别。</p>\n<p>这有两种方式解读矩阵运算，给定这样一个表达式</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81174360151695600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`projectionMat * translationMat * rotationMat * scaleMat * position;`, `81174360151695600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">projectionMat <span class="token operator">*</span> translationMat <span class="token operator">*</span> rotationMat <span class="token operator">*</span> scaleMat <span class="token operator">*</span> position<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>第一种可能是多数人觉得比较自然的方式，从右向左解释</p>\n<p>首先将位置乘以缩放矩阵获得缩放后的位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51445505024881920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`scaledPosition = scaleMat * position;`, `51445505024881920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">scaledPosition <span class="token operator">=</span> scaleMat <span class="token operator">*</span> position<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>然后将缩放后的位置和旋转矩阵相乘得到缩放旋转位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89512858539707860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`rotatedScaledPosition = rotationMat * scaledPosition;`, `89512858539707860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">rotatedScaledPosition <span class="token operator">=</span> rotationMat <span class="token operator">*</span> scaledPosition<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>然后将缩放旋转位置和平移矩阵相乘得到缩放旋转平移位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55236253975868130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`translatedRotatedScaledPosition = translationMat * rotatedScaledPosition;`, `55236253975868130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">translatedRotatedScaledPosition <span class="token operator">=</span> translationMat <span class="token operator">*</span> rotatedScaledPosition<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>最后和投影矩阵相乘得到裁剪空间中的坐标</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20122045844462910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`clipspacePosition = projectioMatrix * translatedRotatedScaledPosition;`, `20122045844462910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">clipspacePosition <span class="token operator">=</span> projectioMatrix <span class="token operator">*</span> translatedRotatedScaledPosition<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>第二种方式是从左往右解释，在这个例子中每一个矩阵改变的都是画布的坐标空间，画布的起始空间是裁剪空间的范围(-1 到 +1)，矩阵从左到右改变着画布所在的空间。</p>\n<ol>\n<li>没有矩阵（或者单位矩阵）</li>\n</ol>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/siwlob?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview&amp;initialpath=?stage=0" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [webgl-2d-matrix-space-change](embedded-codesandbox://webgl-fundamental-2d/webgl-2d-matrix-space-change?view=preview&initialpath=?stage=0) -->\n<p>白色区域是画布，蓝色是画布以外，我们正在裁剪空间中。传递到这里的点需要在裁剪空间内。</p>\n<ol start="2">\n<li><code class="language-text">matrix = m3.projection(gl.canvas.clientWidth, gl.canvas.clientHeight);</code></li>\n</ol>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/siwlob?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview&amp;initialpath=?stage=1" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [webgl-2d-matrix-space-change](embedded-codesandbox://webgl-fundamental-2d/webgl-2d-matrix-space-change?view=preview&initialpath=?stage=1) -->\n<p>现在我们在像素空间，X 范围是 0 到 400，Y 范围是 0 到 300，0,0 点在左上角。传递到这里的点需要在像素空间内，你看到的闪烁是 Y 轴上下颠倒的原因。</p>\n<ol start="3">\n<li><code class="language-text">matrix = m3.translate(matrix, tx, ty);</code></li>\n</ol>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/siwlob?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview&amp;initialpath=?stage=2" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [webgl-2d-matrix-space-change](embedded-codesandbox://webgl-fundamental-2d/webgl-2d-matrix-space-change?view=preview&initialpath=?stage=2) -->\n<p>原点被移动到了 tx, ty (150, 100)，所以空间移动了。</p>\n<ol start="4">\n<li><code class="language-text">matrix = m3.rotate(matrix, rotationInRadians);</code></li>\n</ol>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/siwlob?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview&amp;initialpath=?stage=3" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [webgl-2d-matrix-space-change](embedded-codesandbox://webgl-fundamental-2d/webgl-2d-matrix-space-change?view=preview&initialpath=?stage=3) -->\n<p>空间绕 tx, ty 旋转</p>\n<ol start="5">\n<li><code class="language-text">matrix = m3.scale(matrix, sx, sy);</code></li>\n</ol>\n<html><head></head><body><iframe data-src="https://codesandbox.io/embed/siwlob?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview&amp;initialpath=?stage=4" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></body></html>\n<!-- [webgl-2d-matrix-space-change](embedded-codesandbox://webgl-fundamental-2d/webgl-2d-matrix-space-change?view=preview&initialpath=?stage=4) -->\n<p>之前的旋转空间中心在 tx, ty，x 方向缩放 2，y 方向缩放 1.5</p>\n<p>在着色器中执行 <code class="language-text">gl_Position = matrix * position;</code>，position 被直接转换到这个空间。</p>\n<p>选一个你容易接受的方式去理解吧。</p>\n<h1 id="webgl-实现-drawimage-接口"><a href="#webgl-%E5%AE%9E%E7%8E%B0-drawimage-%E6%8E%A5%E5%8F%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebGL 实现 DrawImage 接口</h1>\n<p>此文上接 WebGL 三维正射投影，如果没读建议从那里开始，你也应了解纹理和纹理坐标，如果不清楚可以看看 WebGL 三维纹理。</p>\n<p>实现大多数二维游戏只需要一个方法去绘制一个图像，当然也有一些二维游戏用线等技术做一些有趣的东西，但是如果你有绘制二维图像的方法，基本上可以做大多数二维游戏。</p>\n<p>画布有一个非常灵活的二维接口叫做 drawImage，用于绘制图像。它有三个版本</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40271279184581600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ctx.drawImage(image, dstX, dstY);\nctx.drawImage(image, dstX, dstY, dstWidth, dstHeight);\nctx.drawImage(image, srcX, srcY, srcWidth, srcHeight, dstX, dstY, dstWidth, dstHeight);`, `40271279184581600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">)</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> dstWidth<span class="token punctuation">,</span> dstHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> srcX<span class="token punctuation">,</span> srcY<span class="token punctuation">,</span> srcWidth<span class="token punctuation">,</span> srcHeight<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> dstWidth<span class="token punctuation">,</span> dstHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>用你现在学到的所有东西如何使用 WebGL 实现这个接口？你想到的办法可能是创建一些顶点，像本站第一篇文章那样。将顶点传送到 GPU 是一个比较耗时的操作（尽管某些情况下比较快）。</p>\n<p>这就是 WebGL 发挥作用的地方，讲究富有创造性地编写着色器和使用它们去解决问题。</p>\n<h2 id="drawimage-版本一"><a href="#drawimage-%E7%89%88%E6%9C%AC%E4%B8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>drawImage 版本一</h2>\n<p>让我们从第一个版本开始</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27321506631491620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ctx.drawImage(image, x, y);`, `27321506631491620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>它可以在 x, y 位置处绘制一个原始大小的图像，为了实现相似的功能，WebGL 需要上传 x, y, <code class="language-text">x + width</code>, y, x, <code class="language-text">y + height</code> 和 <code class="language-text">x + width</code>, <code class="language-text">y + height</code> 对应的顶点，当绘制不同的图像或不同的位置时就创建不同的顶点集合。</p>\n<p>一个更常用的方式是只使用一个单位矩形，我们上传一个长度为 1 个单位的正方形，然后使用矩阵运算缩放和平移单位矩形，以达到期望的大小和位置。</p>\n<p>这是代码。</p>\n<p>首先需要一个简单的顶点着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54052560818934900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n   gl_Position = u_matrix * a_position;\n   v_texcoord = a_texcoord;\n}`, `54052560818934900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec2</span> a_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_matrix<span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_Position <span class="token operator">=</span> u_matrix <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n   v_texcoord <span class="token operator">=</span> a_texcoord<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>和一个简单的片断着色器</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75296098145871170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n   gl_FragColor = texture2D(u_texture, v_texcoord);\n}`, `75296098145871170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl"\n              >\n                <span class="gatsby-code-button-language">glsl</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_texture<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后轮到方法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45504167836323340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 不同于图像，纹理没有对应的长和宽\n// 我们将向纹理传递长和宽\nfunction drawImage(tex, texWidth, texHeight, dstX, dstY) {\n  gl.bindTexture(gl.TEXTURE_2D, tex);\n\n  // 告诉 WebGL 使用的程序\n  gl.useProgram(program);\n\n  // 设置属性，从缓冲中提取数据\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.enableVertexAttribArray(positionLocation);\n  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n  gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);\n  gl.enableVertexAttribArray(texcoordLocation);\n  gl.vertexAttribPointer(texcoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n  // 从像素空间转换到裁剪空间\n  var matrix = m4.orthographic(0, gl.canvas.width, gl.canvas.height, 0, -1, 1);\n\n  // 平移到 dstX, dstY\n  matrix = m4.translate(matrix, dstX, dstY, 0);\n\n  // 缩放单位矩形的宽和高到 texWidth, texHeight 个单位长度\n  matrix = m4.scale(matrix, texWidth, texHeight, 1);\n\n  // 设置矩阵\n  gl.uniformMatrix4fv(matrixLocation, false, matrix);\n\n  // 告诉着色器使用纹理单元 0\n  gl.uniform1i(textureLocation, 0);\n\n  // 绘制矩形\n  gl.drawArrays(gl.TRIANGLES, 0, 6);\n}`, `45504167836323340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 不同于图像，纹理没有对应的长和宽</span>\n<span class="token comment">// 我们将向纹理传递长和宽</span>\n<span class="token keyword">function</span> <span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token parameter">tex<span class="token punctuation">,</span> texWidth<span class="token punctuation">,</span> texHeight<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉 WebGL 使用的程序</span>\n  gl<span class="token punctuation">.</span><span class="token function">useProgram</span><span class="token punctuation">(</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置属性，从缓冲中提取数据</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> positionBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>positionLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>positionLocation<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> texcoordBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">enableVertexAttribArray</span><span class="token punctuation">(</span>texcoordLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">vertexAttribPointer</span><span class="token punctuation">(</span>texcoordLocation<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 从像素空间转换到裁剪空间</span>\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">orthographic</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 平移到 dstX, dstY</span>\n  matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 缩放单位矩形的宽和高到 texWidth, texHeight 个单位长度</span>\n  matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>matrix<span class="token punctuation">,</span> texWidth<span class="token punctuation">,</span> texHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置矩阵</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>matrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉着色器使用纹理单元 0</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>textureLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制矩形</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我们来加载一些图像用于纹理</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71435300209759140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 创建一个纹理信息 { width: w, height: h, texture: tex }\n// 纹理起初为 1x1 像素，当图像加载完成后更新大小\nfunction loadImageAndCreateTextureInfo(url) {\n  var tex = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, tex);\n\n  // 假设所有的图像维度都不是 2 的整数次幂\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n  var textureInfo = {\n    width: 1, // 图像加载前不知道大小\n    height: 1,\n    texture: tex\n  };\n  var img = new Image();\n  img.addEventListener(\'load\', function () {\n    textureInfo.width = img.width;\n    textureInfo.height = img.height;\n\n    gl.bindTexture(gl.TEXTURE_2D, textureInfo.texture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n  });\n\n  return textureInfo;\n}\n\nvar textureInfos = [\n  loadImageAndCreateTextureInfo(\'resources/star.jpg\'),\n  loadImageAndCreateTextureInfo(\'resources/leaves.jpg\'),\n  loadImageAndCreateTextureInfo(\'resources/keyboard.jpg\')\n];`, `71435300209759140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 创建一个纹理信息 { width: w, height: h, texture: tex }</span>\n<span class="token comment">// 纹理起初为 1x1 像素，当图像加载完成后更新大小</span>\n<span class="token keyword">function</span> <span class="token function">loadImageAndCreateTextureInfo</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> tex <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 假设所有的图像维度都不是 2 的整数次幂</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_S</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_WRAP_T</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">CLAMP_TO_EDGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  gl<span class="token punctuation">.</span><span class="token function">texParameteri</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_MIN_FILTER</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">LINEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> textureInfo <span class="token operator">=</span> <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 图像加载前不知道大小</span>\n    height<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    texture<span class="token punctuation">:</span> tex\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'load\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    textureInfo<span class="token punctuation">.</span>width <span class="token operator">=</span> img<span class="token punctuation">.</span>width<span class="token punctuation">;</span>\n    textureInfo<span class="token punctuation">.</span>height <span class="token operator">=</span> img<span class="token punctuation">.</span>height<span class="token punctuation">;</span>\n\n    gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> textureInfo<span class="token punctuation">.</span>texture<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    gl<span class="token punctuation">.</span><span class="token function">texImage2D</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> textureInfo<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> textureInfos <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token function">loadImageAndCreateTextureInfo</span><span class="token punctuation">(</span><span class="token string">\'resources/star.jpg\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token function">loadImageAndCreateTextureInfo</span><span class="token punctuation">(</span><span class="token string">\'resources/leaves.jpg\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token function">loadImageAndCreateTextureInfo</span><span class="token punctuation">(</span><span class="token string">\'resources/keyboard.jpg\'</span><span class="token punctuation">)</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>绘制到随机位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="96088574503738060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var drawInfos = [];\nvar numToDraw = 9;\nvar speed = 60;\nfor (var ii = 0; ii < numToDraw; ++ii) {\n  var drawInfo = {\n    x: Math.random() * gl.canvas.width,\n    y: Math.random() * gl.canvas.height,\n    dx: Math.random() > 0.5 ? -1 : 1,\n    dy: Math.random() > 0.5 ? -1 : 1,\n    textureInfo: textureInfos[(Math.random() * textureInfos.length) | 0]\n  };\n  drawInfos.push(drawInfo);\n}\n\nfunction update(deltaTime) {\n  drawInfos.forEach(function (drawInfo) {\n    drawInfo.x += drawInfo.dx * speed * deltaTime;\n    drawInfo.y += drawInfo.dy * speed * deltaTime;\n    if (drawInfo.x < 0) {\n      drawInfo.dx = 1;\n    }\n    if (drawInfo.x >= gl.canvas.width) {\n      drawInfo.dx = -1;\n    }\n    if (drawInfo.y < 0) {\n      drawInfo.dy = 1;\n    }\n    if (drawInfo.y >= gl.canvas.height) {\n      drawInfo.dy = -1;\n    }\n  });\n}\n\nfunction draw() {\n  gl.clear(gl.COLOR_BUFFER_BIT);\n\n  drawInfos.forEach(function (drawInfo) {\n    drawImage(\n      drawInfo.textureInfo.texture,\n      drawInfo.textureInfo.width,\n      drawInfo.textureInfo.height,\n      drawInfo.x,\n      drawInfo.y\n    );\n  });\n}\n\nvar then = 0;\nfunction render(time) {\n  var now = time * 0.001;\n  var deltaTime = Math.min(0.1, now - then);\n  then = now;\n\n  update(deltaTime);\n  draw();\n\n  requestAnimationFrame(render);\n}\nrequestAnimationFrame(render);`, `96088574503738060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> drawInfos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> numToDraw <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ii <span class="token operator">&lt;</span> numToDraw<span class="token punctuation">;</span> <span class="token operator">++</span>ii<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> drawInfo <span class="token operator">=</span> <span class="token punctuation">{</span>\n    x<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span>\n    y<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n    dx<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    dy<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n    textureInfo<span class="token punctuation">:</span> textureInfos<span class="token punctuation">[</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> textureInfos<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  drawInfos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>drawInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">deltaTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  drawInfos<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">drawInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    drawInfo<span class="token punctuation">.</span>x <span class="token operator">+=</span> drawInfo<span class="token punctuation">.</span>dx <span class="token operator">*</span> speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span>\n    drawInfo<span class="token punctuation">.</span>y <span class="token operator">+=</span> drawInfo<span class="token punctuation">.</span>dy <span class="token operator">*</span> speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>drawInfo<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      drawInfo<span class="token punctuation">.</span>dx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>drawInfo<span class="token punctuation">.</span>x <span class="token operator">>=</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      drawInfo<span class="token punctuation">.</span>dx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>drawInfo<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      drawInfo<span class="token punctuation">.</span>dy <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>drawInfo<span class="token punctuation">.</span>y <span class="token operator">>=</span> gl<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      drawInfo<span class="token punctuation">.</span>dy <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  drawInfos<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">drawInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">drawImage</span><span class="token punctuation">(</span>\n      drawInfo<span class="token punctuation">.</span>textureInfo<span class="token punctuation">.</span>texture<span class="token punctuation">,</span>\n      drawInfo<span class="token punctuation">.</span>textureInfo<span class="token punctuation">.</span>width<span class="token punctuation">,</span>\n      drawInfo<span class="token punctuation">.</span>textureInfo<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n      drawInfo<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n      drawInfo<span class="token punctuation">.</span>y\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> then <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> now <span class="token operator">=</span> time <span class="token operator">*</span> <span class="token number">0.001</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> deltaTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> now <span class="token operator">-</span> then<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  then <span class="token operator">=</span> now<span class="token punctuation">;</span>\n\n  <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以在这里看到运行结果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/6hmyzm?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="drawimage-版本二"><a href="#drawimage-%E7%89%88%E6%9C%AC%E4%BA%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>drawImage 版本二</h2>\n<p>处理 drawImage 方法的第二个版本</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25950348907492237000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ctx.drawImage(image, dstX, dstY, dstWidth, dstHeight);`, `25950348907492237000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> dstWidth<span class="token punctuation">,</span> dstHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>没什么特别的地方，只是用 dstWidth 和 dstHeight 代替了 texWidth 和 texHeight。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2751921005761382000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function drawImage(tex, texWidth, texHeight, dstX, dstY, dstWidth, dstHeight) {\n  if (dstWidth === undefined) {\n    dstWidth = texWidth;\n  }\n\n  if (dstHeight === undefined) {\n    dstHeight = texHeight;\n  }\n\n  gl.bindTexture(gl.TEXTURE_2D, tex);\n\n  // ...\n\n  // 从像素空间转换到裁剪空间\n  var projectionMatrix = m3.projection(canvas.width, canvas.height, 1);\n\n  // 缩放单位矩形的宽和高到 dstWidth, dstHeight 个单位长度\n  var scaleMatrix = m4.scaling(dstWidth, dstHeight, 1);\n\n  // 平移到 dstX, dstY\n  var translationMatrix = m4.translation(dstX, dstY, 0);\n\n  // 将矩阵乘起来\n  var matrix = m4.multiply(translationMatrix, scaleMatrix);\n  matrix = m4.multiply(projectionMatrix, matrix);\n\n  // 设置矩阵\n  gl.uniformMatrix4fv(matrixLocation, false, matrix);\n\n  // 告诉着色器使用纹理单元 0\n  gl.uniform1i(textureLocation, 0);\n\n  // 绘制矩形\n  gl.drawArrays(gl.TRIANGLES, 0, 6);\n}`, `2751921005761382000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{1-8,17-18}"\n              >\n                <span class="gatsby-code-button-language">js{1-8,17-18}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="gatsby-highlight-code-line"><span class="token keyword">function</span> <span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token parameter">tex<span class="token punctuation">,</span> texWidth<span class="token punctuation">,</span> texHeight<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> dstWidth<span class="token punctuation">,</span> dstHeight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>dstWidth <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    dstWidth <span class="token operator">=</span> texWidth<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>dstHeight <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    dstHeight <span class="token operator">=</span> texHeight<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 从像素空间转换到裁剪空间</span>\n  <span class="token keyword">var</span> projectionMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 缩放单位矩形的宽和高到 dstWidth, dstHeight 个单位长度</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">var</span> scaleMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scaling</span><span class="token punctuation">(</span>dstWidth<span class="token punctuation">,</span> dstHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// 平移到 dstX, dstY</span>\n  <span class="token keyword">var</span> translationMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 将矩阵乘起来</span>\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>translationMatrix<span class="token punctuation">,</span> scaleMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>projectionMatrix<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置矩阵</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>matrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 告诉着色器使用纹理单元 0</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>textureLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制矩形</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我将代码修改为使用不同的大小</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/idjd75?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<h2 id="drawimage-版本三"><a href="#drawimage-%E7%89%88%E6%9C%AC%E4%B8%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>drawImage 版本三</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12569804576342292000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ctx.drawImage(image, srcX, srcY, srcWidth, srcHeight, dstX, dstY, dstWidth, dstHeight);`, `12569804576342292000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> srcX<span class="token punctuation">,</span> srcY<span class="token punctuation">,</span> srcWidth<span class="token punctuation">,</span> srcHeight<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> dstWidth<span class="token punctuation">,</span> dstHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>为了实现选择部分纹理，就需要操控纹理坐标。纹理坐标的工作原理在这篇文章中讲到，在那篇文章中我们手工创建纹理坐标，是一个非常常见的方式，但是我们也可以在运行时创建，然后使用矩阵简单的修改纹理坐标。</p>\n<p>让我们给顶点着色器添加一个纹理坐标矩阵，然后将纹理坐标和矩阵相乘。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37876042411803510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\nuniform mat4 u_textureMatrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n   gl_Position = u_matrix * a_position;\n   v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n}`, `37876042411803510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{5,11}"\n              >\n                <span class="gatsby-code-button-language">glsl{5,11}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="token keyword">attribute</span> <span class="token keyword">vec2</span> a_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_matrix<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_textureMatrix<span class="token punctuation">;</span></span>\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_Position <span class="token operator">=</span> u_matrix <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   v_texcoord <span class="token operator">=</span> <span class="token punctuation">(</span>u_textureMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>a_texcoord<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>xy<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在我们要找到纹理矩阵的位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25294232384122760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var matrixLocation = gl.getUniformLocation(program, \'u_matrix\');\nvar textureMatrixLocation = gl.getUniformLocation(program, \'u_textureMatrix\');`, `25294232384122760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js"\n              >\n                <span class="gatsby-code-button-language">js</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> matrixLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_matrix\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> textureMatrixLocation <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token string">\'u_textureMatrix\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>在 drawImage 方法中需要设置它，用于选择我们需要的部分。我们知道纹理坐标是一个单位矩形所以可以简单的修改，就像对位置的处理一样。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79475922049053380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function drawImage(tex, texWidth, texHeight, srcX, srcY, srcWidth, srcHeight, dstX, dstY, dstWidth, dstHeight) {\n  if (dstX === undefined) {\n    dstX = srcX;\n    srcX = 0;\n  }\n\n  if (dstY === undefined) {\n    dstY = srcY;\n    srcY = 0;\n  }\n\n  if (srcWidth === undefined) {\n    srcWidth = texWidth;\n  }\n\n  if (srcHeight === undefined) {\n    srcHeight = texHeight;\n  }\n\n  if (dstWidth === undefined) {\n    dstWidth = srcWidth;\n    srcWidth = texWidth;\n  }\n\n  if (dstHeight === undefined) {\n    dstHeight = srcHeight;\n    srcHeight = texHeight;\n  }\n\n  gl.bindTexture(gl.TEXTURE_2D, tex);\n\n  // ...\n\n  // 从像素空间转换到裁剪空间\n  var projectionMatrix = m3.projection(canvas.width, canvas.height, 1);\n\n  // 缩放单位矩形的宽和高到 dstWidth, dstHeight 个单位长度\n  var scaleMatrix = m4.scaling(dstWidth, dstHeight, 1);\n\n  // 平移到 dstX, dstY\n  var translationMatrix = m4.translation(dstX, dstY, 0);\n\n  // 将矩阵乘起来\n  var matrix = m4.multiply(translationMatrix, scaleMatrix);\n  matrix = m4.multiply(projectionMatrix, matrix);\n\n  // 设置矩阵\n  gl.uniformMatrix4fv(matrixLocation, false, matrix);\n\n  // 因为纹理坐标的范围是 0 到 1\n  // 并且我们的纹理坐标是一个单位矩形\n  // 我们可以旋转平移矩形选择一部分纹理\n  var texMatrix = m4.translation(srcX / texWidth, srcY / texHeight, 0);\n  texMatrix = m4.scale(texMatrix, srcWidth / texWidth, srcHeight / texHeight, 1);\n\n  // 设置纹理矩阵\n  gl.uniformMatrix4fv(textureMatrixLocation, false, texMatrix);\n\n  // 告诉着色器使用纹理单元 0\n  gl.uniform1i(textureLocation, 0);\n\n  // 绘制矩形\n  gl.drawArrays(gl.TRIANGLES, 0, 6);\n}`, `79475922049053380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{1-18,21-22,26-27,50-57}"\n              >\n                <span class="gatsby-code-button-language">js{1-18,21-22,26-27,50-57}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="gatsby-highlight-code-line"><span class="token keyword">function</span> <span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token parameter">tex<span class="token punctuation">,</span> texWidth<span class="token punctuation">,</span> texHeight<span class="token punctuation">,</span> srcX<span class="token punctuation">,</span> srcY<span class="token punctuation">,</span> srcWidth<span class="token punctuation">,</span> srcHeight<span class="token punctuation">,</span> dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> dstWidth<span class="token punctuation">,</span> dstHeight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>dstX <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    dstX <span class="token operator">=</span> srcX<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    srcX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>dstY <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    dstY <span class="token operator">=</span> srcY<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    srcY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>srcWidth <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    srcWidth <span class="token operator">=</span> texWidth<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>srcHeight <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    srcHeight <span class="token operator">=</span> texHeight<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dstWidth <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">    dstWidth <span class="token operator">=</span> srcWidth<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    srcWidth <span class="token operator">=</span> texWidth<span class="token punctuation">;</span></span>  <span class="token punctuation">}</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>dstHeight <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">    dstHeight <span class="token operator">=</span> srcHeight<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    srcHeight <span class="token operator">=</span> texHeight<span class="token punctuation">;</span></span>  <span class="token punctuation">}</span>\n\n  gl<span class="token punctuation">.</span><span class="token function">bindTexture</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TEXTURE_2D</span><span class="token punctuation">,</span> tex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n\n  <span class="token comment">// 从像素空间转换到裁剪空间</span>\n  <span class="token keyword">var</span> projectionMatrix <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 缩放单位矩形的宽和高到 dstWidth, dstHeight 个单位长度</span>\n  <span class="token keyword">var</span> scaleMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scaling</span><span class="token punctuation">(</span>dstWidth<span class="token punctuation">,</span> dstHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 平移到 dstX, dstY</span>\n  <span class="token keyword">var</span> translationMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>dstX<span class="token punctuation">,</span> dstY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 将矩阵乘起来</span>\n  <span class="token keyword">var</span> matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>translationMatrix<span class="token punctuation">,</span> scaleMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  matrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>projectionMatrix<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 设置矩阵</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>matrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token comment">// 因为纹理坐标的范围是 0 到 1</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 并且我们的纹理坐标是一个单位矩形</span></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 我们可以旋转平移矩形选择一部分纹理</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translation</span><span class="token punctuation">(</span>srcX <span class="token operator">/</span> texWidth<span class="token punctuation">,</span> srcY <span class="token operator">/</span> texHeight<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>texMatrix<span class="token punctuation">,</span> srcWidth <span class="token operator">/</span> texWidth<span class="token punctuation">,</span> srcHeight <span class="token operator">/</span> texHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">  <span class="token comment">// 设置纹理矩阵</span></span><span class="gatsby-highlight-code-line">  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>textureMatrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> texMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n  <span class="token comment">// 告诉着色器使用纹理单元 0</span>\n  gl<span class="token punctuation">.</span><span class="token function">uniform1i</span><span class="token punctuation">(</span>textureLocation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 绘制矩形</span>\n  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我也上传了这个版本的例子，这是结果</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/50p8z5?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>不同于画布的二维接口，WebGL 对 drawImage 的情况做了更多的处理。</p>\n<p>一个是我们可以给源或者目标宽高传递负值，负的 srcWidth 会选择 srcX 左边的像素，负的 dstWidth 会将图像绘制在 dstX 的左边，在画布的二维接口中报错是好一点的情况，坏一点时会出现 udefined。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/ytbfsj?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>另一个是我们使用矩阵就可以实现任何矩阵运算可以实现的效果。</p>\n<p>例如绕纹理中心旋转纹理坐标。</p>\n<p>修改纹理坐标的矩阵代码</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81391409183493370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 像二维投影矩阵那样将坐标从纹理空间转换到像素空间\nvar texMatrix = m4.scaling(1 / texWidth, 1 / texHeight, 1);\n\n// 选择一个旋转中心\n// 移动到中心旋转后在回来\nvar texMatrix = m4.translate(texMatrix, texWidth * 0.5, texHeight * 0.5, 0);\nvar texMatrix = m4.zRotate(texMatrix, srcRotation);\nvar texMatrix = m4.translate(texMatrix, texWidth * -0.5, texHeight * -0.5, 0);\n\n// 因为在像素空间，缩放和平移现在是按像素单位\nvar texMatrix = m4.translate(texMatrix, srcX, srcY, 0);\nvar texMatrix = m4.scale(texMatrix, srcWidth, srcHeight, 1);\n\n// 设置纹理矩阵\ngl.uniformMatrix4fv(textureMatrixLocation, false, texMatrix);`, `81391409183493370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="js{1-12}"\n              >\n                <span class="gatsby-code-button-language">js{1-12}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="gatsby-highlight-code-line"><span class="token comment">// 像二维投影矩阵那样将坐标从纹理空间转换到像素空间</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scaling</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> texWidth<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> texHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line"><span class="token comment">// 选择一个旋转中心</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// 移动到中心旋转后在回来</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>texMatrix<span class="token punctuation">,</span> texWidth <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> texHeight <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">zRotate</span><span class="token punctuation">(</span>texMatrix<span class="token punctuation">,</span> srcRotation<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>texMatrix<span class="token punctuation">,</span> texWidth <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> texHeight <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line"><span class="token comment">// 因为在像素空间，缩放和平移现在是按像素单位</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>texMatrix<span class="token punctuation">,</span> srcX<span class="token punctuation">,</span> srcY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> texMatrix <span class="token operator">=</span> m4<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>texMatrix<span class="token punctuation">,</span> srcWidth<span class="token punctuation">,</span> srcHeight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// 设置纹理矩阵</span>\ngl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>textureMatrixLocation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> texMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/fs0bbt?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>可以看出一个问题，在旋转的过程中会看到超出边缘的纹理，由于设置的是 <code class="language-text">CLAMP_TO_EDGE</code> 所以得到重复的边缘。</p>\n<p>我们可以在着色器中丢弃超出 0 到 1 范围的纹理，discard 将会立即退出着色器，不写入像素。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46551234149612110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D texture;\n\nvoid main() {\n   if (v_texcoord.x < 0.0 ||\n       v_texcoord.y < 0.0 ||\n       v_texcoord.x > 1.0 ||\n       v_texcoord.y > 1.0) {\n     discard;\n   }\n\n   gl_FragColor = texture2D(texture, v_texcoord);\n}`, `46551234149612110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{8-13}"\n              >\n                <span class="gatsby-code-button-language">glsl{8-13}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> texture<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">   <span class="token keyword">if</span> <span class="token punctuation">(</span>v_texcoord<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0.0</span> <span class="token operator">||</span></span><span class="gatsby-highlight-code-line">       v_texcoord<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0.0</span> <span class="token operator">||</span></span><span class="gatsby-highlight-code-line">       v_texcoord<span class="token punctuation">.</span>x <span class="token operator">></span> <span class="token number">1.0</span> <span class="token operator">||</span></span><span class="gatsby-highlight-code-line">       v_texcoord<span class="token punctuation">.</span>y <span class="token operator">></span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">     <span class="token keyword">discard</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">   <span class="token punctuation">}</span></span>\n   gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在边缘消失了</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/vf56m7?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>或者你想的话也可以对超出的部分使用纯色</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62006629553565020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`precision mediump float;\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D texture;\n\nvoid main() {\n   if (v_texcoord.x < 0.0 ||\n       v_texcoord.y < 0.0 ||\n       v_texcoord.x > 1.0 ||\n       v_texcoord.y > 1.0) {\n     gl_FragColor = vec4(0, 0, 1, 1); // 蓝色\n     return;\n   }\n\n   gl_FragColor = texture2D(texture, v_texcoord);\n}`, `62006629553565020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{12-13}"\n              >\n                <span class="gatsby-code-button-language">glsl{12-13}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> texture<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token keyword">if</span> <span class="token punctuation">(</span>v_texcoord<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0.0</span> <span class="token operator">||</span>\n       v_texcoord<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0.0</span> <span class="token operator">||</span>\n       v_texcoord<span class="token punctuation">.</span>x <span class="token operator">></span> <span class="token number">1.0</span> <span class="token operator">||</span>\n       v_texcoord<span class="token punctuation">.</span>y <span class="token operator">></span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">     gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 蓝色</span></span><span class="gatsby-highlight-code-line">     <span class="token keyword">return</span><span class="token punctuation">;</span></span>   <span class="token punctuation">}</span>\n\n   gl_FragColor <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>texture<span class="token punctuation">,</span> v_texcoord<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/pd6src?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>接下来讲实现画布二维接口中的矩阵栈。</p>\n<h2 id="一个小优化"><a href="#%E4%B8%80%E4%B8%AA%E5%B0%8F%E4%BC%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一个小优化</h2>\n<p>我并不是要建议使用这个优化，而是想提出更多创意性的想法，因为使用 WebGL 就是利用它提供的特性去做创意。</p>\n<p>你可能会注意到我们使用的位置单位矩形和纹理坐标刚好匹配，所以我们就可以使用位置作为纹理坐标。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12015879228049365000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`attribute vec4 a_position;\n// attribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\nuniform mat4 u_textureMatrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n   gl_Position = u_matrix * a_position;\n   v_texcoord = (u_textureMatrix * a_position).xy;\n}`, `12015879228049365000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                title="glsl{11}"\n              >\n                <span class="gatsby-code-button-language">glsl{11}</span>\n                <span class="gatsby-code-button-text-icon">复制代码</span>\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="glsl"><pre style="counter-reset: linenumber NaN" class="language-glsl line-numbers"><code class="language-glsl"><span class="token keyword">attribute</span> <span class="token keyword">vec4</span> a_position<span class="token punctuation">;</span>\n<span class="token comment">// attribute vec2 a_texcoord;</span>\n\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_matrix<span class="token punctuation">;</span>\n<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> u_textureMatrix<span class="token punctuation">;</span>\n\n<span class="token keyword">varying</span> <span class="token keyword">vec2</span> v_texcoord<span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   gl_Position <span class="token operator">=</span> u_matrix <span class="token operator">*</span> a_position<span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">   v_texcoord <span class="token operator">=</span> <span class="token punctuation">(</span>u_textureMatrix <span class="token operator">*</span> a_position<span class="token punctuation">)</span><span class="token punctuation">.</span>xy<span class="token punctuation">;</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>现在移除关于纹理坐标设置的代码，得到的结果和之前是相同的。</p>\n<p><html><head></head><body><iframe data-src="https://codesandbox.io/embed/n0b4pe?codemirror=1&amp;hidenavigation=1&amp;theme=light&amp;view=preview" class="embedded-codesandbox lazy" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-downloads"></iframe></body></html></p>\n<p>// TODO <a href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-2d-matrix-stack.html" target="_blank" rel="nofollow noreferrer noopener">https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-2d-matrix-stack.html</a></p>',
excerpt:"WebGL…",frontmatter:{date:"2022-08-05 18:45:42",path:"/webgl-fundamental-2d/",tags:"前端, 可视化, WebGL, 读书笔记",title:"WebGL 理论基础——二维",draft:null}}},pathContext:{mainPostPath:"/rust-practice-test/",nextPostPath:"/webgl-fundamental-textures/",prePostPath:"/webgl-fundamental-2d/"}}}});