---
title: CSS新世界概述及准备
date: 2021-12-19 23:44:24
path: /css-new-world-overview-prepare/
tags: 前端, CSS, CSS新世界
---

# 概述

## CSS3 出现的历史和背景

CSS2.1 中的 CSS 属性的设计初衷是展示图文。因为在 CSS2.1 时代，互联网刚刚兴起，计算机硬件、网络带宽等基础设施都比较薄弱。例如：

- 屏幕像素低，所以丰富的色彩和细腻的图形细节无法呈现；
- 硬件性能差，所以动画和滤镜渲染效果不佳；
- 网络速度慢，所以高清大图和视频加载不出来。

迫于当时的环境，Web 页面只能显示图文内容，而图文内容的显示并不需要特别复杂的布局。所以，严格来说，CSS2.1 并没有专门的与布局相关的 CSS 属性

而 js 方面由于 Ajax 技术的兴起导致交互、布局越来越复杂，但 css 没有跟着进步，只能尽可能的挖掘 css 的潜力。于是会有很多当初看起来很奇怪的用法，如 float 属性，明明设计这个 CSS 属性的初衷是实现简单的文字环绕效果，结果最后这个 CSS 属性居然成了实现网站布局的中流砥柱。

因此扩展 CSS2.1 的功能势在必行，于是有了后来的 CSS3。很具有代表性的例子就是环境变量函数 env()。这个函数的出现是因为 iPhone X 等设备顶部的“刘海儿”和底部的触摸横条会和页面内容冲突，所以需要 env() 函数给网页设置安全距离。

又比如说 CSS 布局，Multi-column 多栏布局的第一版规范居然是在 1999 年 6 月制定的，比弹性布局早了整整 10 年。我们仅从规范制定的时间就可以推断 Multi-column 多栏布局和 CSS 中的 float 属性一样，它们都是为图文排版布局服务的，因为 1999 年的时候复杂布局还不是强需求，图文内容展示才是主要的用户需求。

根据应用场景的类型将 CSS 新特性划分为下面 4 个方向

- 更复杂、更具弹性的布局的支持，如弹性布局、网格布局等；
- 更丰富的视觉表现的支持，如圆角、盒阴影、动画和渐变等；
- 更多样的浏览设备的支持，如 CSS Media Queries 媒体查询等；
- 开发者 CSS 自定义能力的支持，如 CSS Houdini 等。

下面再说一说 CSS 新特性的另外一个特点，那就是语法更加复杂，但是理解更加简单。在 CSS2.1 的世界中，很多 CSS 属性虽然语法很简单，但是要理解渲染出来的样式表现，可是要花费大功夫的。除盒模型、块级格式化上下文、包含块等 CSS 特有的概念增加了学习成本之外，更重要的是下面两个原因。

1. CSS2.1 中 CSS 属性主要为图文排版服务，而图文排版是有一定难度的，更不用说是在英语框架体系下的排版设计了。这就导致中文开发者无法轻松理解一些样式表现，例如图文元素默认的基线对齐，这个“基线”就是英语中特有的概念。
2. CSS 属性用在了远离设计本意的场景中。例如之前提到的 Float 布局，很多人都不明白为什么容器元素的高度会塌陷，这是因为 CSS 的 float 属性的设计初衷本来就不包括将该属性用在模块布局上。

CSS 新特性则不一样，其语法设计非常明确，布局相关的 CSS 特性就用来布局，视觉表现相关的 CSS 特性就用来实现视觉效果，背后没有其他看不见的 CSS 特性互相干涉。只要记住了语法，就不会出现意料之外的渲染场景。

但是，这并不表示学习 CSS 新特性就很容易，因为简洁明了的语法是牺牲 CSS 属性的数量换来的，也就是理解成本降低了，但是记忆的成本提高了。例如，网格布局中共有 27 个完全不同的 CSS 属性，其中还有网格布局专用的 CSS 函数和单位，想要学透网格布局是要下苦功的。

最后，总结一下，CSS 新特性是跟随时代发展而产生的，旨在构建更加丰富的 Web 应用程序。CSS 新特性分工很细，这带来的好处是让语法理解起来更简单，但是这些 CSS 特性属性种类更复杂，我们需要记住很多 CSS 特性，本书会详细介绍的 CSS 特性就不止 100 个。

## 模块化的 CSS 新世界

CSS 世界已经有了 CSS2 和 CSS3，那会有 CSS4 吗？

答案是：不会有 CSS4！实际上，现在连 CSS3 这个词都已经名存实亡了，因为 CSS3 已经解体了。

为什么说 CSS3 解体了呢？

因为 CSS 按照大版本的方式进行迭代实在是太低效了。低效的原因其实很好理解，如果 CSS 这门语言必须按照大版本迭代发布的话，只要其中一个版本有一个 CSS 特性存在极大的争议，那这个版本的 CSS 的发布时间就会延后。例如，CSS2.1 的规范在 2002 年开始制定，而一直到 2011 年才成为推荐规范，整个过程足足花费了 10 年的时间，就是因为一些次要的 CSS 特性拖了后腿。

在 Web 前端领域，新技术的发展十分迅速，而 CSS 的规范又是基于当前环境制定的。如果 CSS 的规范从开始制定到最终浏览器完全支持需要横跨很多年，保不准这个 CSS 新特性很快就过时了，或者开发者都约定俗成使用其他方案替代实现了，那之前辛苦做的工作就白费了。CSS 这门语言的竞争力和潜力也会因此下降，因为不能快速响应时代变化的语言不是一门好语言。

为了加速没有争议的 CSS 特性的标准化，W3C 的 CSS 工作组做出了一项被称为“Beijing doctrine”的决定，该决定将 CSS 划分为更小的组件，并把这些组件称为模块。这些模块互相独立，各自按照自己的速度走向标准化。例如，CSS 选择器模块已经到了 Level 4 了，弹性布局模块还是 Level 1。

将 CSS 划分为独立的模块是一个非常明智的决定，浏览器厂商可以根据对自己需求的判断决定究竟对哪些模块进行支持，哪怕这个模块还处于草案状态。例如 CSS 的 env() 函数的规范还是草案状态，但是 Chrome 和 Safari 浏览器的厂商却快速响应，对其进行了支持。对开发者而言，如此迅速地支持新特性犹如一场及时雨。

近几年，浏览器陆续支持一个又一个新的 CSS 特性，这已经成为一种常态。得益于 CSS 这种模块化的划分，以及浏览器厂商的积极支持，我们可以非常及时地使用这些 CSS 新特性来让我们的 Web 应用程序变得更丰富多彩，毕竟有很多内部的项目是不需要考虑兼容性问题的。

当然，这种模块化的设计也不是没有弊端，最大的问题就是设计冗余。例如，弹性布局和网格布局中的对齐属性其实可以统一，但它们却是分离的，这就会徒增学习成本；分栏布局、弹性布局和网格布局中的间隙其实可以统一，但它们也都是分离的，各有各的间隙属性。好在纠正及时，现在这三大布局全部开始改用 gap 属性表示间隙，减少了因为模块化带来的设计冗余。

模块化策略带来的好处远远大于弊端，正所谓瑕不掩瑜，与带来的好处相比，模块化设计的弊端几乎可以忽略不计。从这个角度看，CSS2.1 之后的 CSS 世界就是模块化的新世界，所以我称之为 CSS 新世界。这个 CSS 新世界带来了新的 CSS 属性，并让很多 CSS2 中模糊的概念有了明确的定义，如尺寸体系、逻辑属性、CSS 值类型划分等。CSS 新世界中各模块虽然发展独立，但是相互间还是有很多共性和联系的。因此，CSS 新世界不仅是一个模块化的世界，还是一个缤纷多彩，同时又自成一体的严谨的世界。

最后，本书和《CSS 世界》相互补充，《CSS 世界》中讲解的都是 CSS2.1 的知识，本书讲解的都是 CSS2.1 之后的知识，再加上《CSS 选择器世界》，这 3 本书中的内容一起构成 CSS 这门语言的完整面貌。

# 需要提前了解的知识

本章主要介绍 CSS 数据类型、CSS 属性值定义语法和 CSS 全局关键字属性值。这些知识适用于任何 CSS 属性

## 互通互联的 CSS 数据类型

CSS 数据类型定义的是 CSS 属性中具有代表性的值，在规范的语法格式中，使用关键字外加一对尖括号（“<”和“>”）表示，例如数值类型是 `<number>`、色值类型是 `<color>` 等。

掌握 CSS 数据类型对了解 CSS 新世界的体系和快速学习 CSS 新特性非常有帮助。

### 为什么要关注 CSS 数据类型

任何 CSS 属性值一定包含一个或多个数据类型。

在 CSS2 时代，CSS 数据类型的概念并不怎么重要，因为常用的 CSS 属性翻来覆去就那几个，这些 CSS 属性支持的属性值我们反复使用就记住了。但是在 CSS 新世界中，由于各个 CSS 模块独立发展，没有统一的大版本进行约束，因此 CSS 的发展和变化非常快，这导致短时间内大量的 CSS 新属性如雨后春笋般涌现。

如果此时还和过去一样，只是凭借经验去学习 CSS 新特性，那么学习起来肯定是十分困难的，因为效率比较低下。此时 CSS 数据类型的价值就体现出来了，当 CSS 新属性出现的时候，我们无须记忆数量众多的属性值名称，只需要记住支持的数据类型即可，这样学习成本就大大降低了。

举一个例子，background-image 是使用频率非常高的一个 CSS 属性，这个 CSS 属性的语法结构是下面这样的：

```css
background-image: none | <image>;
```

这个语法中出现的 `<image>` 就是一种数据类型，它包括下面这些类型和函数：

- `<url>`；
- `<gradient>`；
- element()；
- image()；
- image-set()；
- cross-fade()。

也就是说，CSS 的 background-image 属性不仅支持 url() 函数和渐变图像，还支持 element()、image()、image-set() 和 cross-fade() 等函数。

通过上面这段描述大家已经知道了 background-image 属性原来支持这么多种类型的属性值，那么请问，CSS 的 mask-image 属性支持的属性值都有哪些呢？

这么突然一问，想必大家一时也想不出准确的答案，毕竟见得少、用得少，这么细节的知识哪能知道呢？没关系，我们看一看 mask-image 属性的语法：

```css
mask-image: none | <image> | <mask-source>;
```

这个语法中出现了 `<image>` 数据类型！这下就豁然开朗了，这个 `<image>` 不就是 background-image 语法中的 `<image>` 吗？没错，两者是一样的。也就是说，mask-image 属性不仅支持 url() 函数和渐变图像，还支持 element()、image()、image-set() 和 cross-fade() 等函数。这样 CSS 的 mask-image 属性的语法就学会了一半，真是高效！

由于 CSS 属性值包含的 CSS 数据类型都是互通互联的，因此，CSS 数据类型只要学习一次，就可以广泛运用，这样要比根据经验记忆几个片面的 CSS 属性值实用多了。

CSS 数据类型除了可以帮助我们快速掌握 CSS 的语法，还能快速更新整个 CSS 世界的知识库。例如上面介绍的 `<image>` 数据类型中，我还故意漏了一个新成员，那就是 paint() 函数，它是 CSS Paint API 带来的新成员，相关规范在 2016 年才开始制定。

如果你是通过记住具体的 CSS 属性值来学习 CSS，那么你应该会知道 background-image 属性支持 paint() 函数，因为几乎所有 CSS Paint API 案例都是用 background-image 属性来举例的：

```css
.example {
   background-image: paint(some-ident);
}
```

不过要是此时问你 mask-image 属性是否支持 paint() 函数，由于你大脑中的记忆库里没有相关信息的储备，因此你会疑惑，会不确定，会想要重新去翻阅资料学习，甚至还会做个演示案例确认一下。

如果你记忆的是 `<image>` 数据类型，再问你 mask-image 属性是否支持 paint() 函数，你肯定会毫不犹豫地回复支持，因为 mask-image 属性值支持 `<image>` 数据类型，而 paint() 函数就属于 `<image>` 数据类型。

不仅是 mask-image 属性，CSS 新世界中还有很多支持 `<image>` 数据类型的 CSS 属性，以及以后会支持 `<image>` 数据类型的 CSS 属性都会同步更新 paint() 函数这个新特性。因此，大家一定要关注 CSS 数据类型，这可以让我们学习 CSS 新特性更迅速，理解 CSS 新特性更轻松。

### 几个常见数据类型的简单介绍

CSS 数据类型非常多，保守估计，至少有 50 个，这里介绍几个常见且值得一提的数据类型。

CSS Shapes 布局中有一个名为 shape-outside 的属性，我们不用关心这个 CSS 属性的含义，只看这个 CSS 属性的语法：

```css
shape-outside: none | <shape-box> || <basic-shape> | <image>;
```

这里出现了 3 种不同的数据类型，下面分别介绍一下。

1. `<shape-box>` 支持的属性值如下：

   - `<box>`；
   - margin-box。

   在 CSS 世界中，需要用到 margin-box 的属性并不多，shape-outside 属性就是一个特例。虽然 `<shape-box>` 数据类型并不常用，但是 `<box>` 数据类型却很常见，`<box>` 数据类型包括下面这些属性值：

   - content-box；
   - padding-box；
   - border-box。

   background-origin 和 background-clip 等 CSS 属性的属性值就是 `<box>` 数据类型。

2. `<basic-shape>` 支持的属性值如下：

   - inset()；
   - circle()；
   - ellipse()；
   - polygon()；
   - path()。

   clip-path 和 offset-path 等 CSS 属性的属性值属于 `<basic-shape>`数据类型。

3. `<image>` 支持的属性值如下：

   - `<url>`；
   - `<gradient>`；
   - element()；
   - image()；
   - image-set()；
   - cross-fade()；
   - paint()。

   上述属性值中 `<url>` 也是一种数据类型，用于表示使用 url() 函数调用的图像资源；`<gradient>` 也是一种数据类型，用于表示渐变图像。

   background-image 和 mask-image 等 CSS 属性的属性值属于 `<image>` 数据类型。

从上面的介绍可以看出，CSS 的 shape-outside 支持的属性值非常庞杂，不过只要牢记这 3 个数据类型，就可以轻松记住很多属性值，至于其中的每一个属性值究竟有什么含义，在这里不展开讲解，之后会有详细的阐述。

```css
color: <color>;
```

这里的 `<color>` 数据类型支持的属性值如下：

- `<rgb()>`；
- `<rgba()>`；
- `<hsl()>`；
- `<hsla()>`；
- `<hex-color>`；
- `<named-color>`；
- currentColor；
- `<deprecated-system-color>`。

最后一个属性值 `<deprecated-system-color>` 指废弃的系统颜色，这在《CSS 世界》有专门的介绍，本书不再赘述，其他属性值在对应章节都会有详细的讲解。

以上就是我要简单介绍的几个常见且值得一提的数据类型。至于其他数据类型，要么比较简单，例如 `<number>`、`<percent>` 等数据类型，指数值和百分比值；要么比较生僻且唯一，例如 `<quote>` 数据类型，指 content 属性中表示各类引号的关键字值，如 open-quote 和 close-quote 等。

本书不会逐个展开介绍 CSS 数据类型，想要了解更完整的 CSS 数据类型，可以参考的一篇文章 [CSS 值类型文档大全](https://www.zhangxinxu.com/wordpress/2019/11/css-value-type/)。

## 学会看懂 CSS 属性值定义语法

CSS 属性值有专门的定义语法，用来表示 CSS 属性值的合法组成。例如，线性渐变的语法为：

```css
linear-gradinent([<angle> | to <side-or-corner>,]?<color-stop-list>)
```

### 学习 CSS 属性值定义语法的好处

在开始介绍具体的语法规则之前，我想先说说我们为什么要学会看懂 CSS 属性值定义语法（CSS value definition syntax）。就拿线性渐变的语法举例，根据我的观察，几乎无一例外，CSS 开发者会写出类似下面这样的 CSS 线性渐变代码：

```css
background: linear-gradient(to bottom, deepskyblue, deeppink);
```

上面这句 CSS 声明有问题吗？从语法和功能上讲是没有任何问题的，线性渐变可以正常渲染，但是在写法上却有瑕疵，`to bottom,` 这几个字符是多余的。我们直接使用下面这样的书写方式就可以了：

```css
background: linear-gradient(deepskyblue, deeppink);
```

如果你看得懂 CSS 的语法，那么在学习 CSS 的时候，只要稍微看一看线性渐变的语法，就能很轻松地知道 `线性渐变的方向设置是可以省略的` 这样一个细节知识，也就能写出更简洁的 CSS 代码。

这就是看懂 CSS 属性值定义语法的好处：不仅有助于快速了解 CSS 新属性，还有助于发现别人注意不到的细节知识，而这些细节知识就是你的竞争力所在，也是从众多 CSS 开发者中脱颖而出的重要因素之一。

### CSS 属性值定义语法详解

CSS 属性值定义语法是专门用来限定 CSS 属性合法取值的语法，这种语法包含以下 3 种基本组成元素：

- 关键字；
- 数据类型；
- 符号。

线性渐变的语法就包含上面这 3 种基本组成元素：

```css
linear-gradinent([<angle> | to <side-or-corner>,]?<color-stop-list>)
```

先讲一下这一语法中的几个关键点：

- to 是关键字；
- `<angle>`、`<side-or-corner>` 和 `<color-stop-list>` 是数据类型，如果对这几个数据类型不了解，可以参考文章 [CSS 值类型文档大全](https://www.zhangxinxu.com/wordpress/2019/11/css-value-type/)；
- `[]` `?` `,` 是符号。

下面稍微展开介绍一下这 3 种基本组成元素。

#### 关键字

关键字分为通用关键字和全局关键字：

- auto、none、ease 等关键字是通用关键字，或者可以称为普通关键字，这些关键字均只被部分 CSS 属性支持；
- inherit、initial、unset 和 revert 是全局关键字，属于被所有 CSS 属性支持的特殊关键字，全局关键字在 2.3 节会介绍，这里不展开。

#### 数据类型

数据类型外面有一对尖括号（“<”和“>”）。有些数据类型是 CSS 规范中专门定义的，它们被称为基本类型，其他数据类型就被称为其他类型。

#### 符号

符号是 CSS 语法中的重点和难点。

CSS 语法中的符号分为字面符号、组合符号和数量符号这 3 类，下面就介绍一下它们对应的含义。

1. 字面符号指的是 CSS 属性值中原本就支持的合法符号，这些符号在 CSS 语法中会按照其原本的字面意义呈现。目前字面符号就两个，一个是逗号（,），另一个是斜杠（/）。具体描述如表 2-1 所示。

| 符号 | 名称 | 描述 |
| :-- | :-- | :-- |
| , | 并列分隔符 | 用来分隔多个并列值，或者分隔函数的参数值 |
| / | 缩写分隔符 | 用来分隔一个值的多个部分，在 CSS 缩写中用于分离类型相同但属于不同 CSS 属性的值，以及用在部分 CSS 函数中 |

2. 组合符号用来表示数个基本元素之间的组合关系。目前共有 5 个组合符号，其中大多数组合符号的含义一目了然，除了“|”这个组合符号。因为“|”表示互斥，这在编程语言中比较少见，大家可以特别关注一下。具体描述如表 2-2 所示（表中从上往下组合符号的优先级越来越高）。

| 符号 | 名称         | 描述                                                                 |
| :--- | :----------- | :------------------------------------------------------------------- |
|      | 并列         | 符号为普通空格字符，表示各部分必须出现，同时需要按顺序出现           |
| `&&` | “与”组合符   | 各部分必须出现，且可以不按顺序出现                                   |
| `||` | “或”组合符   | 各部分至少出现一个，可以不按顺序出现                                 |
| `|`  | “互斥”组合符 | 各部分恰好出现其中一个                                               |
| `[]` | 方括号       | 将各部分进行分组以绕过上面几个符号的优先规则，因此方括号的优先级最高 |

3. 数量符号用来描述一个元素可以出现多少次，数量符号不能叠加出现，并且优先级高于组合符号。目前共有 6 个数量符号，大多数的数量符号的含义和在正则表达式中的含义是一样的，具体描述如表 2-3 所示。

| 符号    | 名称       | 描述                                                           |
| :------ | :--------- | :------------------------------------------------------------- |
|         | 无数量符号 | 恰好出现一次                                                   |
| `*`     | 星号       | 可以出现任意次数                                               |
| `+`     | 加号       | 可以出现一次或多次                                             |
| `{A,B}` | 花括号     | 出现最少 A 次，最多 B 次                                       |
| `#`     | 井号       | 可以出现一次或多次，但多次出现时必须以逗号分隔                 |
| `!`     | 叹号       | 表示当前分组必须产生一个值，该符号多出现在组合符号方括号的后面 |

有了表 2-1～表 2-3，理解 CSS 属性值定义语法就变得很容易了。例如，线性渐变的语法解析如图 2-1 的标注说明所示。

![](res/2021-12-20-11-41-27.png)

下面先讲一下语法中的元素。

- 逗号 `,` 是字面符号，没有什么特殊的含义，只表示这里需要有一个逗号字符。要注意下面这种写法是不合法的：

   ```css
   /* 缺少逗号 */
   background: linear-gradient(0deg blue, pink);
   ```

- 空格是组合符号，表示并列，同时保证各部分按顺序出现。因此如果把 `<color-stop-list>` 数据放前面，就不合法

   ```css
   /* 顺序不对 */
   background: linear-gradient(blue, pink, 0deg);
   ```

- “互斥”组合符 `|` 表示角度和方位只能出现一个，两者不能同时存在

   ```css
   /* 角度与方位不能同时出现 */
   background: linear-gradient(0deg to top, blue, pink);
   ```

- 方括号 `[]` 用来分组，方便指定数量
- 问号 `?` 是数量符号，表示方括号框起来的元素可以出现零次或者一次，零次的意思就是这个元素可以不出现。因此，下面的写法是不合法的：

   ```css
   /* 角度或者方位最多出现一次 */
   background: linear-gradient(0deg, 0deg, blue, pink);
   ```

综上分析，下面这些线性渐变语法都是合法的：

```css
linear-gradient(<color-stop-list>);
linear-gradient(<angle>, <color-stop-list>);
linear-gradient(to <side-or-corner>, <color-stop-list>);
```

接下来只要弄清楚 `<angle>`、`<side-or-corner>` 和 `<color-stop-list>` 这几个数据类型的含义和语法，我们就可以理解线性渐变的语法了。相关内容在后面对应的章节会有非常详细且深入的介绍，这里不做展开。

最后再通过一些案例介绍一下线性渐变语法之外的符号。

#### 字面符号斜杠（/）的详细介绍

在 CSS 这门语言中，凡是出现斜杠（/）的地方，斜杠前后的数据类型一定是相同或者部分相同的，否则整个语句就是非法的。很多开发者总是记不住包含斜杠的 CSS 缩写语法，那么只要记住这个规则就可以了。

例如，background 属性值中需要使用斜杠分隔的两个属性一定是 background-position 和 background-size，因为只有这两个属性的值的类型相似，且都可以使用百分比值表示。这样就会出现很有趣的现象，像下面这样的 CSS 语句是合法的：

```css
/* 合法 */
background: 0 / 0;
```

但是下面这个看上去合法的缩写却是非法的：

```css
/* 不合法 */
background: #eee url(https://demo.png) no-repeat / contain;
```

因为斜杠前面的值 no-repeat 属于 background-repeat 属性，斜杠后面的值 contain 属于 background-size 属性，而 background-repeat 的属性值的类型绝不可能和 background-size 的属性值的类型一致，这不符合斜杠前后数据类型至少部分相同的要求，所以这条语句是非法的。

记住，background 缩写语法中斜杠前面只能是 background-position 的属性值，上面的 CSS 语句要想合法，可以把 background-position 属性的初始值 0 0 写上：

```css
/* 合法 */
background: #eee url(https://demo.png) no-repeat 0 0 / contain;
```

又如，font 属性的斜杠前后一定是 font-size 的属性值和 line-height 的属性值，因为两者都可以使用 px 长度单位值。例如：

```css
.example {
   font: 16px / 1.5 sans-serif;
}
```

斜杠这个符号除了出现在部分 CSS 的缩写语法中，还会出现在一些 CSS 函数中用来表示分隔，例如 rgba() 函数的语法：

```css
<rgba()> = rgba(<percentage>{3} [/<alpha-value>]?) | rgba(<number>{3} [/<alpha-value>]?) | rgba(<percentage>#{3}, <alpha-value>?) | rgba(<number>#{3}, <alpha-value>?)
```

从上面的语法我们可以看出 rgba() 函数也是支持斜杠的，因此，下面的属性值都是合法的：

```css
/* 合法 */
rgba(100% 0% 0% / .5);
rgba(255 0 0 / .5);
```

类似 `rgba() 函数支持斜杠语法` 这样的细节知识，如果不看语法是绝对不知道的。还是那句话，要想 CSS 学得好，CSS 属性值定义语法必须要学好，其重要性不亚于 JavaScript 中的正则表达式。

#### 其他符号介绍

下面介绍其他符号。

1. “或”组合符（||）。“或”组合符（||）在 CSS 语法中很常见，例如 border 属性的语法：

   ```css
   border: <line-width> || <line-style> || <color>;
   ```

   这一语法表示 border 属性的 3 个值的顺序是随机的，组合也是随机的。

2. 叹号（!）。叹号（!）在 image()函数中出现过：

   ```css
   <image()> = image(<image-tags>? [<image-src>?, <color>?]!)
   ```

   这一语法表示 `<image-src>` 数据类型和 `<color>` 数据类型至少出现一个，当然，两者也可以同时出现。

3. 其他数量符号和“与”组合符（&&）。到目前为止，还有井号（#）、星号（\*）、花括号（{A,B}）等数量符号和“与”组合符（&&）没有介绍，这里用 box-shadow 属性的语法加以说明，如下：

   ```css
   box-shadow: none | <shadow>#;
   ```

   等同于

   ```css
   box-shadow: none | [<shadow>, ] *;
   ```

   或可写成

   ```css
   box-shadow: none | [inset? && <length>{2, 4} && <color>?]#;
   ```

   其中出现的“与”组合符（&&），表明 inset 关键字、`<length>` 数据类型和 `<color>` 数据类型的顺序是可以随意排列的，所以下面这几种写法都是合法的：

   ```css
   box-shadow: 2px 2px inset #000;
   box-shadow: inset #000 2px 2px;
   box-shadow: #000 2px 2px inset;
   ```

   其中 `<length>{2,4}` 表示可以使用 2 ～ 4 个 `<length>`数据类型，很好理解。

下面要抛出一个很有意思的问题了：既然 `[<shadow>,]*` 等同于 `<shadow>#`，那这个 # 符号是不是一个多余的设计呢？

这不是多余的设计，虽然多了一个 # 符号就多了一点学习成本，但是语法更简洁了，更重要的是 # 符号有一个和其他数量符号不一样的特性，那就是 # 符号可以在后面指定数量范围。例如 rgba() 函数的语法中有下面这一段内容：

```css
rgba(<number>#{3}, <alpha-value>?)
```

// TODO CSS 新世界概述
